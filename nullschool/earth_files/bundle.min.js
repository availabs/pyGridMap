/**
 * Project-specific code is Copyright (c) 2016 Cameron Beccario
 *
 * See https://earth.nullschool.net/js/bundle.js for a readable version of this source, including licenses.
 * See https://github.com/cambecc/earth for a free version of this project.
 */
!function t(n,e,r){function a(o,u){if(!e[o]){if(!n[o]){var c="function"==typeof require&&require;if(!u&&c)return c(o,!0);if(i)return i(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var l=e[o]={exports:{}};n[o][0].call(l.exports,function(t){var e=n[o][1][t];return a(e?e:t)},l,l.exports,t,n,e,r)}return e[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(t,n,e){!function(n,r){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(t,e,a){n.Backbone=r(n,a,t,e)});else if("undefined"!=typeof e){var a=t("underscore");r(n,e,a)}else n.Backbone=r(n,{},n._,n.jQuery||n.Zepto||n.ender||n.$)}(this,function(t,n,e,r){var a=t.Backbone,i=[],o=(i.push,i.slice);i.splice;n.VERSION="1.1.2",n.$=r,n.noConflict=function(){return t.Backbone=a,this},n.emulateHTTP=!1,n.emulateJSON=!1;var u=n.Events={on:function(t,n,e){if(!s(this,"on",t,[n,e])||!n)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:n,context:e,ctx:e||this}),this},once:function(t,n,r){if(!s(this,"once",t,[n,r])||!n)return this;var a=this,i=e.once(function(){a.off(t,i),n.apply(this,arguments)});return i._callback=n,this.on(t,i,r)},off:function(t,n,r){var a,i,o,u,c,l,f,h;if(!this._events||!s(this,"off",t,[n,r]))return this;if(!t&&!n&&!r)return this._events=void 0,this;for(u=t?[t]:e.keys(this._events),c=0,l=u.length;l>c;c++)if(t=u[c],o=this._events[t]){if(this._events[t]=a=[],n||r)for(f=0,h=o.length;h>f;f++)i=o[f],(n&&n!==i.callback&&n!==i.callback._callback||r&&r!==i.context)&&a.push(i);a.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var n=o.call(arguments,1);if(!s(this,"trigger",t,n))return this;var e=this._events[t],r=this._events.all;return e&&l(e,n),r&&l(r,arguments),this},stopListening:function(t,n,r){var a=this._listeningTo;if(!a)return this;var i=!n&&!r;r||"object"!=typeof n||(r=this),t&&((a={})[t._listenId]=t);for(var o in a)t=a[o],t.off(n,r,this),(i||e.isEmpty(t._events))&&delete this._listeningTo[o];return this}},c=/\s+/,s=function(t,n,e,r){if(!e)return!0;if("object"==typeof e){for(var a in e)t[n].apply(t,[a,e[a]].concat(r));return!1}if(c.test(e)){for(var i=e.split(c),o=0,u=i.length;u>o;o++)t[n].apply(t,[i[o]].concat(r));return!1}return!0},l=function(t,n){var e,r=-1,a=t.length,i=n[0],o=n[1],u=n[2];switch(n.length){case 0:for(;++r<a;)(e=t[r]).callback.call(e.ctx);return;case 1:for(;++r<a;)(e=t[r]).callback.call(e.ctx,i);return;case 2:for(;++r<a;)(e=t[r]).callback.call(e.ctx,i,o);return;case 3:for(;++r<a;)(e=t[r]).callback.call(e.ctx,i,o,u);return;default:for(;++r<a;)(e=t[r]).callback.apply(e.ctx,n);return}},f={listenTo:"on",listenToOnce:"once"};e.each(f,function(t,n){u[n]=function(n,r,a){var i=this._listeningTo||(this._listeningTo={}),o=n._listenId||(n._listenId=e.uniqueId("l"));return i[o]=n,a||"object"!=typeof r||(a=this),n[t](r,a,this),this}}),u.bind=u.on,u.unbind=u.off,e.extend(n,u);var h=n.Model=function(t,n){var r=t||{};n||(n={}),this.cid=e.uniqueId("c"),this.attributes={},n.collection&&(this.collection=n.collection),n.parse&&(r=this.parse(r,n)||{}),r=e.defaults({},r,e.result(this,"defaults")),this.set(r,n),this.changed={},this.initialize.apply(this,arguments)};e.extend(h.prototype,u,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return e.clone(this.attributes)},sync:function(){return n.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return e.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,n,r){var a,i,o,u,c,s,l,f;if(null==t)return this;if("object"==typeof t?(i=t,r=n):(i={})[t]=n,r||(r={}),!this._validate(i,r))return!1;o=r.unset,c=r.silent,u=[],s=this._changing,this._changing=!0,s||(this._previousAttributes=e.clone(this.attributes),this.changed={}),f=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(a in i)n=i[a],e.isEqual(f[a],n)||u.push(a),e.isEqual(l[a],n)?delete this.changed[a]:this.changed[a]=n,o?delete f[a]:f[a]=n;if(!c){u.length&&(this._pending=r);for(var h=0,d=u.length;d>h;h++)this.trigger("change:"+u[h],this,f[u[h]],r)}if(s)return this;if(!c)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,n){return this.set(t,void 0,e.extend({},n,{unset:!0}))},clear:function(t){var n={};for(var r in this.attributes)n[r]=void 0;return this.set(n,e.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!e.isEmpty(this.changed):e.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?e.clone(this.changed):!1;var n,r=!1,a=this._changing?this._previousAttributes:this.attributes;for(var i in t)e.isEqual(a[i],n=t[i])||((r||(r={}))[i]=n);return r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return e.clone(this._previousAttributes)},fetch:function(t){t=t?e.clone(t):{},void 0===t.parse&&(t.parse=!0);var n=this,r=t.success;return t.success=function(e){return n.set(n.parse(e,t),t)?(r&&r(n,e,t),void n.trigger("sync",n,e,t)):!1},D(this,t),this.sync("read",this,t)},save:function(t,n,r){var a,i,o,u=this.attributes;if(null==t||"object"==typeof t?(a=t,r=n):(a={})[t]=n,r=e.extend({validate:!0},r),a&&!r.wait){if(!this.set(a,r))return!1}else if(!this._validate(a,r))return!1;a&&r.wait&&(this.attributes=e.extend({},u,a)),void 0===r.parse&&(r.parse=!0);var c=this,s=r.success;return r.success=function(t){c.attributes=u;var n=c.parse(t,r);return r.wait&&(n=e.extend(a||{},n)),e.isObject(n)&&!c.set(n,r)?!1:(s&&s(c,t,r),void c.trigger("sync",c,t,r))},D(this,r),i=this.isNew()?"create":r.patch?"patch":"update","patch"===i&&(r.attrs=a),o=this.sync(i,this,r),a&&r.wait&&(this.attributes=u),o},destroy:function(t){t=t?e.clone(t):{};var n=this,r=t.success,a=function(){n.trigger("destroy",n,n.collection,t)};if(t.success=function(e){(t.wait||n.isNew())&&a(),r&&r(n,e,t),n.isNew()||n.trigger("sync",n,e,t)},this.isNew())return t.success(),!1;D(this,t);var i=this.sync("delete",this,t);return t.wait||a(),i},url:function(){var t=e.result(this,"urlRoot")||e.result(this.collection,"url")||F();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,n){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},e.extend(t||{},{validate:!0}))},_validate:function(t,n){if(!n.validate||!this.validate)return!0;t=e.extend({},this.attributes,t);var r=this.validationError=this.validate(t,n)||null;return r?(this.trigger("invalid",this,r,e.extend(n,{validationError:r})),!1):!0}});var d=["keys","values","pairs","invert","pick","omit"];e.each(d,function(t){h.prototype[t]=function(){var n=o.call(arguments);return n.unshift(this.attributes),e[t].apply(e,n)}});var p=n.Collection=function(t,n){n||(n={}),n.model&&(this.model=n.model),void 0!==n.comparator&&(this.comparator=n.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,e.extend({silent:!0},n))},g={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};e.extend(p.prototype,u,{model:h,initialize:function(){},toJSON:function(t){return this.map(function(n){return n.toJSON(t)})},sync:function(){return n.sync.apply(this,arguments)},add:function(t,n){return this.set(t,e.extend({merge:!1},n,v))},remove:function(t,n){var r=!e.isArray(t);t=r?[t]:e.clone(t),n||(n={});var a,i,o,u;for(a=0,i=t.length;i>a;a++)u=t[a]=this.get(t[a]),u&&(delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,n.silent||(n.index=o,u.trigger("remove",u,this,n)),this._removeReference(u,n));return r?t[0]:t},set:function(t,n){n=e.defaults({},n,g),n.parse&&(t=this.parse(t,n));var r=!e.isArray(t);t=r?t?[t]:[]:e.clone(t);var a,i,o,u,c,s,l,f=n.at,d=this.model,p=this.comparator&&null==f&&n.sort!==!1,v=e.isString(this.comparator)?this.comparator:null,m=[],y=[],M={},b=n.add,w=n.merge,x=n.remove,_=!p&&b&&x?[]:!1;for(a=0,i=t.length;i>a;a++){if(c=t[a]||{},o=c instanceof h?u=c:c[d.prototype.idAttribute||"id"],s=this.get(o))x&&(M[s.cid]=!0),w&&(c=c===u?u.attributes:c,n.parse&&(c=s.parse(c,n)),s.set(c,n),p&&!l&&s.hasChanged(v)&&(l=!0)),t[a]=s;else if(b){if(u=t[a]=this._prepareModel(c,n),!u)continue;m.push(u),this._addReference(u,n)}u=s||u,!_||!u.isNew()&&M[u.id]||_.push(u),M[u.id]=!0}if(x){for(a=0,i=this.length;i>a;++a)M[(u=this.models[a]).cid]||y.push(u);y.length&&this.remove(y,n)}if(m.length||_&&_.length)if(p&&(l=!0),this.length+=m.length,null!=f)for(a=0,i=m.length;i>a;a++)this.models.splice(f+a,0,m[a]);else{_&&(this.models.length=0);var k=_||m;for(a=0,i=k.length;i>a;a++)this.models.push(k[a])}if(l&&this.sort({silent:!0}),!n.silent){for(a=0,i=m.length;i>a;a++)(u=m[a]).trigger("add",u,this,n);(l||_&&_.length)&&this.trigger("sort",this,n)}return r?t[0]:t},reset:function(t,n){n||(n={});for(var r=0,a=this.models.length;a>r;r++)this._removeReference(this.models[r],n);return n.previousModels=this.models,this._reset(),t=this.add(t,e.extend({silent:!0},n)),n.silent||this.trigger("reset",this,n),t},push:function(t,n){return this.add(t,e.extend({at:this.length},n))},pop:function(t){var n=this.at(this.length-1);return this.remove(n,t),n},unshift:function(t,n){return this.add(t,e.extend({at:0},n))},shift:function(t){var n=this.at(0);return this.remove(n,t),n},slice:function(){return o.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,n){return e.isEmpty(t)?n?void 0:[]:this[n?"find":"filter"](function(n){for(var e in t)if(t[e]!==n.get(e))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),e.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(e.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return e.invoke(this.models,"get",t)},fetch:function(t){t=t?e.clone(t):{},void 0===t.parse&&(t.parse=!0);var n=t.success,r=this;return t.success=function(e){var a=t.reset?"reset":"set";r[a](e,t),n&&n(r,e,t),r.trigger("sync",r,e,t)},D(this,t),this.sync("read",this,t)},create:function(t,n){if(n=n?e.clone(n):{},!(t=this._prepareModel(t,n)))return!1;n.wait||this.add(t,n);var r=this,a=n.success;return n.success=function(t,e){n.wait&&r.add(t,n),a&&a(t,e,n)},t.save(null,n),t},parse:function(t,n){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,n){if(t instanceof h)return t;n=n?e.clone(n):{},n.collection=this;var r=new this.model(t,n);return r.validationError?(this.trigger("invalid",this,r.validationError,n),!1):r},_addReference:function(t,n){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,n){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,n,e,r){("add"!==t&&"remove"!==t||e===this)&&("destroy"===t&&this.remove(n,r),n&&t==="change:"+n.idAttribute&&(delete this._byId[n.previous(n.idAttribute)],null!=n.id&&(this._byId[n.id]=n)),this.trigger.apply(this,arguments))}});var m=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];e.each(m,function(t){p.prototype[t]=function(){var n=o.call(arguments);return n.unshift(this.models),e[t].apply(e,n)}});var y=["groupBy","countBy","sortBy","indexBy"];e.each(y,function(t){p.prototype[t]=function(n,r){var a=e.isFunction(n)?n:function(t){return t.get(n)};return e[t](this.models,a,r)}});var M=n.View=function(t){this.cid=e.uniqueId("view"),t||(t={}),e.extend(this,e.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];e.extend(M.prototype,u,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof n.$?t:n.$(t),this.el=this.$el[0],e!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=e.result(this,"events")))return this;this.undelegateEvents();for(var n in t){var r=t[n];if(e.isFunction(r)||(r=this[t[n]]),r){var a=n.match(b),i=a[1],o=a[2];r=e.bind(r,this),i+=".delegateEvents"+this.cid,""===o?this.$el.on(i,r):this.$el.on(i,o,r)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(e.result(this,"el"),!1);else{var t=e.extend({},e.result(this,"attributes"));this.id&&(t.id=e.result(this,"id")),this.className&&(t.class=e.result(this,"className"));var r=n.$("<"+e.result(this,"tagName")+">").attr(t);this.setElement(r,!1)}}}),n.sync=function(t,r,a){var i=_[t];e.defaults(a||(a={}),{emulateHTTP:n.emulateHTTP,emulateJSON:n.emulateJSON});var o={type:i,dataType:"json"};if(a.url||(o.url=e.result(r,"url")||F()),null!=a.data||!r||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(a.attrs||r.toJSON(a))),a.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),a.emulateHTTP&&("PUT"===i||"DELETE"===i||"PATCH"===i)){o.type="POST",a.emulateJSON&&(o.data._method=i);var u=a.beforeSend;a.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",i),u?u.apply(this,arguments):void 0}}"GET"===o.type||a.emulateJSON||(o.processData=!1),"PATCH"===o.type&&x&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var c=a.xhr=n.ajax(e.extend(o,a));return r.trigger("request",r,c,a),c};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),_={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};n.ajax=function(){return n.$.ajax.apply(n.$,arguments)};var k=n.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},E=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,S=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;e.extend(k.prototype,u,{initialize:function(){},route:function(t,r,a){e.isRegExp(t)||(t=this._routeToRegExp(t)),e.isFunction(r)&&(a=r,r=""),a||(a=this[r]);var i=this;return n.history.route(t,function(e){var o=i._extractParameters(t,e);i.execute(a,o),i.trigger.apply(i,["route:"+r].concat(o)),i.trigger("route",r,o),n.history.trigger("route",i,r,o)}),this},execute:function(t,n){t&&t.apply(this,n)},navigate:function(t,e){return n.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=e.result(this,"routes");for(var t,n=e.keys(this.routes);null!=(t=n.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(A,"\\$&").replace(E,"(?:$1)?").replace(T,function(t,n){return n?t:"([^/?]+)"}).replace(S,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,n){var r=t.exec(n).slice(1);return e.map(r,function(t,n){return n===r.length-1?t||null:t?decodeURIComponent(t):null})}});var N=n.History=function(){this.handlers=[],e.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},j=/^[#\/]|\s+$/g,R=/^\/+|\/+$/g,C=/msie [\w.]+/,q=/\/$/,P=/#.*$/;N.started=!1,e.extend(N.prototype,u,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var n=(t||this).location.href.match(/#(.*)$/);return n?n[1]:""},getFragment:function(t,n){if(null==t)if(this._hasPushState||!this._wantsHashChange||n){t=decodeURI(this.location.pathname+this.location.search);var e=this.root.replace(q,"");t.indexOf(e)||(t=t.slice(e.length))}else t=this.getHash();return t.replace(j,"")},start:function(t){if(N.started)throw new Error("Backbone.history has already been started");N.started=!0,this.options=e.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),a=document.documentMode,i=C.exec(navigator.userAgent.toLowerCase())&&(!a||7>=a);if(this.root=("/"+this.root+"/").replace(R,"/"),i&&this._wantsHashChange){var o=n.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?n.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!i?n.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(j,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){n.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),N.started=!1},route:function(t,n){this.handlers.unshift({route:t,callback:n})},checkUrl:function(t){var n=this.getFragment();return n===this.fragment&&this.iframe&&(n=this.getFragment(this.getHash(this.iframe))),n===this.fragment?!1:(this.iframe&&this.navigate(n),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),e.any(this.handlers,function(n){return n.route.test(t)?(n.callback(t),!0):void 0})},navigate:function(t,n){if(!N.started)return!1;n&&n!==!0||(n={trigger:!!n});var e=this.root+(t=this.getFragment(t||""));if(t=t.replace(P,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==e&&(e=e.slice(0,-1)),this._hasPushState)this.history[n.replace?"replaceState":"pushState"]({},document.title,e);else{if(!this._wantsHashChange)return this.location.assign(e);this._updateHash(this.location,t,n.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(n.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,n.replace))}return n.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,n,e){if(e){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+n)}else t.hash="#"+n}}),n.history=new N;var L=function(t,n){var r,a=this;r=t&&e.has(t,"constructor")?t.constructor:function(){return a.apply(this,arguments)},e.extend(r,a,n);var i=function(){this.constructor=r};return i.prototype=a.prototype,r.prototype=new i,t&&e.extend(r.prototype,t),r.__super__=a.prototype,r};h.extend=p.extend=k.extend=M.extend=N.extend=L;var F=function(){throw new Error('A "url" property or function must be specified')},D=function(t,n){var e=n.error;n.error=function(r){e&&e(t,r,n),t.trigger("error",t,r,n)}};return n})},{underscore:5}],2:[function(t,n,e){/**
 * @license
 *
 * chroma.js - JavaScript library for color conversions
 * 
 * Copyright (c) 2011-2015, Gregor Aisch
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 * 
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */
(function(){var t,r,a,i,o,u,c,s,l,f,h,d,p,g,v,m,y,M,b,w,x,_,k,E,T,S,A,N,j,R,C,q,P,L,F,D,O,z,I,U,H,G,B,X,W,Q,$,V,Y,J,K,Z,tt,nt,et,rt,at,it,ot,ut,ct,st,lt,ft,ht,dt,pt,gt,vt,mt,yt,Mt,bt,wt,xt,_t,kt,Et=[].slice;bt=function(){var t,n,e,r,a;for(t={},a="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),r=0,n=a.length;n>r;r++)e=a[r],t["[object "+e+"]"]=e.toLowerCase();return function(n){var e;return e=Object.prototype.toString.call(n),t[e]||"object"}}(),B=function(t,n,e){return null==n&&(n=0),null==e&&(e=1),n>t&&(t=n),t>e&&(t=e),t},wt=function(t){return t.length>=3?[].slice.call(t):t[0]},M=function(t){var n;for(n in t)3>n?(t[n]<0&&(t[n]=0),t[n]>255&&(t[n]=255)):3===n&&(t[n]<0&&(t[n]=0),t[n]>1&&(t[n]=1));return t},a=Math.PI,gt=Math.round,x=Math.cos,S=Math.floor,Z=Math.pow,X=Math.log,mt=Math.sin,yt=Math.sqrt,h=Math.atan2,$=Math.max,f=Math.abs,o=2*a,i=a/3,y=function(){return arguments[0]instanceof t?arguments[0]:function(t,n,e){e.prototype=t.prototype;var r=new e,a=t.apply(r,n);return Object(a)===a?a:r}(t,arguments,function(){})},l=[],"undefined"!=typeof n&&null!==n&&null!=n.exports&&(n.exports=y),"function"==typeof define&&define.amd?define([],function(){return y}):(pt="undefined"!=typeof e&&null!==e?e:this,pt.chroma=y),y.version="1.0.1",s={},u=[],c=!1,t=function(){function t(){var t,n,e,r,a,i,o,l,f;for(i=this,n=[],l=0,r=arguments.length;r>l;l++)t=arguments[l],null!=t&&n.push(t);if(o=n[n.length-1],null!=s[o])i._rgb=M(s[o](wt(n.slice(0,-1))));else{for(c||(u=u.sort(function(t,n){return n.p-t.p}),c=!0),f=0,a=u.length;a>f&&(e=u[f],!(o=e.test.apply(e,n)));f++);o&&(i._rgb=M(s[o].apply(s,n)))}null==i._rgb&&console.warn("unknown format: "+n),null==i._rgb&&(i._rgb=[0,0,0]),3===i._rgb.length&&i._rgb.push(1)}return t.prototype.alpha=function(t){return arguments.length?(this._rgb[3]=t,this):this._rgb[3]},t.prototype.toString=function(){return this.name()},t}(),/**
  	ColorBrewer colors for chroma.js
  
  	Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The 
  	Pennsylvania State University.
  
  	Licensed under the Apache License, Version 2.0 (the "License"); 
  	you may not use this file except in compliance with the License.
  	You may obtain a copy of the License at	
  	http://www.apache.org/licenses/LICENSE-2.0
  
  	Unless required by applicable law or agreed to in writing, software distributed
  	under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
  	CONDITIONS OF ANY KIND, either express or implied. See the License for the
  	specific language governing permissions and limitations under the License.
  
      @preserve
   */
y.brewer=v={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},xt={indigo:"#4b0082",gold:"#ffd700",hotpink:"#ff69b4",firebrick:"#b22222",indianred:"#cd5c5c",yellow:"#ffff00",mistyrose:"#ffe4e1",darkolivegreen:"#556b2f",olive:"#808000",darkseagreen:"#8fbc8f",pink:"#ffc0cb",tomato:"#ff6347",lightcoral:"#f08080",orangered:"#ff4500",navajowhite:"#ffdead",lime:"#00ff00",palegreen:"#98fb98",darkslategrey:"#2f4f4f",greenyellow:"#adff2f",burlywood:"#deb887",seashell:"#fff5ee",mediumspringgreen:"#00fa9a",fuchsia:"#ff00ff",papayawhip:"#ffefd5",blanchedalmond:"#ffebcd",chartreuse:"#7fff00",dimgray:"#696969",black:"#000000",peachpuff:"#ffdab9",springgreen:"#00ff7f",aquamarine:"#7fffd4",white:"#ffffff",orange:"#ffa500",lightsalmon:"#ffa07a",darkslategray:"#2f4f4f",brown:"#a52a2a",ivory:"#fffff0",dodgerblue:"#1e90ff",peru:"#cd853f",lawngreen:"#7cfc00",chocolate:"#d2691e",crimson:"#dc143c",forestgreen:"#228b22",darkgrey:"#a9a9a9",lightseagreen:"#20b2aa",cyan:"#00ffff",mintcream:"#f5fffa",silver:"#c0c0c0",antiquewhite:"#faebd7",mediumorchid:"#ba55d3",skyblue:"#87ceeb",gray:"#808080",darkturquoise:"#00ced1",goldenrod:"#daa520",darkgreen:"#006400",floralwhite:"#fffaf0",darkviolet:"#9400d3",darkgray:"#a9a9a9",moccasin:"#ffe4b5",saddlebrown:"#8b4513",grey:"#808080",darkslateblue:"#483d8b",lightskyblue:"#87cefa",lightpink:"#ffb6c1",mediumvioletred:"#c71585",slategrey:"#708090",red:"#ff0000",deeppink:"#ff1493",limegreen:"#32cd32",darkmagenta:"#8b008b",palegoldenrod:"#eee8aa",plum:"#dda0dd",turquoise:"#40e0d0",lightgrey:"#d3d3d3",lightgoldenrodyellow:"#fafad2",darkgoldenrod:"#b8860b",lavender:"#e6e6fa",maroon:"#800000",yellowgreen:"#9acd32",sandybrown:"#f4a460",thistle:"#d8bfd8",violet:"#ee82ee",navy:"#000080",magenta:"#ff00ff",dimgrey:"#696969",tan:"#d2b48c",rosybrown:"#bc8f8f",olivedrab:"#6b8e23",blue:"#0000ff",lightblue:"#add8e6",ghostwhite:"#f8f8ff",honeydew:"#f0fff0",cornflowerblue:"#6495ed",slateblue:"#6a5acd",linen:"#faf0e6",darkblue:"#00008b",powderblue:"#b0e0e6",seagreen:"#2e8b57",darkkhaki:"#bdb76b",snow:"#fffafa",sienna:"#a0522d",mediumblue:"#0000cd",royalblue:"#4169e1",lightcyan:"#e0ffff",green:"#008000",mediumpurple:"#9370db",midnightblue:"#191970",cornsilk:"#fff8dc",paleturquoise:"#afeeee",bisque:"#ffe4c4",slategray:"#708090",darkcyan:"#008b8b",khaki:"#f0e68c",wheat:"#f5deb3",teal:"#008080",darkorchid:"#9932cc",deepskyblue:"#00bfff",salmon:"#fa8072",darkred:"#8b0000",steelblue:"#4682b4",palevioletred:"#db7093",lightslategray:"#778899",aliceblue:"#f0f8ff",lightslategrey:"#778899",lightgreen:"#90ee90",orchid:"#da70d6",gainsboro:"#dcdcdc",mediumseagreen:"#3cb371",lightgray:"#d3d3d3",mediumturquoise:"#48d1cc",lemonchiffon:"#fffacd",cadetblue:"#5f9ea0",lightyellow:"#ffffe0",lavenderblush:"#fff0f5",coral:"#ff7f50",purple:"#800080",aqua:"#00ffff",whitesmoke:"#f5f5f5",mediumslateblue:"#7b68ee",darkorange:"#ff8c00",mediumaquamarine:"#66cdaa",darksalmon:"#e9967a",beige:"#f5f5dc",blueviolet:"#8a2be2",azure:"#f0ffff",lightsteelblue:"#b0c4de",oldlace:"#fdf5e6",rebeccapurple:"#663399"},y.colors=w=xt,z=function(){var t,n,e,a,i,o,u,c,s,l,f;return o=wt(arguments),a=o[0],t=o[1],n=o[2],void 0!==a&&3===a.length&&(u=a,a=u[0],t=u[1],n=u[2]),void 0!==a&&3===a.length&&(c=a,a=c[0],t=c[1],n=c[2]),l=(a+16)/116,s=l+t/500,f=l-n/200,s=I(s)*r.X,l=I(l)*r.Y,f=I(f)*r.Z,i=kt(3.2404542*s-1.5371385*l-.4985314*f),e=kt(-.969266*s+1.8760108*l+.041556*f),n=kt(.0556434*s-.2040259*l+1.0572252*f),[B(i,0,255),B(e,0,255),B(n,0,255),1]},I=function(t){return t>.206893034?t*t*t:(t-4/29)/7.787037},kt=function(t){return gt(255*(.00304>=t?12.92*t:1.055*Z(t,1/2.4)-.055))},r={K:18,X:.95047,Y:1,Z:1.08883},ot=function(){var t,n,e,r,a,i,o,u;return r=wt(arguments),e=r[0],n=r[1],t=r[2],a=ft(e,n,t),i=a[0],o=a[1],u=a[2],[116*o-16,500*(i-o),200*(o-u)]},ht=function(t){return(t/=255)<=.04045?t/12.92:Z((t+.055)/1.055,2.4)},_t=function(t){return t>.008856?Z(t,1/3):7.787037*t+4/29},ft=function(){var t,n,e,a,i,o,u;return a=wt(arguments),e=a[0],n=a[1],t=a[2],e=ht(e),n=ht(n),t=ht(t),i=_t((.4124564*e+.3575761*n+.1804375*t)/r.X),o=_t((.2126729*e+.7151522*n+.072175*t)/r.Y),u=_t((.0193339*e+.119192*n+.9503041*t)/r.Z),[i,o,u]},y.lab=function(){return function(t,n,e){e.prototype=t.prototype;var r=new e,a=t.apply(r,n);return Object(a)===a?a:r}(t,Et.call(arguments).concat(["lab"]),function(){})},s.lab=z,t.prototype.lab=function(){return ot(this._rgb)},d=function(t){var n,e,r,a,i,o,u,c,s,l,f;return t=function(){var n,e,r;for(r=[],e=0,n=t.length;n>e;e++)a=t[e],r.push(y(a));return r}(),2===t.length?(s=function(){var n,e,r;for(r=[],e=0,n=t.length;n>e;e++)a=t[e],r.push(a.lab());return r}(),i=s[0],o=s[1],n=function(t){var n,e;return e=function(){var e,r;for(r=[],n=e=0;2>=e;n=++e)r.push(i[n]+t*(o[n]-i[n]));return r}(),y.lab.apply(y,e)}):3===t.length?(l=function(){var n,e,r;for(r=[],e=0,n=t.length;n>e;e++)a=t[e],r.push(a.lab());return r}(),i=l[0],o=l[1],u=l[2],n=function(t){var n,e;return e=function(){var e,r;for(r=[],n=e=0;2>=e;n=++e)r.push((1-t)*(1-t)*i[n]+2*(1-t)*t*o[n]+t*t*u[n]);return r}(),y.lab.apply(y,e)}):4===t.length?(f=function(){var n,e,r;for(r=[],e=0,n=t.length;n>e;e++)a=t[e],r.push(a.lab());return r}(),i=f[0],o=f[1],u=f[2],c=f[3],n=function(t){var n,e;return e=function(){var e,r;for(r=[],n=e=0;2>=e;n=++e)r.push((1-t)*(1-t)*(1-t)*i[n]+3*(1-t)*(1-t)*t*o[n]+3*(1-t)*t*t*u[n]+t*t*t*c[n]);return r}(),y.lab.apply(y,e)}):5===t.length&&(e=d(t.slice(0,3)),r=d(t.slice(2,5)),n=function(t){return.5>t?e(2*t):r(2*(t-.5))}),n},y.bezier=d,y.cubehelix=function(t,n,e,r,a){var i,u;return null==t&&(t=300),null==n&&(n=-1.5),null==e&&(e=1),null==r&&(r=1),null==a&&(a=[0,1]),u=a[1]-a[0],"array"===bt(e)?(i=e[1]-e[0],0===i&&(e=e[1])):i=0,function(c){var s,l,f,h,d,p,g,v,m;return s=o*((t+120)/360+n*c),g=Z(a[0]+u*c,r),p=0!==i?e[0]+c*i:e,l=p*g*(1-g)/2,h=x(s),m=mt(s),v=g+l*(-.14861*h+1.78277*m),d=g+l*(-.29227*h-.90649*m),f=g+l*(1.97294*h),y(M([255*v,255*d,255*f]))}},y.random=function(){var n,e,r,a;for(e="0123456789abcdef",n="#",r=a=0;6>a;r=++a)n+=e.charAt(S(16*Math.random()));return new t(n)},s.rgb=function(){var t,n,e,r;n=wt(arguments),e=[];for(t in n)r=n[t],e.push(r);return e},y.rgb=function(){return function(t,n,e){e.prototype=t.prototype;var r=new e,a=t.apply(r,n);return Object(a)===a?a:r}(t,Et.call(arguments).concat(["rgb"]),function(){})},t.prototype.rgb=function(){return this._rgb.slice(0,3)},t.prototype.rgba=function(){return this._rgb},u.push({p:15,test:function(t){var n;return n=wt(arguments),"array"===bt(n)&&3===n.length?"rgb":4===n.length&&"number"===bt(n[3])&&n[3]>=0&&n[3]<=1?"rgb":void 0}}),A=function(t){var n,e,r,a,i,o;if(t.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return(4===t.length||7===t.length)&&(t=t.substr(1)),3===t.length&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),o=parseInt(t,16),a=o>>16,r=o>>8&255,e=255&o,[a,r,e,1];if(t.match(/^#?([A-Fa-f0-9]{8})$/))return 9===t.length&&(t=t.substr(1)),o=parseInt(t,16),a=o>>24&255,r=o>>16&255,e=o>>8&255,n=gt((255&o)/255*100)/100,[a,r,e,n];if(null!=s.css&&(i=s.css(t)))return i;throw"unknown color: "+t},et=function(t,n){var e,r,a,i,o,u,c;return null==n&&(n="rgb"),o=t[0],a=t[1],r=t[2],e=t[3],c=o<<16|a<<8|r,u="000000"+c.toString(16),u=u.substr(u.length-6),i="0"+gt(255*e).toString(16),i=i.substr(i.length-2),"#"+function(){switch(n.toLowerCase()){case"rgba":return u+i;case"argb":return i+u;default:return u}}()},s.hex=function(t){return A(t)},y.hex=function(){return function(t,n,e){e.prototype=t.prototype;var r=new e,a=t.apply(r,n);return Object(a)===a?a:r}(t,Et.call(arguments).concat(["hex"]),function(){})},t.prototype.hex=function(t){return null==t&&(t="rgb"),et(this._rgb,t)},u.push({p:10,test:function(t){return 1===arguments.length&&"string"===bt(t)?"hex":void 0}}),R=function(){var t,n,e,r,a,i,o,u,c,s,l,f,h,d;if(c=wt(arguments),r=c[0],l=c[1],i=c[2],0===l)u=e=t=255*i;else{for(d=[0,0,0],n=[0,0,0],h=.5>i?i*(1+l):i+l-i*l,f=2*i-h,r/=360,d[0]=r+1/3,d[1]=r,d[2]=r-1/3,a=o=0;2>=o;a=++o)d[a]<0&&(d[a]+=1),d[a]>1&&(d[a]-=1),6*d[a]<1?n[a]=f+6*(h-f)*d[a]:2*d[a]<1?n[a]=h:3*d[a]<2?n[a]=f+(h-f)*(2/3-d[a])*6:n[a]=f;s=[gt(255*n[0]),gt(255*n[1]),gt(255*n[2])],u=s[0],e=s[1],t=s[2]}return 4===arguments.length?[u,e,t,arguments[3]]:[u,e,t]},at=function(t,n,e){var r,a,i,o,u;return void 0!==t&&t.length>=3&&(o=t,t=o[0],n=o[1],e=o[2]),t/=255,n/=255,e/=255,i=Math.min(t,n,e),$=Math.max(t,n,e),a=($+i)/2,$===i?(u=0,r=Number.NaN):u=.5>a?($-i)/($+i):($-i)/(2-$-i),t===$?r=(n-e)/($-i):n===$?r=2+(e-t)/($-i):e===$&&(r=4+(t-n)/($-i)),r*=60,0>r&&(r+=360),[r,u,a]},y.hsl=function(){return function(t,n,e){e.prototype=t.prototype;var r=new e,a=t.apply(r,n);return Object(a)===a?a:r}(t,Et.call(arguments).concat(["hsl"]),function(){})},s.hsl=R,t.prototype.hsl=function(){return at(this._rgb)},C=function(){var t,n,e,r,a,i,o,u,c,s,l,f,h,d,p,g,v,m;if(c=wt(arguments),r=c[0],g=c[1],m=c[2],m*=255,0===g)u=e=t=m;else switch(360===r&&(r=0),r>360&&(r-=360),0>r&&(r+=360),r/=60,a=S(r),n=r-a,i=m*(1-g),o=m*(1-g*n),v=m*(1-g*(1-n)),a){case 0:s=[m,v,i],u=s[0],e=s[1],t=s[2];break;case 1:l=[o,m,i],u=l[0],e=l[1],t=l[2];break;case 2:f=[i,m,v],u=f[0],e=f[1],t=f[2];break;case 3:h=[i,o,m],u=h[0],e=h[1],t=h[2];break;case 4:d=[v,i,m],u=d[0],e=d[1],t=d[2];break;case 5:p=[m,i,o],u=p[0],e=p[1],t=p[2]}return u=gt(u),e=gt(e),t=gt(t),[u,e,t]},it=function(){var t,n,e,r,a,i,o,u,c;return o=wt(arguments),i=o[0],e=o[1],t=o[2],a=Math.min(i,e,t),$=Math.max(i,e,t),n=$-a,c=$/255,0===$?(r=Number.NaN,u=0):(u=n/$,i===$&&(r=(e-t)/n),e===$&&(r=2+(t-i)/n),t===$&&(r=4+(i-e)/n),r*=60,0>r&&(r+=360)),[r,u,c]},y.hsv=function(){return function(t,n,e){e.prototype=t.prototype;var r=new e,a=t.apply(r,n);return Object(a)===a?a:r}(t,Et.call(arguments).concat(["hsv"]),function(){})},s.hsv=C,t.prototype.hsv=function(){return it(this._rgb)},J=function(t){var n,e,r;return"number"===bt(t)&&t>=0&&16777215>=t?(r=t>>16,e=t>>8&255,n=255&t,[r,e,n,1]):(console.warn("unknown num color: "+t),[0,0,0,1])},st=function(){var t,n,e,r;return r=wt(arguments),e=r[0],n=r[1],t=r[2],(e<<16)+(n<<8)+t},y.num=function(n){return new t(n,"num")},t.prototype.num=function(){return st(this._rgb)},s.num=J,u.push({p:10,test:function(t){return 1===arguments.length&&"number"===bt(t)&&t>=0&&16777215>=t?"num":void 0}}),_=function(t){var n,e,r,a,i,o,u,c;if(t=t.toLowerCase(),null!=y.colors&&y.colors[t])return A(y.colors[t]);if(i=t.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(u=i.slice(1,4),a=o=0;2>=o;a=++o)u[a]=+u[a];u[3]=1}else if(i=t.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(u=i.slice(1,5),a=c=0;3>=c;a=++c)u[a]=+u[a];else if(i=t.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(u=i.slice(1,4),a=n=0;2>=n;a=++n)u[a]=gt(2.55*u[a]);u[3]=1}else if(i=t.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(u=i.slice(1,5),a=e=0;2>=e;a=++e)u[a]=gt(2.55*u[a]);u[3]=+u[3]}else(i=t.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?(r=i.slice(1,4),r[1]*=.01,r[2]*=.01,u=R(r),u[3]=1):(i=t.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&(r=i.slice(1,4),r[1]*=.01,r[2]*=.01,u=R(r),u[3]=+i[4]);return u},nt=function(t){var n;return n=t[3]<1?"rgba":"rgb","rgb"===n?n+"("+t.slice(0,3).map(gt).join(",")+")":"rgba"===n?n+"("+t.slice(0,3).map(gt).join(",")+","+t[3]+")":void 0},dt=function(t){return gt(100*t)/100},j=function(t,n){var e;return e=1>n?"hsla":"hsl",t[0]=dt(t[0]||0),t[1]=dt(100*t[1])+"%",t[2]=dt(100*t[2])+"%","hsla"===e&&(t[3]=n),e+"("+t.join(",")+")"},s.css=function(t){return _(t)},y.css=function(){return function(t,n,e){e.prototype=t.prototype;var r=new e,a=t.apply(r,n);return Object(a)===a?a:r}(t,Et.call(arguments).concat(["css"]),function(){})},t.prototype.css=function(t){return null==t&&(t="rgb"),"rgb"===t.slice(0,3)?nt(this._rgb):"hsl"===t.slice(0,3)?j(this.hsl(),this.alpha()):void 0},s.named=function(t){return A(xt[t])},u.push({p:20,test:function(t){return 1===arguments.length&&null!=xt[t]?"named":void 0}}),t.prototype.name=function(t){var n,e;arguments.length&&(xt[t]&&(this._rgb=A(xt[t])),this._rgb[3]=1),n=this.hex();for(e in xt)if(n===xt[e])return e;return n},U=function(){var t,n,e,r;return r=wt(arguments),e=r[0],t=r[1],n=r[2],n=n*a/180,[e,x(n)*t,mt(n)*t]},H=function(){var t,n,e,r,a,i,o,u,c,s,l;return c=wt(arguments),o=c[0],r=c[1],i=c[2],s=U(o,r,i),t=s[0],n=s[1],e=s[2],l=z(t,n,e),u=l[0],a=l[1],e=l[2],[B(u,0,255),B(a,0,255),B(e,0,255)]},O=function(){var t,n,e,r,i,o;return o=wt(arguments),i=o[0],t=o[1],n=o[2],e=yt(t*t+n*n),r=(h(n,t)/a*180+360)%360,[i,e,r]},ut=function(){var t,n,e,r,a,i,o;return i=wt(arguments),a=i[0],e=i[1],n=i[2],o=ot(a,e,n),r=o[0],t=o[1],n=o[2],O(r,t,n)},y.lch=function(){var n;return n=wt(arguments),new t(n,"lch")},y.hcl=function(){var n;return n=wt(arguments),new t(n,"hcl")},s.lch=H,s.hcl=function(){var t,n,e,r;return r=wt(arguments),n=r[0],t=r[1],e=r[2],H([e,t,n])},t.prototype.lch=function(){return ut(this._rgb)},t.prototype.hcl=function(){return ut(this._rgb).reverse()},tt=function(t){var n,e,r,a,i,o,u,c,s;return null==t&&(t="rgb"),c=wt(arguments),u=c[0],a=c[1],n=c[2],u/=255,a/=255,n/=255,i=1-Math.max(u,Math.max(a,n)),r=1>i?1/(1-i):0,e=(1-u-i)*r,o=(1-a-i)*r,s=(1-n-i)*r,[e,o,s,i]},b=function(){var t,n,e,r,a,i,o,u;return o=wt(arguments),n=o[0],a=o[1],u=o[2],r=o[3],1===r?[0,0,0]:(i=n>=1?0:gt(255*(1-n)*(1-r)),e=a>=1?0:gt(255*(1-a)*(1-r)),t=u>=1?0:gt(255*(1-u)*(1-r)),[i,e,t])},s.cmyk=function(){var t,n,e,r,a;return r=wt(arguments),t=r[0],e=r[1],a=r[2],n=r[3],b(t,e,a,n)},y.cmyk=function(){return function(t,n,e){e.prototype=t.prototype;var r=new e,a=t.apply(r,n);return Object(a)===a?a:r}(t,Et.call(arguments).concat(["cmyk"]),function(){})},t.prototype.cmyk=function(){return tt(this._rgb)},s.gl=function(){var t,n,e,r,a;for(r=function(){var t,e;t=wt(arguments),e=[];for(n in t)a=t[n],e.push(a);return e}.apply(this,arguments),t=e=0;2>=e;t=++e)r[t]*=255;return r},y.gl=function(){return function(t,n,e){e.prototype=t.prototype;var r=new e,a=t.apply(r,n);return Object(a)===a?a:r}(t,Et.call(arguments).concat(["gl"]),function(){})},t.prototype.gl=function(){var t;return t=this._rgb,[t[0]/255,t[1]/255,t[2]/255,t[3]]},ct=function(t,n,e){var r;return r=wt(arguments),t=r[0],n=r[1],e=r[2],t=W(t),n=W(n),e=W(e),.2126*t+.7152*n+.0722*e},W=function(t){return t/=255,.03928>=t?t/12.92:Z((t+.055)/1.055,2.4)},l=[],q=function(t,n,e,r){var a,i,o,u;for(null==e&&(e=.5),null==r&&(r="rgb"),"object"!==bt(t)&&(t=y(t)),"object"!==bt(n)&&(n=y(n)),o=0,i=l.length;i>o;o++)if(a=l[o],r===a[0]){u=a[1](t,n,e,r);break}if(null==u)throw"color mode "+r+" is not supported";return u.alpha(t.alpha()+e*(n.alpha()-t.alpha())),u},y.interpolate=q,t.prototype.interpolate=function(t,n,e){return q(this,t,n,e)},y.mix=q,t.prototype.mix=t.prototype.interpolate,D=function(n,e,r,a){var i,o;return i=n._rgb,o=e._rgb,new t(i[0]+r*(o[0]-i[0]),i[1]+r*(o[1]-i[1]),i[2]+r*(o[2]-i[2]),a)},l.push(["rgb",D]),t.prototype.luminance=function(t,n){var e,r,a,i;return null==n&&(n="rgb"),arguments.length?(0===t?this._rgb=[0,0,0,this._rgb[3]]:1===t?this._rgb=[255,255,255,this._rgb[3]]:(r=1e-7,a=20,i=function(e,o){var u,c;return c=e.interpolate(o,.5,n),u=c.luminance(),Math.abs(t-u)<r||!a--?c:u>t?i(e,c):i(c,o)},e=ct(this._rgb),this._rgb=(e>t?i(y("black"),this):i(this,y("white"))).rgba()),this):ct(this._rgb)},Mt=function(t){var n,e,r,a;return a=t/100,66>a?(r=255,e=-155.25485562709179-.44596950469579133*(e=a-2)+104.49216199393888*X(e),n=20>a?0:-254.76935184120902+.8274096064007395*(n=a-10)+115.67994401066147*X(n)):(r=351.97690566805693+.114206453784165*(r=a-55)-40.25366309332127*X(r),e=325.4494125711974+.07943456536662342*(e=a-50)-28.0852963507957*X(e),n=255),M([r,e,n])},lt=function(){var t,n,e,r,a,i,o,u,c;for(o=wt(arguments),i=o[0],e=o[1],t=o[2],a=1e3,r=4e4,n=.4;r-a>n;)c=.5*(r+a),u=Mt(c),u[2]/u[0]>=t/i?r=c:a=c;return gt(c)},y.temperature=y.kelvin=function(){return function(t,n,e){e.prototype=t.prototype;var r=new e,a=t.apply(r,n);return Object(a)===a?a:r}(t,Et.call(arguments).concat(["temperature"]),function(){})},s.temperature=s.kelvin=s.K=Mt,t.prototype.temperature=function(){return lt(this._rgb)},t.prototype.kelvin=t.prototype.temperature,y.contrast=function(n,e){var r,a,i,o;return("string"===(i=bt(n))||"number"===i)&&(n=new t(n)),("string"===(o=bt(e))||"number"===o)&&(e=new t(e)),r=n.luminance(),a=e.luminance(),r>a?(r+.05)/(a+.05):(a+.05)/(r+.05)},t.prototype.darken=function(t){var n,e;return null==t&&(t=20),e=this,n=e.lch(),n[0]-=t,y.lch(n).alpha(e.alpha())},t.prototype.darker=t.prototype.darken,t.prototype.brighten=function(t){return null==t&&(t=20),this.darken(-t)},t.prototype.brighter=t.prototype.brighten,t.prototype.saturate=function(t){var n,e;return null==t&&(t=20),e=this,n=e.lch(),n[1]+=t,n[1]<0&&(n[1]=0),y.lch(n).alpha(e.alpha())},t.prototype.desaturate=function(t){return null==t&&(t=20),this.saturate(-t)},t.prototype.premultiply=function(){var t,n;return n=this.rgb(),t=this.alpha(),y(n[0]*t,n[1]*t,n[2]*t,t)},p=function(t,n,e){if(!p[e])throw"unknown blend mode "+e;return p[e](t,n)},g=function(t){return function(n,e){var r,a;return r=y(e).rgb(),a=y(n).rgb(),y(t(r,a),"rgb")}},T=function(t){return function(n,e){var r,a,i;for(i=[],r=a=0;3>=a;r=++a)i[r]=t(n[r],e[r]);return i}},Y=function(t,n){return t},V=function(t,n){return t*n/255},k=function(t,n){return t>n?n:t},G=function(t,n){return t>n?t:n},vt=function(t,n){return 255*(1-(1-t/255)*(1-n/255))},K=function(t,n){return 128>n?2*t*n/255:255*(1-2*(1-t/255)*(1-n/255))},m=function(t,n){return 255*(1-(1-n/255)/(t/255))},E=function(t,n){return 255===t?255:(t=255*(n/255)/(1-t/255),t>255?255:t)},p.normal=g(T(Y)),p.multiply=g(T(V)),p.screen=g(T(vt)),p.overlay=g(T(K)),p.darken=g(T(k)),p.lighten=g(T(G)),p.dodge=g(T(E)),p.burn=g(T(m)),y.blend=p,y.scale=function(t,n){var e,r,a,i,o,u,c,s,l,f,h,d,p,g,v,m,M,b,w,x,_;return s="rgb",l=y("#ccc"),p=0,o=!1,i=[0,1],r=[],h=!1,d=[],c=0,u=1,a=!1,f=0,e={},w=function(t,n){var e,a,i,o,u,c,s;if(null==t&&(t=["#ddd","#222"]),null!=t&&"string"===bt(t)&&null!=(null!=(o=y.brewer)?o[t]:void 0)&&(t=y.brewer[t]),"array"===bt(t)){for(t=t.slice(0),e=i=0,u=t.length-1;u>=0?u>=i:i>=u;e=u>=0?++i:--i)a=t[e],"string"===bt(a)&&(t[e]=y(a));if(null!=n)d=n;else for(d=[],e=s=0,c=t.length-1;c>=0?c>=s:s>=c;e=c>=0?++s:--s)d.push(e/(t.length-1))}return b(),r=t},x=function(t){return null==t&&(t=[]),i=t,c=t[0],u=t[t.length-1],b(),f=2===t.length?0:t.length-1},m=function(t){var n,e;if(null!=i){for(e=i.length-1,n=0;e>n&&t>=i[n];)n++;return n-1}return 0},_=function(t){return t},g=function(t){var n,e,r,a,o;return o=t,i.length>2&&(a=i.length-1,n=m(t),r=i[0]+(i[1]-i[0])*(0+.5*p),e=i[a-1]+(i[a]-i[a-1])*(1-.5*p),o=c+(i[n]+.5*(i[n+1]-i[n])-r)/(e-r)*(u-c)),o},M=function(t,n){var a,o,h,p,g,v,M,b,w;if(null==n&&(n=!1),isNaN(t))return l;if(n?w=t:i.length>2?(a=m(t),w=a/(f-1)):(w=h=c!==u?(t-c)/(u-c):0,w=h=(t-c)/(u-c),w=Math.min(1,Math.max(0,w))),n||(w=_(w)),g=Math.floor(1e4*w),e[g])o=e[g];else{if("array"===bt(r))for(p=v=0,b=d.length-1;b>=0?b>=v:v>=b;p=b>=0?++v:--v){if(M=d[p],M>=w){o=r[p];break}if(w>=M&&p===d.length-1){o=r[p];break}if(w>M&&w<d[p+1]){w=(w-M)/(d[p+1]-M),o=y.interpolate(r[p],r[p+1],w,s);break}}else"function"===bt(r)&&(o=r(w));e[g]=o}return o},b=function(){return e={}},w(t,n),v=function(t){var n;return n=M(t),h&&n[h]?n[h]():n},v.domain=function(t,n,e,r){var a;return null==e&&(e="e"),arguments.length?(null!=n&&(a=y.analyze(t,r),t=0===n?[a.min,a.max]:y.limits(a,e,n)),x(t),v):i},v.mode=function(t){return arguments.length?(s=t,b(),v):s},v.range=function(t,n){return w(t,n),v},v.out=function(t){return h=t,v},v.spread=function(t){return arguments.length?(p=t,v):p},v.correctLightness=function(t){return arguments.length?(a=t,b(),_=a?function(t){var n,e,r,a,i,o,u,c,s;for(n=M(0,!0).lab()[0],e=M(1,!0).lab()[0],u=n>e,r=M(t,!0).lab()[0],i=n+(e-n)*t,a=r-i,c=0,s=1,o=20;Math.abs(a)>.01&&o-->0;)!function(){return u&&(a*=-1),0>a?(c=t,t+=.5*(s-t)):(s=t,t+=.5*(c-t)),r=M(t,!0).lab()[0],a=r-i}();return t}:function(t){return t},v):a},v.colors=function(){var n,e,r,a,o,u,c,s,l;if(a=0,o="hex",1===arguments.length&&("string"===bt(arguments[0])?o=arguments[0]:a=arguments[0]),2===arguments.length&&(a=arguments[0],o=arguments[1]),a)return function(){c=[];for(var t=0;a>=0?a>t:t>a;a>=0?t++:t--)c.push(t);return c}.apply(this).map(function(t){return v(t/(a-1))[o]()});if(t=[],s=[],i.length>2)for(e=l=1,u=i.length;u>=1?u>l:l>u;e=u>=1?++l:--l)s.push(.5*(i[e-1]+i[e]));else s=i;for(n=0,r=s.length;r>n;n++)e=s[n],t.push(v(e)[o]());return t},v},null==y.scales&&(y.scales={}),y.scales.cool=function(){return y.scale([y.hsl(180,1,.9),y.hsl(250,.7,.4)])},y.scales.hot=function(){return y.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},y.analyze=function(t,n,e){var r,a,i,o,u,c,s;if(u={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==e&&(e=function(){return!0}),r=function(t){null==t||isNaN(t)||(u.values.push(t),u.sum+=t,t<u.min&&(u.min=t),t>u.max&&(u.max=t),u.count+=1)},s=function(t,a){return e(t,a)?r(null!=n&&"function"===bt(n)?n(t):null!=n&&"string"===bt(n)||"number"===bt(n)?t[n]:t):void 0},"array"===bt(t))for(o=0,i=t.length;i>o;o++)c=t[o],s(c);else for(a in t)c=t[a],s(c,a);return u.domain=[u.min,u.max],u.limits=function(t,n){return y.limits(u,t,n)},u},y.limits=function(t,n,e){var r,a,i,o,u,c,s,l,h,d,p,g,v,m,M,b,w,x,_,k,E,T,A,N,j,R,C,q,P,L,F,D,O,z,I,U,H,G,B,W,Q,V,Y,J,K,tt,nt,et,rt,at,it,ot,ut,ct,st;if(null==n&&(n="equal"),null==e&&(e=7),"array"===bt(t)&&(t=y.analyze(t)),j=t.min,$=t.max,it=t.sum,ct=t.values.sort(function(t,n){return t-n}),A=[],"c"===n.substr(0,1)&&(A.push(j),A.push($)),"e"===n.substr(0,1)){for(A.push(j),k=F=1,I=e-1;I>=1?I>=F:F>=I;k=I>=1?++F:--F)A.push(j+k/e*($-j));A.push($)}else if("l"===n.substr(0,1)){if(0>=j)throw"Logarithmic scales are only possible for values > 0";for(R=Math.LOG10E*X(j),N=Math.LOG10E*X($),A.push(j),k=st=1,U=e-1;U>=1?U>=st:st>=U;k=U>=1?++st:--st)A.push(Z(10,R+k/e*(N-R)));A.push($)}else if("q"===n.substr(0,1)){for(A.push(j),k=r=1,V=e-1;V>=1?V>=r:r>=V;k=V>=1?++r:--r)D=ct.length*k/e,O=S(D),O===D?A.push(ct[O]):(z=D-O,A.push(ct[O]*z+ct[O+1]*(1-z)));A.push($)}else if("k"===n.substr(0,1)){for(q=ct.length,m=new Array(q),x=new Array(e),at=!0,P=0,b=null,b=[],b.push(j),k=a=1,Y=e-1;Y>=1?Y>=a:a>=Y;k=Y>=1?++a:--a)b.push(j+k/e*($-j));for(b.push($);at;){for(E=i=0,J=e-1;J>=0?J>=i:i>=J;E=J>=0?++i:--i)x[E]=0;for(k=o=0,K=q-1;K>=0?K>=o:o>=K;k=K>=0?++o:--o){for(ut=ct[k],C=Number.MAX_VALUE,E=u=0,tt=e-1;tt>=0?tt>=u:u>=tt;E=tt>=0?++u:--u)_=f(b[E]-ut),C>_&&(C=_,M=E);x[M]++,m[k]=M}for(L=new Array(e),E=c=0,nt=e-1;nt>=0?nt>=c:c>=nt;E=nt>=0?++c:--c)L[E]=null;for(k=s=0,et=q-1;et>=0?et>=s:s>=et;k=et>=0?++s:--s)w=m[k],null===L[w]?L[w]=ct[k]:L[w]+=ct[k];for(E=l=0,rt=e-1;rt>=0?rt>=l:l>=rt;E=rt>=0?++l:--l)L[E]*=1/x[E];for(at=!1,E=h=0,H=e-1;H>=0?H>=h:h>=H;E=H>=0?++h:--h)if(L[E]!==b[k]){at=!0;break}b=L,P++,P>200&&(at=!1)}for(T={},E=d=0,G=e-1;G>=0?G>=d:d>=G;E=G>=0?++d:--d)T[E]=[];for(k=p=0,B=q-1;B>=0?B>=p:p>=B;k=B>=0?++p:--p)w=m[k],T[w].push(ct[k]);for(ot=[],E=g=0,W=e-1;W>=0?W>=g:g>=W;E=W>=0?++g:--g)ot.push(T[E][0]),ot.push(T[E][T[E].length-1]);for(ot=ot.sort(function(t,n){return t-n}),A.push(ot[0]),k=v=1,Q=ot.length-1;Q>=v;k=v+=2)isNaN(ot[k])||A.push(ot[k])}return A},N=function(t,n,e){var r,a,u,c;return c=wt(arguments),t=c[0],n=c[1],e=c[2],t/=360,1/3>t?(r=(1-n)/3,u=(1+n*x(o*t)/x(i-o*t))/3,a=1-(r+u)):2/3>t?(t-=1/3,u=(1-n)/3,a=(1+n*x(o*t)/x(i-o*t))/3,r=1-(u+a)):(t-=2/3,a=(1-n)/3,r=(1+n*x(o*t)/x(i-o*t))/3,u=1-(a+r)),u=B(e*u*3),a=B(e*a*3),r=B(e*r*3),[255*u,255*a,255*r]},rt=function(){var t,n,e,r,a,i,u,c;return u=wt(arguments),i=u[0],n=u[1],t=u[2],o=2*Math.PI,i/=255,n/=255,t/=255,a=Math.min(i,n,t),r=(i+n+t)/3,c=1-a/r,0===c?e=0:(e=(i-n+(i-t))/2,e/=Math.sqrt((i-n)*(i-n)+(i-t)*(n-t)),e=Math.acos(e),t>n&&(e=o-e),e/=o),[360*e,c,r]},y.hsi=function(){return function(t,n,e){e.prototype=t.prototype;var r=new e,a=t.apply(r,n);return Object(a)===a?a:r}(t,Et.call(arguments).concat(["hsi"]),function(){})},s.hsi=N,t.prototype.hsi=function(){return rt(this._rgb)},P=function(n,e,r,a){var i,o,u,c,s,l,f,h,d,p,g,v,m;return"hsl"===a?(v=n.hsl(),m=e.hsl()):"hsv"===a?(v=n.hsv(),m=e.hsv()):"hsi"===a?(v=n.hsi(),m=e.hsi()):"lch"===a&&(v=n.lch(),m=e.lch()),"h"===a.substr(0,1)?(u=v[0],p=v[1],l=v[2],c=m[0],g=m[1],f=m[2]):(l=v[0],p=v[1],u=v[2],f=m[0],g=m[1],c=m[2]),isNaN(u)||isNaN(c)?isNaN(u)?isNaN(c)?o=Number.NaN:(o=c,1!==l&&0!==l||"hsv"===a||(d=g)):(o=u,1!==f&&0!==f||"hsv"===a||(d=p)):(i=c>u&&c-u>180?c-(u+360):u>c&&u-c>180?c+360-u:c-u,o=u+r*i),null==d&&(d=p+r*(g-p)),s=l+r*(f-l),h="h"===a.substr(0,1)?new t(o,d,s,a):new t(s,d,o,a)},l=l.concat(function(){var t,n,e,r;for(e=["hsv","hsl","hsi","lch"],r=[],n=0,t=e.length;t>n;n++)Q=e[n],r.push([Q,P]);return r}()),F=function(t,n,e,r){var a,i;return a=t.num(),i=n.num(),y.num(a+(i-a)*e,"num")},l.push(["num",F]),L=function(n,e,r,a){var i,o,u;return o=n.lab(),u=e.lab(),i=new t(o[0]+r*(u[0]-o[0]),o[1]+r*(u[1]-o[1]),o[2]+r*(u[2]-o[2]),a)},l.push(["lab",L])}).call(this)},{}],3:[function(t,n,e){!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function e(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function r(t,n){return n>t?-1:t>n?1:t>=n?0:NaN}function a(t){return null===t?NaN:+t}function i(t){return!isNaN(t)}function o(t){return{left:function(n,e,r,a){for(arguments.length<3&&(r=0),arguments.length<4&&(a=n.length);a>r;){var i=r+a>>>1;t(n[i],e)<0?r=i+1:a=i}return r},right:function(n,e,r,a){for(arguments.length<3&&(r=0),arguments.length<4&&(a=n.length);a>r;){var i=r+a>>>1;t(n[i],e)>0?a=i:r=i+1}return r}}}function u(t){return t.length}function c(t){for(var n=1;t*n%1;)n*=10;return n}function s(t,n){for(var e in n)Object.defineProperty(t.prototype,e,{value:n[e],enumerable:!1})}function l(){this._=Object.create(null)}function f(t){return(t+="")===po||t[0]===go?go+t:t}function h(t){return(t+="")[0]===go?t.slice(1):t}function d(t){return f(t)in this._}function p(t){return(t=f(t))in this._&&delete this._[t]}function g(){var t=[];for(var n in this._)t.push(h(n));return t}function v(){var t=0;for(var n in this._)++t;return t}function m(){for(var t in this._)return!1;return!0}function y(){this._=Object.create(null)}function M(t){return t}function b(t,n,e){return function(){var r=e.apply(n,arguments);return r===n?t:r}}function w(t,n){if(n in t)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var e=0,r=vo.length;r>e;++e){var a=vo[e]+n;if(a in t)return a}}function x(){}function _(){}function k(t){function n(){for(var n,r=e,a=-1,i=r.length;++a<i;)(n=r[a].on)&&n.apply(this,arguments);return t}var e=[],r=new l;return n.on=function(n,a){var i,o=r.get(n);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,i=e.indexOf(o)).concat(e.slice(i+1)),r.remove(n)),a&&e.push(r.set(n,{on:a})),t)},n}function E(){eo.event.preventDefault()}function T(){for(var t,n=eo.event;t=n.sourceEvent;)n=t;return n}function S(t){for(var n=new _,e=0,r=arguments.length;++e<r;)n[arguments[e]]=k(n);return n.of=function(e,r){return function(a){try{var i=a.sourceEvent=eo.event;a.target=t,eo.event=a,n[a.type].apply(e,r)}finally{eo.event=i}}},n}function A(t){return yo(t,xo),t}function N(t){return"function"==typeof t?t:function(){return Mo(t,this)}}function j(t){return"function"==typeof t?t:function(){return bo(t,this)}}function R(t,n){function e(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function a(){this.setAttribute(t,n)}function i(){this.setAttributeNS(t.space,t.local,n)}function o(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}function u(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}return t=eo.ns.qualify(t),null==n?t.local?r:e:"function"==typeof n?t.local?u:o:t.local?i:a}function C(t){return t.trim().replace(/\s+/g," ")}function q(t){return new RegExp("(?:^|\\s+)"+eo.requote(t)+"(?:\\s+|$)","g")}function P(t){return(t+"").trim().split(/^|\s+/)}function L(t,n){function e(){for(var e=-1;++e<a;)t[e](this,n)}function r(){for(var e=-1,r=n.apply(this,arguments);++e<a;)t[e](this,r)}t=P(t).map(F);var a=t.length;return"function"==typeof n?r:e}function F(t){var n=q(t);return function(e,r){if(a=e.classList)return r?a.add(t):a.remove(t);var a=e.getAttribute("class")||"";r?(n.lastIndex=0,n.test(a)||e.setAttribute("class",C(a+" "+t))):e.setAttribute("class",C(a.replace(n," ")))}}function D(t,n,e){function r(){this.style.removeProperty(t)}function a(){
this.style.setProperty(t,n,e)}function i(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}return null==n?r:"function"==typeof n?i:a}function O(t,n){function e(){delete this[t]}function r(){this[t]=n}function a(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}return null==n?e:"function"==typeof n?a:r}function z(t){function n(){var n=this.ownerDocument,e=this.namespaceURI;return e?n.createElementNS(e,t):n.createElement(t)}function e(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=eo.ns.qualify(t)).local?e:n}function I(){var t=this.parentNode;t&&t.removeChild(this)}function U(t){return{__data__:t}}function H(t){return function(){return wo(this,t)}}function G(t){return arguments.length||(t=r),function(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}}function B(t,n){for(var e=0,r=t.length;r>e;e++)for(var a,i=t[e],o=0,u=i.length;u>o;o++)(a=i[o])&&n(a,o,e);return t}function X(t){return yo(t,ko),t}function W(t){var n,e;return function(r,a,i){var o,u=t[i].update,c=u.length;for(i!=e&&(e=i,n=0),a>=n&&(n=a+1);!(o=u[n])&&++n<c;);return o}}function Q(t,n,e){function r(){var n=this[o];n&&(this.removeEventListener(t,n,n.$),delete this[o])}function a(){var a=c(n,ao(arguments));r.call(this),this.addEventListener(t,this[o]=a,a.$=e),a._=n}function i(){var n,e=new RegExp("^__on([^.]+)"+eo.requote(t)+"$");for(var r in this)if(n=r.match(e)){var a=this[r];this.removeEventListener(n[1],a,a.$),delete this[r]}}var o="__on"+t,u=t.indexOf("."),c=$;u>0&&(t=t.slice(0,u));var s=Eo.get(t);return s&&(t=s,c=V),u?n?a:r:n?x:i}function $(t,n){return function(e){var r=eo.event;eo.event=e,n[0]=this.__data__;try{t.apply(this,n)}finally{eo.event=r}}}function V(t,n){var e=$(t,n);return function(t){var n=this,r=t.relatedTarget;r&&(r===n||8&r.compareDocumentPosition(n))||e.call(n,t)}}function Y(n){var r=".dragsuppress-"+ ++So,a="click"+r,i=eo.select(e(n)).on("touchmove"+r,E).on("dragstart"+r,E).on("selectstart"+r,E);if(null==To&&(To="onselectstart"in n?!1:w(n.style,"userSelect")),To){var o=t(n).style,u=o[To];o[To]="none"}return function(t){if(i.on(r,null),To&&(o[To]=u),t){var n=function(){i.on(a,null)};i.on(a,function(){E(),n()},!0),setTimeout(n,0)}}}function J(t,n){n.changedTouches&&(n=n.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var a=r.createSVGPoint();if(0>Ao){var i=e(t);if(i.scrollX||i.scrollY){r=eo.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();Ao=!(o.f||o.e),r.remove()}}return Ao?(a.x=n.pageX,a.y=n.pageY):(a.x=n.clientX,a.y=n.clientY),a=a.matrixTransform(t.getScreenCTM().inverse()),[a.x,a.y]}var u=t.getBoundingClientRect();return[n.clientX-u.left-t.clientLeft,n.clientY-u.top-t.clientTop]}function K(){return eo.event.changedTouches[0].identifier}function Z(t){return t>0?1:0>t?-1:0}function tt(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}function nt(t){return t>1?0:-1>t?Ro:Math.acos(t)}function et(t){return t>1?Po:-1>t?-Po:Math.asin(t)}function rt(t){return((t=Math.exp(t))-1/t)/2}function at(t){return((t=Math.exp(t))+1/t)/2}function it(t){return((t=Math.exp(2*t))-1)/(t+1)}function ot(t){return(t=Math.sin(t/2))*t}function ut(){}function ct(t,n,e){return this instanceof ct?(this.h=+t,this.s=+n,void(this.l=+e)):arguments.length<2?t instanceof ct?new ct(t.h,t.s,t.l):xt(""+t,_t,ct):new ct(t,n,e)}function st(t,n,e){function r(t){return t>360?t-=360:0>t&&(t+=360),60>t?i+(o-i)*t/60:180>t?o:240>t?i+(o-i)*(240-t)/60:i}function a(t){return Math.round(255*r(t))}var i,o;return t=isNaN(t)?0:(t%=360)<0?t+360:t,n=isNaN(n)?0:0>n?0:n>1?1:n,e=0>e?0:e>1?1:e,o=.5>=e?e*(1+n):e+n-e*n,i=2*e-o,new yt(a(t+120),a(t),a(t-120))}function lt(t,n,e){return this instanceof lt?(this.h=+t,this.c=+n,void(this.l=+e)):arguments.length<2?t instanceof lt?new lt(t.h,t.c,t.l):t instanceof ht?pt(t.l,t.a,t.b):pt((t=kt((t=eo.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new lt(t,n,e)}function ft(t,n,e){return isNaN(t)&&(t=0),isNaN(n)&&(n=0),new ht(e,Math.cos(t*=Lo)*n,Math.sin(t)*n)}function ht(t,n,e){return this instanceof ht?(this.l=+t,this.a=+n,void(this.b=+e)):arguments.length<2?t instanceof ht?new ht(t.l,t.a,t.b):t instanceof lt?ft(t.h,t.c,t.l):kt((t=yt(t)).r,t.g,t.b):new ht(t,n,e)}function dt(t,n,e){var r=(t+16)/116,a=r+n/500,i=r-e/200;return a=gt(a)*Wo,r=gt(r)*Qo,i=gt(i)*$o,new yt(mt(3.2404542*a-1.5371385*r-.4985314*i),mt(-.969266*a+1.8760108*r+.041556*i),mt(.0556434*a-.2040259*r+1.0572252*i))}function pt(t,n,e){return t>0?new lt(Math.atan2(e,n)*Fo,Math.sqrt(n*n+e*e),t):new lt(NaN,NaN,t)}function gt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function vt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function mt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function yt(t,n,e){return this instanceof yt?(this.r=~~t,this.g=~~n,void(this.b=~~e)):arguments.length<2?t instanceof yt?new yt(t.r,t.g,t.b):xt(""+t,yt,st):new yt(t,n,e)}function Mt(t){return new yt(t>>16,t>>8&255,255&t)}function bt(t){return Mt(t)+""}function wt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function xt(t,n,e){t=t.toLowerCase();var r,a,i,o=0,u=0,c=0;if(r=/([a-z]+)\((.*)\)/.exec(t))switch(a=r[2].split(","),r[1]){case"hsl":return e(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100);case"rgb":return n(Tt(a[0]),Tt(a[1]),Tt(a[2]))}return(i=Jo.get(t))?n(i.r,i.g,i.b):(null==t||"#"!==t.charAt(0)||isNaN(i=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&i)>>4,o=o>>4|o,u=240&i,u=u>>4|u,c=15&i,c=c<<4|c):7===t.length&&(o=(16711680&i)>>16,u=(65280&i)>>8,c=255&i)),n(o,u,c))}function _t(t,n,e){var r,a,i=Math.min(t/=255,n/=255,e/=255),o=Math.max(t,n,e),u=o-i,c=(o+i)/2;return u?(a=.5>c?u/(o+i):u/(2-o-i),r=t==o?(n-e)/u+(e>n?6:0):n==o?(e-t)/u+2:(t-n)/u+4,r*=60):(r=NaN,a=c>0&&1>c?0:r),new ct(r,a,c)}function kt(t,n,e){t=Et(t),n=Et(n),e=Et(e);var r=vt((.4124564*t+.3575761*n+.1804375*e)/Wo),a=vt((.2126729*t+.7151522*n+.072175*e)/Qo),i=vt((.0193339*t+.119192*n+.9503041*e)/$o);return ht(116*a-16,500*(r-a),200*(a-i))}function Et(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Tt(t){var n=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*n):n}function St(t){return"function"==typeof t?t:function(){return t}}function At(t){return function(n,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Nt(n,e,t,r)}}function Nt(t,n,e,r){function a(){var t,n=c.status;if(!n&&Rt(c)||n>=200&&300>n||304===n){try{t=e.call(i,c)}catch(t){return void o.error.call(i,t)}o.load.call(i,t)}else o.error.call(i,c)}var i={},o=eo.dispatch("beforesend","progress","load","error"),u={},c=new XMLHttpRequest,s=null;return!this.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(t)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=a:c.onreadystatechange=function(){c.readyState>3&&a()},c.onprogress=function(t){var n=eo.event;eo.event=t;try{o.progress.call(i,c)}finally{eo.event=n}},i.header=function(t,n){return t=(t+"").toLowerCase(),arguments.length<2?u[t]:(null==n?delete u[t]:u[t]=n+"",i)},i.mimeType=function(t){return arguments.length?(n=null==t?null:t+"",i):n},i.responseType=function(t){return arguments.length?(s=t,i):s},i.response=function(t){return e=t,i},["get","post"].forEach(function(t){i[t]=function(){return i.send.apply(i,[t].concat(ao(arguments)))}}),i.send=function(e,r,a){if(2===arguments.length&&"function"==typeof r&&(a=r,r=null),c.open(e,t,!0),null==n||"accept"in u||(u.accept=n+",*/*"),c.setRequestHeader)for(var l in u)c.setRequestHeader(l,u[l]);return null!=n&&c.overrideMimeType&&c.overrideMimeType(n),null!=s&&(c.responseType=s),null!=a&&i.on("error",a).on("load",function(t){a(null,t)}),o.beforesend.call(i,c),c.send(null==r?null:r),i},i.abort=function(){return c.abort(),i},eo.rebind(i,o,"on"),null==r?i:i.get(jt(r))}function jt(t){return 1===t.length?function(n,e){t(null==n?e:null)}:t}function Rt(t){var n=t.responseType;return n&&"text"!==n?t.response:t.responseText}function Ct(){var t=qt(),n=Pt()-t;n>24?(isFinite(n)&&(clearTimeout(nu),nu=setTimeout(Ct,n)),tu=0):(tu=1,ru(Ct))}function qt(){var t=Date.now();for(eu=Ko;eu;)t>=eu.t&&(eu.f=eu.c(t-eu.t)),eu=eu.n;return t}function Pt(){for(var t,n=Ko,e=1/0;n;)n.f?n=t?t.n=n.n:Ko=n.n:(n.t<e&&(e=n.t),n=(t=n).n);return Zo=t,e}function Lt(t,n){return n-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Ft(t,n){var e=Math.pow(10,3*ho(8-n));return{scale:n>8?function(t){return t/e}:function(t){return t*e},symbol:t}}function Dt(t){var n=t.decimal,e=t.thousands,r=t.grouping,a=t.currency,i=r&&e?function(t,n){for(var a=t.length,i=[],o=0,u=r[0],c=0;a>0&&u>0&&(c+u+1>n&&(u=Math.max(1,n-c)),i.push(t.substring(a-=u,a+u)),!((c+=u+1)>n));)u=r[o=(o+1)%r.length];return i.reverse().join(e)}:M;return function(t){var e=iu.exec(t),r=e[1]||" ",o=e[2]||">",u=e[3]||"-",c=e[4]||"",s=e[5],l=+e[6],f=e[7],h=e[8],d=e[9],p=1,g="",v="",m=!1,y=!0;switch(h&&(h=+h.substring(1)),(s||"0"===r&&"="===o)&&(s=r="0",o="="),d){case"n":f=!0,d="g";break;case"%":p=100,v="%",d="f";break;case"p":p=100,v="%",d="r";break;case"b":case"o":case"x":case"X":"#"===c&&(g="0"+d.toLowerCase());case"c":y=!1;case"d":m=!0,h=0;break;case"s":p=-1,d="r"}"$"===c&&(g=a[0],v=a[1]),"r"!=d||h||(d="g"),null!=h&&("g"==d?h=Math.max(1,Math.min(21,h)):("e"==d||"f"==d)&&(h=Math.max(0,Math.min(20,h)))),d=ou.get(d)||Ot;var M=s&&f;return function(t){var e=v;if(m&&t%1)return"";var a=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===u?"":u;if(0>p){var c=eo.formatPrefix(t,h);t=c.scale(t),e=c.symbol+v}else t*=p;t=d(t,h);var b,w,x=t.lastIndexOf(".");if(0>x){var _=y?t.lastIndexOf("e"):-1;0>_?(b=t,w=""):(b=t.substring(0,_),w=t.substring(_))}else b=t.substring(0,x),w=n+t.substring(x+1);!s&&f&&(b=i(b,1/0));var k=g.length+b.length+w.length+(M?0:a.length),E=l>k?new Array(k=l-k+1).join(r):"";return M&&(b=i(E+b,E.length?l-w.length:1/0)),a+=g,t=b+w,("<"===o?a+t+E:">"===o?E+a+t:"^"===o?E.substring(0,k>>=1)+a+t+E.substring(k):a+(M?t:E+t))+e}}}function Ot(t){return t+""}function zt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function It(t,n,e){function r(n){var e=t(n),r=i(e,1);return r-n>n-e?e:r}function a(e){return n(e=t(new cu(e-1)),1),e}function i(t,e){return n(t=new cu(+t),e),t}function o(t,r,i){var o=a(t),u=[];if(i>1)for(;r>o;)e(o)%i||u.push(new Date(+o)),n(o,1);else for(;r>o;)u.push(new Date(+o)),n(o,1);return u}function u(t,n,e){try{cu=zt;var r=new zt;return r._=t,o(r,n,e)}finally{cu=Date}}t.floor=t,t.round=r,t.ceil=a,t.offset=i,t.range=o;var c=t.utc=Ut(t);return c.floor=c,c.round=Ut(r),c.ceil=Ut(a),c.offset=Ut(i),c.range=u,t}function Ut(t){return function(n,e){try{cu=zt;var r=new zt;return r._=n,t(r,e)._}finally{cu=Date}}}function Ht(t){function n(t){function n(n){for(var e,a,i,o=[],u=-1,c=0;++u<r;)37===t.charCodeAt(u)&&(o.push(t.slice(c,u)),null!=(a=lu[e=t.charAt(++u)])&&(e=t.charAt(++u)),(i=A[e])&&(e=i(n,null==a?"e"===e?" ":"0":a)),o.push(e),c=u+1);return o.push(t.slice(c,u)),o.join("")}var r=t.length;return n.parse=function(n){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},a=e(r,t,n,0);if(a!=n.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&cu!==zt,o=new(i?zt:cu);return"j"in r?o.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),i?o._:o},n.toString=function(){return t},n}function e(t,n,e,r){for(var a,i,o,u=0,c=n.length,s=e.length;c>u;){if(r>=s)return-1;if(a=n.charCodeAt(u++),37===a){if(o=n.charAt(u++),i=N[o in lu?n.charAt(u++):o],!i||(r=i(t,e,r))<0)return-1}else if(a!=e.charCodeAt(r++))return-1}return r}function r(t,n,e){x.lastIndex=0;var r=x.exec(n.slice(e));return r?(t.w=_.get(r[0].toLowerCase()),e+r[0].length):-1}function a(t,n,e){b.lastIndex=0;var r=b.exec(n.slice(e));return r?(t.w=w.get(r[0].toLowerCase()),e+r[0].length):-1}function i(t,n,e){T.lastIndex=0;var r=T.exec(n.slice(e));return r?(t.m=S.get(r[0].toLowerCase()),e+r[0].length):-1}function o(t,n,e){k.lastIndex=0;var r=k.exec(n.slice(e));return r?(t.m=E.get(r[0].toLowerCase()),e+r[0].length):-1}function u(t,n,r){return e(t,A.c.toString(),n,r)}function c(t,n,r){return e(t,A.x.toString(),n,r)}function s(t,n,r){return e(t,A.X.toString(),n,r)}function l(t,n,e){var r=M.get(n.slice(e,e+=2).toLowerCase());return null==r?-1:(t.p=r,e)}var f=t.dateTime,h=t.date,d=t.time,p=t.periods,g=t.days,v=t.shortDays,m=t.months,y=t.shortMonths;n.utc=function(t){function e(t){try{cu=zt;var n=new cu;return n._=t,r(n)}finally{cu=Date}}var r=n(t);return e.parse=function(t){try{cu=zt;var n=r.parse(t);return n&&n._}finally{cu=Date}},e.toString=r.toString,e},n.multi=n.utc.multi=sn;var M=eo.map(),b=Bt(g),w=Xt(g),x=Bt(v),_=Xt(v),k=Bt(m),E=Xt(m),T=Bt(y),S=Xt(y);p.forEach(function(t,n){M.set(t.toLowerCase(),n)});var A={a:function(t){return v[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return m[t.getMonth()]},c:n(f),d:function(t,n){return Gt(t.getDate(),n,2)},e:function(t,n){return Gt(t.getDate(),n,2)},H:function(t,n){return Gt(t.getHours(),n,2)},I:function(t,n){return Gt(t.getHours()%12||12,n,2)},j:function(t,n){return Gt(1+uu.dayOfYear(t),n,3)},L:function(t,n){return Gt(t.getMilliseconds(),n,3)},m:function(t,n){return Gt(t.getMonth()+1,n,2)},M:function(t,n){return Gt(t.getMinutes(),n,2)},p:function(t){return p[+(t.getHours()>=12)]},S:function(t,n){return Gt(t.getSeconds(),n,2)},U:function(t,n){return Gt(uu.sundayOfYear(t),n,2)},w:function(t){return t.getDay()},W:function(t,n){return Gt(uu.mondayOfYear(t),n,2)},x:n(h),X:n(d),y:function(t,n){return Gt(t.getFullYear()%100,n,2)},Y:function(t,n){return Gt(t.getFullYear()%1e4,n,4)},Z:un,"%":function(){return"%"}},N={a:r,A:a,b:i,B:o,c:u,d:tn,e:tn,H:en,I:en,j:nn,L:on,m:Zt,M:rn,p:l,S:an,U:Qt,w:Wt,W:$t,x:c,X:s,y:Yt,Y:Vt,Z:Jt,"%":cn};return n}function Gt(t,n,e){var r=0>t?"-":"",a=(r?-t:t)+"",i=a.length;return r+(e>i?new Array(e-i+1).join(n)+a:a)}function Bt(t){return new RegExp("^(?:"+t.map(eo.requote).join("|")+")","i")}function Xt(t){for(var n=new l,e=-1,r=t.length;++e<r;)n.set(t[e].toLowerCase(),e);return n}function Wt(t,n,e){fu.lastIndex=0;var r=fu.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function Qt(t,n,e){fu.lastIndex=0;var r=fu.exec(n.slice(e));return r?(t.U=+r[0],e+r[0].length):-1}function $t(t,n,e){fu.lastIndex=0;var r=fu.exec(n.slice(e));return r?(t.W=+r[0],e+r[0].length):-1}function Vt(t,n,e){fu.lastIndex=0;var r=fu.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function Yt(t,n,e){fu.lastIndex=0;var r=fu.exec(n.slice(e,e+2));return r?(t.y=Kt(+r[0]),e+r[0].length):-1}function Jt(t,n,e){return/^[+-]\d{4}$/.test(n=n.slice(e,e+5))?(t.Z=-n,e+5):-1}function Kt(t){return t+(t>68?1900:2e3)}function Zt(t,n,e){fu.lastIndex=0;var r=fu.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function tn(t,n,e){fu.lastIndex=0;var r=fu.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function nn(t,n,e){fu.lastIndex=0;var r=fu.exec(n.slice(e,e+3));return r?(t.j=+r[0],e+r[0].length):-1}function en(t,n,e){fu.lastIndex=0;var r=fu.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function rn(t,n,e){fu.lastIndex=0;var r=fu.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function an(t,n,e){fu.lastIndex=0;var r=fu.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function on(t,n,e){fu.lastIndex=0;var r=fu.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function un(t){var n=t.getTimezoneOffset(),e=n>0?"-":"+",r=ho(n)/60|0,a=ho(n)%60;return e+Gt(r,"0",2)+Gt(a,"0",2)}function cn(t,n,e){hu.lastIndex=0;var r=hu.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function sn(t){for(var n=t.length,e=-1;++e<n;)t[e][0]=this(t[e][0]);return function(n){for(var e=0,r=t[e];!r[1](n);)r=t[++e];return r[0](n)}}function ln(){}function fn(t,n,e){var r=e.s=t+n,a=r-t,i=r-a;e.t=t-i+(n-a)}function hn(t,n){t&&vu.hasOwnProperty(t.type)&&vu[t.type](t,n)}function dn(t,n,e){var r,a=-1,i=t.length-e;for(n.lineStart();++a<i;)r=t[a],n.point(r[0],r[1],r[2]);n.lineEnd()}function pn(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)dn(t[e],n,1);n.polygonEnd()}function gn(){function t(t,n){t*=Lo,n=n*Lo/2+Ro/4;var e=t-r,o=e>=0?1:-1,u=o*e,c=Math.cos(n),s=Math.sin(n),l=i*s,f=a*c+l*Math.cos(u),h=l*o*Math.sin(u);yu.add(Math.atan2(h,f)),r=t,a=c,i=s}var n,e,r,a,i;Mu.point=function(o,u){Mu.point=t,r=(n=o)*Lo,a=Math.cos(u=(e=u)*Lo/2+Ro/4),i=Math.sin(u)},Mu.lineEnd=function(){t(n,e)}}function vn(t){var n=t[0],e=t[1],r=Math.cos(e);return[r*Math.cos(n),r*Math.sin(n),Math.sin(e)]}function mn(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function yn(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Mn(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function bn(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function wn(t){var n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function xn(t){return[Math.atan2(t[1],t[0]),et(t[2])]}function _n(t,n){return ho(t[0]-n[0])<No&&ho(t[1]-n[1])<No}function kn(t,n){t*=Lo;var e=Math.cos(n*=Lo);En(e*Math.cos(t),e*Math.sin(t),Math.sin(n))}function En(t,n,e){++bu,xu+=(t-xu)/bu,_u+=(n-_u)/bu,ku+=(e-ku)/bu}function Tn(){function t(t,a){t*=Lo;var i=Math.cos(a*=Lo),o=i*Math.cos(t),u=i*Math.sin(t),c=Math.sin(a),s=Math.atan2(Math.sqrt((s=e*c-r*u)*s+(s=r*o-n*c)*s+(s=n*u-e*o)*s),n*o+e*u+r*c);wu+=s,Eu+=s*(n+(n=o)),Tu+=s*(e+(e=u)),Su+=s*(r+(r=c)),En(n,e,r)}var n,e,r;Ru.point=function(a,i){a*=Lo;var o=Math.cos(i*=Lo);n=o*Math.cos(a),e=o*Math.sin(a),r=Math.sin(i),Ru.point=t,En(n,e,r)}}function Sn(){Ru.point=kn}function An(){function t(t,n){t*=Lo;var e=Math.cos(n*=Lo),o=e*Math.cos(t),u=e*Math.sin(t),c=Math.sin(n),s=a*c-i*u,l=i*o-r*c,f=r*u-a*o,h=Math.sqrt(s*s+l*l+f*f),d=r*o+a*u+i*c,p=h&&-nt(d)/h,g=Math.atan2(h,d);Au+=p*s,Nu+=p*l,ju+=p*f,wu+=g,Eu+=g*(r+(r=o)),Tu+=g*(a+(a=u)),Su+=g*(i+(i=c)),En(r,a,i)}var n,e,r,a,i;Ru.point=function(o,u){n=o,e=u,Ru.point=t,o*=Lo;var c=Math.cos(u*=Lo);r=c*Math.cos(o),a=c*Math.sin(o),i=Math.sin(u),En(r,a,i)},Ru.lineEnd=function(){t(n,e),Ru.lineEnd=Sn,Ru.point=kn}}function Nn(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return e=n.invert(e,r),e&&t.invert(e[0],e[1])}),e}function jn(){return!0}function Rn(t,n,e,r,a){var i=[],o=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e=t[0],r=t[n];if(_n(e,r)){a.lineStart();for(var u=0;n>u;++u)a.point((e=t[u])[0],e[1]);return void a.lineEnd()}var c=new qn(e,t,null,!0),s=new qn(e,null,c,!1);c.o=s,i.push(c),o.push(s),c=new qn(r,t,null,!1),s=new qn(r,null,c,!0),c.o=s,i.push(c),o.push(s)}}),o.sort(n),Cn(i),Cn(o),i.length){for(var u=0,c=e,s=o.length;s>u;++u)o[u].e=c=!c;for(var l,f,h=i[0];;){for(var d=h,p=!0;d.v;)if((d=d.n)===h)return;l=d.z,a.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(var u=0,s=l.length;s>u;++u)a.point((f=l[u])[0],f[1]);else r(d.x,d.n.x,1,a);d=d.n}else{if(p){l=d.p.z;for(var u=l.length-1;u>=0;--u)a.point((f=l[u])[0],f[1])}else r(d.x,d.p.x,-1,a);d=d.p}d=d.o,l=d.z,p=!p}while(!d.v);a.lineEnd()}}}function Cn(t){if(n=t.length){for(var n,e,r=0,a=t[0];++r<n;)a.n=e=t[r],e.p=a,a=e;a.n=e=t[0],e.p=a}}function qn(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Pn(t,n,e,r){return function(a,i){function o(n,e){var r=a(n,e);t(n=r[0],e=r[1])&&i.point(n,e)}function u(t,n){var e=a(t,n);v.point(e[0],e[1])}function c(){y.point=u,v.lineStart()}function s(){y.point=o,v.lineEnd()}function l(t,n){g.push([t,n]);var e=a(t,n);b.point(e[0],e[1])}function f(){b.lineStart(),g=[]}function h(){l(g[0][0],g[0][1]),b.lineEnd();var t,n=b.clean(),e=M.buffer(),r=e.length;if(g.pop(),p.push(g),g=null,r)if(1&n){t=e[0];var a,r=t.length-1,o=-1;if(r>0){for(w||(i.polygonStart(),w=!0),i.lineStart();++o<r;)i.point((a=t[o])[0],a[1]);i.lineEnd()}}else r>1&&2&n&&e.push(e.pop().concat(e.shift())),d.push(e.filter(Ln))}var d,p,g,v=n(i),m=a.invert(r[0],r[1]),y={point:o,lineStart:c,lineEnd:s,polygonStart:function(){y.point=l,y.lineStart=f,y.lineEnd=h,d=[],p=[]},polygonEnd:function(){y.point=o,y.lineStart=c,y.lineEnd=s,d=eo.merge(d);var t=Un(m,p);d.length?(w||(i.polygonStart(),w=!0),Rn(d,Dn,t,e,i)):t&&(w||(i.polygonStart(),w=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),w&&(i.polygonEnd(),w=!1),d=p=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}},M=Fn(),b=n(M),w=!1;return y}}function Ln(t){return t.length>1}function Fn(){var t,n=[];return{lineStart:function(){n.push(t=[])},point:function(n,e){t.push([n,e])},lineEnd:x,buffer:function(){var e=n;return n=[],t=null,e},rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))}}}function Dn(t,n){return((t=t.x)[0]<0?t[1]-Po-No:Po-t[1])-((n=n.x)[0]<0?n[1]-Po-No:Po-n[1])}function On(t){var n,e=NaN,r=NaN,a=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(i,o){var u=i>0?Ro:-Ro,c=ho(i-e);ho(c-Ro)<No?(t.point(e,r=(r+o)/2>0?Po:-Po),t.point(a,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(i,r),n=0):a!==u&&c>=Ro&&(ho(e-a)<No&&(e-=a*No),ho(i-u)<No&&(i-=u*No),r=zn(e,r,i,o),t.point(a,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=i,r=o),a=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}function zn(t,n,e,r){var a,i,o=Math.sin(t-e);return ho(o)>No?Math.atan((Math.sin(n)*(i=Math.cos(r))*Math.sin(e)-Math.sin(r)*(a=Math.cos(n))*Math.sin(t))/(a*i*o)):(n+r)/2}function In(t,n,e,r){var a;if(null==t)a=e*Po,r.point(-Ro,a),r.point(0,a),r.point(Ro,a),r.point(Ro,0),r.point(Ro,-a),r.point(0,-a),r.point(-Ro,-a),r.point(-Ro,0),r.point(-Ro,a);else if(ho(t[0]-n[0])>No){var i=t[0]<n[0]?Ro:-Ro;a=e*i/2,r.point(-i,a),r.point(0,a),r.point(i,a)}else r.point(n[0],n[1])}function Un(t,n){var e=t[0],r=t[1],a=[Math.sin(e),-Math.cos(e),0],i=0,o=0;yu.reset();for(var u=0,c=n.length;c>u;++u){var s=n[u],l=s.length;if(l)for(var f=s[0],h=f[0],d=f[1]/2+Ro/4,p=Math.sin(d),g=Math.cos(d),v=1;;){v===l&&(v=0),t=s[v];var m=t[0],y=t[1]/2+Ro/4,M=Math.sin(y),b=Math.cos(y),w=m-h,x=w>=0?1:-1,_=x*w,k=_>Ro,E=p*M;if(yu.add(Math.atan2(E*x*Math.sin(_),g*b+E*Math.cos(_))),i+=k?w+x*Co:w,k^h>=e^m>=e){var T=yn(vn(f),vn(t));wn(T);var S=yn(a,T);wn(S);var A=(k^w>=0?-1:1)*et(S[2]);(r>A||r===A&&(T[0]||T[1]))&&(o+=k^w>=0?1:-1)}if(!v++)break;h=m,p=M,g=b,f=t}}return(-No>i||No>i&&0>yu)^1&o}function Hn(t){function n(t,n){return Math.cos(t)*Math.cos(n)>i}function e(t){var e,i,c,s,l;return{lineStart:function(){s=c=!1,l=1},point:function(f,h){var d,p=[f,h],g=n(f,h),v=o?g?0:a(f,h):g?a(f+(0>f?Ro:-Ro),h):0;if(!e&&(s=c=g)&&t.lineStart(),g!==c&&(d=r(e,p),(_n(e,d)||_n(p,d))&&(p[0]+=No,p[1]+=No,g=n(p[0],p[1]))),g!==c)l=0,g?(t.lineStart(),d=r(p,e),t.point(d[0],d[1])):(d=r(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(u&&e&&o^g){var m;v&i||!(m=r(p,e,!0))||(l=0,o?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||e&&_n(e,p)||t.point(p[0],p[1]),e=p,c=g,i=v},lineEnd:function(){c&&t.lineEnd(),e=null},clean:function(){return l|(s&&c)<<1}}}function r(t,n,e){var r=vn(t),a=vn(n),o=[1,0,0],u=yn(r,a),c=mn(u,u),s=u[0],l=c-s*s;if(!l)return!e&&t;var f=i*c/l,h=-i*s/l,d=yn(o,u),p=bn(o,f),g=bn(u,h);Mn(p,g);var v=d,m=mn(p,v),y=mn(v,v),M=m*m-y*(mn(p,p)-1);if(!(0>M)){var b=Math.sqrt(M),w=bn(v,(-m-b)/y);if(Mn(w,p),w=xn(w),!e)return w;var x,_=t[0],k=n[0],E=t[1],T=n[1];_>k&&(x=_,_=k,k=x);var S=k-_,A=ho(S-Ro)<No,N=A||No>S;if(!A&&E>T&&(x=E,E=T,T=x),N?A?E+T>0^w[1]<(ho(w[0]-_)<No?E:T):E<=w[1]&&w[1]<=T:S>Ro^(_<=w[0]&&w[0]<=k)){var j=bn(v,(-m+b)/y);return Mn(j,p),[w,xn(j)]}}}function a(n,e){var r=o?t:Ro-t,a=0;return-r>n?a|=1:n>r&&(a|=2),-r>e?a|=4:e>r&&(a|=8),a}var i=Math.cos(t),o=i>0,u=ho(i)>No,c=ge(t,6*Lo);return Pn(n,e,c,o?[0,-t]:[-Ro,t-Ro])}function Gn(t,n,e,r){return function(a){var i,o=a.a,u=a.b,c=o.x,s=o.y,l=u.x,f=u.y,h=0,d=1,p=l-c,g=f-s;if(i=t-c,p||!(i>0)){if(i/=p,0>p){if(h>i)return;d>i&&(d=i)}else if(p>0){if(i>d)return;i>h&&(h=i)}if(i=e-c,p||!(0>i)){if(i/=p,0>p){if(i>d)return;i>h&&(h=i)}else if(p>0){if(h>i)return;d>i&&(d=i)}if(i=n-s,g||!(i>0)){if(i/=g,0>g){if(h>i)return;d>i&&(d=i)}else if(g>0){if(i>d)return;i>h&&(h=i)}if(i=r-s,g||!(0>i)){if(i/=g,0>g){if(i>d)return;i>h&&(h=i)}else if(g>0){if(h>i)return;d>i&&(d=i)}return h>0&&(a.a={x:c+h*p,y:s+h*g}),1>d&&(a.b={x:c+d*p,y:s+d*g}),a}}}}}}function Bn(t,n,e,r){function a(r,a){return ho(r[0]-t)<No?a>0?0:3:ho(r[0]-e)<No?a>0?2:1:ho(r[1]-n)<No?a>0?1:0:a>0?3:2}function i(t,n){return o(t.x,n.x)}function o(t,n){var e=a(t,1),r=a(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(u){function c(t){for(var n=0,e=v.length,r=t[1],a=0;e>a;++a)for(var i,o=1,u=v[a],c=u.length,s=u[0];c>o;++o)i=u[o],s[1]<=r?i[1]>r&&tt(s,i,t)>0&&++n:i[1]<=r&&tt(s,i,t)<0&&--n,s=i;return 0!==n}function s(i,u,c,s){var l=0,f=0;if(null==i||(l=a(i,c))!==(f=a(u,c))||o(i,u)<0^c>0)do s.point(0===l||3===l?t:e,l>1?r:n);while((l=(l+c+4)%4)!==f);else s.point(u[0],u[1])}function l(a,i){return a>=t&&e>=a&&i>=n&&r>=i}function f(t,n){l(t,n)&&u.point(t,n)}function h(){N.point=p,v&&v.push(m=[]),k=!0,_=!1,w=x=NaN}function d(){g&&(p(y,M),b&&_&&S.rejoin(),g.push(S.buffer())),N.point=f,_&&u.lineEnd()}function p(t,n){t=Math.max(-qu,Math.min(qu,t)),n=Math.max(-qu,Math.min(qu,n));var e=l(t,n);if(v&&m.push([t,n]),k)y=t,M=n,b=e,k=!1,e&&(u.lineStart(),u.point(t,n));else if(e&&_)u.point(t,n);else{var r={a:{x:w,y:x},b:{x:t,y:n}};A(r)?(_||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),e||u.lineEnd(),E=!1):e&&(u.lineStart(),u.point(t,n),E=!1)}w=t,x=n,_=e}var g,v,m,y,M,b,w,x,_,k,E,T=u,S=Fn(),A=Gn(t,n,e,r),N={point:f,lineStart:h,lineEnd:d,polygonStart:function(){u=S,g=[],v=[],E=!0},polygonEnd:function(){u=T,g=eo.merge(g);var n=c([t,r]),e=E&&n,a=g.length;(e||a)&&(u.polygonStart(),e&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),a&&Rn(g,i,n,s,u),u.polygonEnd()),g=v=m=null}};return N}}function Xn(t){var n=0,e=Ro/3,r=ue(t),a=r(n,e);return a.parallels=function(t){return arguments.length?r(n=t[0]*Ro/180,e=t[1]*Ro/180):[n/Ro*180,e/Ro*180]},a}function Wn(t,n){function e(t,n){var e=Math.sqrt(i-2*a*Math.sin(n))/a;return[e*Math.sin(t*=a),o-e*Math.cos(t)]}var r=Math.sin(t),a=(r+Math.sin(n))/2,i=1+r*(2*a-r),o=Math.sqrt(i)/a;return e.invert=function(t,n){var e=o-n;return[Math.atan2(t,e)/a,et((i-(t*t+e*e)*a*a)/(2*a))]},e}function Qn(){function t(t,n){Lu+=a*t-r*n,r=t,a=n}var n,e,r,a;Iu.point=function(i,o){Iu.point=t,n=r=i,e=a=o},Iu.lineEnd=function(){t(n,e)}}function $n(t,n){Fu>t&&(Fu=t),t>Ou&&(Ou=t),Du>n&&(Du=n),n>zu&&(zu=n)}function Vn(){function t(t,n){o.push("M",t,",",n,i)}function n(t,n){o.push("M",t,",",n),u.point=e}function e(t,n){o.push("L",t,",",n)}function r(){u.point=t}function a(){o.push("Z")}var i=Yn(4.5),o=[],u={point:t,lineStart:function(){u.point=n},lineEnd:r,polygonStart:function(){u.lineEnd=a},polygonEnd:function(){u.lineEnd=r,u.point=t},pointRadius:function(t){return i=Yn(t),u},result:function(){if(o.length){var t=o.join("");return o=[],t}}};return u}function Yn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Jn(t,n){xu+=t,_u+=n,++ku}function Kn(){function t(t,r){var a=t-n,i=r-e,o=Math.sqrt(a*a+i*i);Eu+=o*(n+t)/2,Tu+=o*(e+r)/2,Su+=o,Jn(n=t,e=r)}var n,e;Hu.point=function(r,a){Hu.point=t,Jn(n=r,e=a)}}function Zn(){Hu.point=Jn}function te(){function t(t,n){var e=t-r,i=n-a,o=Math.sqrt(e*e+i*i);Eu+=o*(r+t)/2,Tu+=o*(a+n)/2,Su+=o,o=a*t-r*n,Au+=o*(r+t),Nu+=o*(a+n),ju+=3*o,Jn(r=t,a=n)}var n,e,r,a;Hu.point=function(i,o){Hu.point=t,Jn(n=r=i,e=a=o)},Hu.lineEnd=function(){t(n,e)}}function ne(t){function n(n,e){t.moveTo(n+o,e),t.arc(n,e,o,0,Co)}function e(n,e){t.moveTo(n,e),u.point=r}function r(n,e){t.lineTo(n,e)}function a(){u.point=n}function i(){t.closePath()}var o=4.5,u={point:n,lineStart:function(){u.point=e},lineEnd:a,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=a,u.point=n},pointRadius:function(t){return o=t,u},result:x};return u}function ee(t){function n(t){return(u?r:e)(t)}function e(n){return ie(n,function(e,r){e=t(e,r),n.point(e[0],e[1])})}function r(n){function e(e,r){e=t(e,r),n.point(e[0],e[1])}function r(){M=NaN,k.point=i,n.lineStart()}function i(e,r){var i=vn([e,r]),o=t(e,r);a(M,b,y,w,x,_,M=o[0],b=o[1],y=e,w=i[0],x=i[1],_=i[2],u,n),n.point(M,b)}function o(){k.point=e,n.lineEnd()}function c(){r(),k.point=s,k.lineEnd=l}function s(t,n){i(f=t,h=n),d=M,p=b,g=w,v=x,m=_,k.point=i}function l(){a(M,b,y,w,x,_,d,p,f,g,v,m,u,n),k.lineEnd=o,o()}var f,h,d,p,g,v,m,y,M,b,w,x,_,k={point:e,lineStart:r,lineEnd:o,polygonStart:function(){n.polygonStart(),k.lineStart=c},polygonEnd:function(){n.polygonEnd(),k.lineStart=r}};return k}function a(n,e,r,u,c,s,l,f,h,d,p,g,v,m){var y=l-n,M=f-e,b=y*y+M*M;if(b>4*i&&v--){var w=u+d,x=c+p,_=s+g,k=Math.sqrt(w*w+x*x+_*_),E=Math.asin(_/=k),T=ho(ho(_)-1)<No||ho(r-h)<No?(r+h)/2:Math.atan2(x,w),S=t(T,E),A=S[0],N=S[1],j=A-n,R=N-e,C=M*j-y*R;(C*C/b>i||ho((y*j+M*R)/b-.5)>.3||o>u*d+c*p+s*g)&&(a(n,e,r,u,c,s,A,N,T,w/=k,x/=k,_,v,m),m.point(A,N),a(A,N,T,w,x,_,l,f,h,d,p,g,v,m))}}var i=.5,o=Math.cos(30*Lo),u=16;return n.precision=function(t){return arguments.length?(u=(i=t*t)>0&&16,n):Math.sqrt(i)},n}function re(t){var n=ee(function(n,e){return t([n*Fo,e*Fo])});return function(t){return ce(n(t))}}function ae(t){this.stream=t}function ie(t,n){return{point:n,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function oe(t){return ue(function(){return t})()}function ue(t){function n(t){return t=u(t[0]*Lo,t[1]*Lo),[t[0]*h+c,s-t[1]*h]}function e(t){return t=u.invert((t[0]-c)/h,(s-t[1])/h),t&&[t[0]*Fo,t[1]*Fo]}function r(){u=Nn(o=fe(m,y,b),i);var t=i(g,v);return c=d-t[0]*h,s=p+t[1]*h,a()}function a(){return l&&(l.valid=!1,l=null),n}var i,o,u,c,s,l,f=ee(function(t,n){return t=i(t,n),[t[0]*h+c,s-t[1]*h]}),h=150,d=480,p=250,g=0,v=0,m=0,y=0,b=0,w=Cu,x=M,_=null,k=null;return n.stream=function(t){return l&&(l.valid=!1),l=ce(w(o,f(x(t)))),l.valid=!0,l},n.clipAngle=function(t){return arguments.length?(w=null==t?(_=t,Cu):Hn((_=+t)*Lo),a()):_},n.clipExtent=function(t){return arguments.length?(k=t,x=t?Bn(t[0][0],t[0][1],t[1][0],t[1][1]):M,a()):k},n.scale=function(t){return arguments.length?(h=+t,r()):h},n.translate=function(t){return arguments.length?(d=+t[0],p=+t[1],r()):[d,p]},n.center=function(t){return arguments.length?(g=t[0]%360*Lo,v=t[1]%360*Lo,r()):[g*Fo,v*Fo]},n.rotate=function(t){return arguments.length?(m=t[0]%360*Lo,y=t[1]%360*Lo,b=t.length>2?t[2]%360*Lo:0,r()):[m*Fo,y*Fo,b*Fo]},eo.rebind(n,f,"precision"),function(){return i=t.apply(this,arguments),n.invert=i.invert&&e,r()}}function ce(t){return ie(t,function(n,e){t.point(n*Lo,e*Lo)})}function se(t,n){return[t,n]}function le(t,n){return[t>Ro?t-Co:-Ro>t?t+Co:t,n]}function fe(t,n,e){return t?n||e?Nn(de(t),pe(n,e)):de(t):n||e?pe(n,e):le}function he(t){return function(n,e){return n+=t,[n>Ro?n-Co:-Ro>n?n+Co:n,e]}}function de(t){var n=he(t);return n.invert=he(-t),n}function pe(t,n){function e(t,n){var e=Math.cos(n),u=Math.cos(t)*e,c=Math.sin(t)*e,s=Math.sin(n),l=s*r+u*a;return[Math.atan2(c*i-l*o,u*r-s*a),et(l*i+c*o)]}var r=Math.cos(t),a=Math.sin(t),i=Math.cos(n),o=Math.sin(n);return e.invert=function(t,n){var e=Math.cos(n),u=Math.cos(t)*e,c=Math.sin(t)*e,s=Math.sin(n),l=s*i-c*o;return[Math.atan2(c*i+s*o,u*r+l*a),et(l*r-u*a)]},e}function ge(t,n){var e=Math.cos(t),r=Math.sin(t);return function(a,i,o,u){var c=o*n;null!=a?(a=ve(e,a),i=ve(e,i),(o>0?i>a:a>i)&&(a+=o*Co)):(a=t+o*Co,i=t-.5*c);for(var s,l=a;o>0?l>i:i>l;l-=c)u.point((s=xn([e,-r*Math.cos(l),-r*Math.sin(l)]))[0],s[1])}}function ve(t,n){var e=vn(n);e[0]-=t,wn(e);var r=nt(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-No)%(2*Math.PI)}function me(t,n,e){var r=eo.range(t,n-No,e).concat(n);return function(t){return r.map(function(n){return[t,n]})}}function ye(t,n,e){var r=eo.range(t,n-No,e).concat(n);return function(t){return r.map(function(n){return[n,t]})}}function Me(t){return t.source}function be(t){return t.target}function we(t,n,e,r){
var a=Math.cos(n),i=Math.sin(n),o=Math.cos(r),u=Math.sin(r),c=a*Math.cos(t),s=a*Math.sin(t),l=o*Math.cos(e),f=o*Math.sin(e),h=2*Math.asin(Math.sqrt(ot(r-n)+a*o*ot(e-t))),d=1/Math.sin(h),p=h?function(t){var n=Math.sin(t*=h)*d,e=Math.sin(h-t)*d,r=e*c+n*l,a=e*s+n*f,o=e*i+n*u;return[Math.atan2(a,r)*Fo,Math.atan2(o,Math.sqrt(r*r+a*a))*Fo]}:function(){return[t*Fo,n*Fo]};return p.distance=h,p}function xe(){function t(t,a){var i=Math.sin(a*=Lo),o=Math.cos(a),u=ho((t*=Lo)-n),c=Math.cos(u);Gu+=Math.atan2(Math.sqrt((u=o*Math.sin(u))*u+(u=r*i-e*o*c)*u),e*i+r*o*c),n=t,e=i,r=o}var n,e,r;Bu.point=function(a,i){n=a*Lo,e=Math.sin(i*=Lo),r=Math.cos(i),Bu.point=t},Bu.lineEnd=function(){Bu.point=Bu.lineEnd=x}}function _e(t,n){function e(n,e){var r=Math.cos(n),a=Math.cos(e),i=t(r*a);return[i*a*Math.sin(n),i*Math.sin(e)]}return e.invert=function(t,e){var r=Math.sqrt(t*t+e*e),a=n(r),i=Math.sin(a),o=Math.cos(a);return[Math.atan2(t*i,r*o),Math.asin(r&&e*i/r)]},e}function ke(t,n){function e(t,n){o>0?-Po+No>n&&(n=-Po+No):n>Po-No&&(n=Po-No);var e=o/Math.pow(a(n),i);return[e*Math.sin(i*t),o-e*Math.cos(i*t)]}var r=Math.cos(t),a=function(t){return Math.tan(Ro/4+t/2)},i=t===n?Math.sin(t):Math.log(r/Math.cos(n))/Math.log(a(n)/a(t)),o=r*Math.pow(a(t),i)/i;return i?(e.invert=function(t,n){var e=o-n,r=Z(i)*Math.sqrt(t*t+e*e);return[Math.atan2(t,e)/i,2*Math.atan(Math.pow(o/r,1/i))-Po]},e):Te}function Ee(t,n){function e(t,n){var e=i-n;return[e*Math.sin(a*t),i-e*Math.cos(a*t)]}var r=Math.cos(t),a=t===n?Math.sin(t):(r-Math.cos(n))/(n-t),i=r/a+t;return ho(a)<No?se:(e.invert=function(t,n){var e=i-n;return[Math.atan2(t,e)/a,i-Z(a)*Math.sqrt(t*t+e*e)]},e)}function Te(t,n){return[t,Math.log(Math.tan(Ro/4+n/2))]}function Se(t){var n,e=oe(t),r=e.scale,a=e.translate,i=e.clipExtent;return e.scale=function(){var t=r.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.translate=function(){var t=a.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.clipExtent=function(t){var o=i.apply(e,arguments);if(o===e){if(n=null==t){var u=Ro*r(),c=a();i([[c[0]-u,c[1]-u],[c[0]+u,c[1]+u]])}}else n&&(o=null);return o},e.clipExtent(null)}function Ae(t,n){return[Math.log(Math.tan(Ro/4+n/2)),-t]}function Ne(t){return t[0]}function je(t){return t[1]}function Re(t){for(var n=t.length,e=[0,1],r=2,a=2;n>a;a++){for(;r>1&&tt(t[e[r-2]],t[e[r-1]],t[a])<=0;)--r;e[r++]=a}return e.slice(0,r)}function Ce(t,n){return t[0]-n[0]||t[1]-n[1]}function qe(t,n,e){return(e[0]-n[0])*(t[1]-n[1])<(e[1]-n[1])*(t[0]-n[0])}function Pe(t,n,e,r){var a=t[0],i=e[0],o=n[0]-a,u=r[0]-i,c=t[1],s=e[1],l=n[1]-c,f=r[1]-s,h=(u*(c-s)-f*(a-i))/(f*o-u*l);return[a+h*o,c+h*l]}function Le(t){var n=t[0],e=t[t.length-1];return!(n[0]-e[0]||n[1]-e[1])}function Fe(){rr(this),this.edge=this.site=this.circle=null}function De(t){var n=ec.pop()||new Fe;return n.site=t,n}function Oe(t){$e(t),Zu.remove(t),ec.push(t),rr(t)}function ze(t){var n=t.circle,e=n.x,r=n.cy,a={x:e,y:r},i=t.P,o=t.N,u=[t];Oe(t);for(var c=i;c.circle&&ho(e-c.circle.x)<No&&ho(r-c.circle.cy)<No;)i=c.P,u.unshift(c),Oe(c),c=i;u.unshift(c),$e(c);for(var s=o;s.circle&&ho(e-s.circle.x)<No&&ho(r-s.circle.cy)<No;)o=s.N,u.push(s),Oe(s),s=o;u.push(s),$e(s);var l,f=u.length;for(l=1;f>l;++l)s=u[l],c=u[l-1],tr(s.edge,c.site,s.site,a);c=u[0],s=u[f-1],s.edge=Ke(c.site,s.site,null,a),Qe(c),Qe(s)}function Ie(t){for(var n,e,r,a,i=t.x,o=t.y,u=Zu._;u;)if(r=Ue(u,o)-i,r>No)u=u.L;else{if(a=i-He(u,o),!(a>No)){r>-No?(n=u.P,e=u):a>-No?(n=u,e=u.N):n=e=u;break}if(!u.R){n=u;break}u=u.R}var c=De(t);if(Zu.insert(n,c),n||e){if(n===e)return $e(n),e=De(n.site),Zu.insert(c,e),c.edge=e.edge=Ke(n.site,c.site),Qe(n),void Qe(e);if(!e)return void(c.edge=Ke(n.site,c.site));$e(n),$e(e);var s=n.site,l=s.x,f=s.y,h=t.x-l,d=t.y-f,p=e.site,g=p.x-l,v=p.y-f,m=2*(h*v-d*g),y=h*h+d*d,M=g*g+v*v,b={x:(v*y-d*M)/m+l,y:(h*M-g*y)/m+f};tr(e.edge,s,p,b),c.edge=Ke(s,t,null,b),e.edge=Ke(t,p,null,b),Qe(n),Qe(e)}}function Ue(t,n){var e=t.site,r=e.x,a=e.y,i=a-n;if(!i)return r;var o=t.P;if(!o)return-(1/0);e=o.site;var u=e.x,c=e.y,s=c-n;if(!s)return u;var l=u-r,f=1/i-1/s,h=l/s;return f?(-h+Math.sqrt(h*h-2*f*(l*l/(-2*s)-c+s/2+a-i/2)))/f+r:(r+u)/2}function He(t,n){var e=t.N;if(e)return Ue(e,n);var r=t.site;return r.y===n?r.x:1/0}function Ge(t){this.site=t,this.edges=[]}function Be(t){for(var n,e,r,a,i,o,u,c,s,l,f=t[0][0],h=t[1][0],d=t[0][1],p=t[1][1],g=Ku,v=g.length;v--;)if(i=g[v],i&&i.prepare())for(u=i.edges,c=u.length,o=0;c>o;)l=u[o].end(),r=l.x,a=l.y,s=u[++o%c].start(),n=s.x,e=s.y,(ho(r-n)>No||ho(a-e)>No)&&(u.splice(o,0,new nr(Ze(i.site,l,ho(r-f)<No&&p-a>No?{x:f,y:ho(n-f)<No?e:p}:ho(a-p)<No&&h-r>No?{x:ho(e-p)<No?n:h,y:p}:ho(r-h)<No&&a-d>No?{x:h,y:ho(n-h)<No?e:d}:ho(a-d)<No&&r-f>No?{x:ho(e-d)<No?n:f,y:d}:null),i.site,null)),++c)}function Xe(t,n){return n.angle-t.angle}function We(){rr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Qe(t){var n=t.P,e=t.N;if(n&&e){var r=n.site,a=t.site,i=e.site;if(r!==i){var o=a.x,u=a.y,c=r.x-o,s=r.y-u,l=i.x-o,f=i.y-u,h=2*(c*f-s*l);if(!(h>=-jo)){var d=c*c+s*s,p=l*l+f*f,g=(f*d-s*p)/h,v=(c*p-l*d)/h,f=v+u,m=rc.pop()||new We;m.arc=t,m.site=a,m.x=g+o,m.y=f+Math.sqrt(g*g+v*v),m.cy=f,t.circle=m;for(var y=null,M=nc._;M;)if(m.y<M.y||m.y===M.y&&m.x<=M.x){if(!M.L){y=M.P;break}M=M.L}else{if(!M.R){y=M;break}M=M.R}nc.insert(y,m),y||(tc=m)}}}}function $e(t){var n=t.circle;n&&(n.P||(tc=n.N),nc.remove(n),rc.push(n),rr(n),t.circle=null)}function Ve(t){for(var n,e=Ju,r=Gn(t[0][0],t[0][1],t[1][0],t[1][1]),a=e.length;a--;)n=e[a],(!Ye(n,t)||!r(n)||ho(n.a.x-n.b.x)<No&&ho(n.a.y-n.b.y)<No)&&(n.a=n.b=null,e.splice(a,1))}function Ye(t,n){var e=t.b;if(e)return!0;var r,a,i=t.a,o=n[0][0],u=n[1][0],c=n[0][1],s=n[1][1],l=t.l,f=t.r,h=l.x,d=l.y,p=f.x,g=f.y,v=(h+p)/2,m=(d+g)/2;if(g===d){if(o>v||v>=u)return;if(h>p){if(i){if(i.y>=s)return}else i={x:v,y:c};e={x:v,y:s}}else{if(i){if(i.y<c)return}else i={x:v,y:s};e={x:v,y:c}}}else if(r=(h-p)/(g-d),a=m-r*v,-1>r||r>1)if(h>p){if(i){if(i.y>=s)return}else i={x:(c-a)/r,y:c};e={x:(s-a)/r,y:s}}else{if(i){if(i.y<c)return}else i={x:(s-a)/r,y:s};e={x:(c-a)/r,y:c}}else if(g>d){if(i){if(i.x>=u)return}else i={x:o,y:r*o+a};e={x:u,y:r*u+a}}else{if(i){if(i.x<o)return}else i={x:u,y:r*u+a};e={x:o,y:r*o+a}}return t.a=i,t.b=e,!0}function Je(t,n){this.l=t,this.r=n,this.a=this.b=null}function Ke(t,n,e,r){var a=new Je(t,n);return Ju.push(a),e&&tr(a,t,n,e),r&&tr(a,n,t,r),Ku[t.i].edges.push(new nr(a,t,n)),Ku[n.i].edges.push(new nr(a,n,t)),a}function Ze(t,n,e){var r=new Je(t,null);return r.a=n,r.b=e,Ju.push(r),r}function tr(t,n,e,r){t.a||t.b?t.l===e?t.b=r:t.a=r:(t.a=r,t.l=n,t.r=e)}function nr(t,n,e){var r=t.a,a=t.b;this.edge=t,this.site=n,this.angle=e?Math.atan2(e.y-n.y,e.x-n.x):t.l===n?Math.atan2(a.x-r.x,r.y-a.y):Math.atan2(r.x-a.x,a.y-r.y)}function er(){this._=null}function rr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ar(t,n){var e=n,r=n.R,a=e.U;a?a.L===e?a.L=r:a.R=r:t._=r,r.U=a,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function ir(t,n){var e=n,r=n.L,a=e.U;a?a.L===e?a.L=r:a.R=r:t._=r,r.U=a,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function or(t){for(;t.L;)t=t.L;return t}function ur(t,n){var e,r,a,i=t.sort(cr).pop();for(Ju=[],Ku=new Array(t.length),Zu=new er,nc=new er;;)if(a=tc,i&&(!a||i.y<a.y||i.y===a.y&&i.x<a.x))(i.x!==e||i.y!==r)&&(Ku[i.i]=new Ge(i),Ie(i),e=i.x,r=i.y),i=t.pop();else{if(!a)break;ze(a.arc)}n&&(Ve(n),Be(n));var o={cells:Ku,edges:Ju};return Zu=nc=Ju=Ku=null,o}function cr(t,n){return n.y-t.y||n.x-t.x}function sr(t,n,e){return(t.x-e.x)*(n.y-t.y)-(t.x-n.x)*(e.y-t.y)}function lr(t){return t.x}function fr(t){return t.y}function hr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function dr(t,n,e,r,a,i){if(!t(n,e,r,a,i)){var o=.5*(e+a),u=.5*(r+i),c=n.nodes;c[0]&&dr(t,c[0],e,r,o,u),c[1]&&dr(t,c[1],o,r,a,u),c[2]&&dr(t,c[2],e,u,o,i),c[3]&&dr(t,c[3],o,u,a,i)}}function pr(t,n,e,r,a,i,o){var u,c=1/0;return function t(s,l,f,h,d){if(!(l>i||f>o||r>h||a>d)){if(p=s.point){var p,g=n-s.x,v=e-s.y,m=g*g+v*v;if(c>m){var y=Math.sqrt(c=m);r=n-y,a=e-y,i=n+y,o=e+y,u=p}}for(var M=s.nodes,b=.5*(l+h),w=.5*(f+d),x=n>=b,_=e>=w,k=_<<1|x,E=k+4;E>k;++k)if(s=M[3&k])switch(3&k){case 0:t(s,l,f,b,w);break;case 1:t(s,b,f,h,w);break;case 2:t(s,l,w,b,d);break;case 3:t(s,b,w,h,d)}}}(t,r,a,i,o),u}function gr(t,n){t=eo.rgb(t),n=eo.rgb(n);var e=t.r,r=t.g,a=t.b,i=n.r-e,o=n.g-r,u=n.b-a;return function(t){return"#"+wt(Math.round(e+i*t))+wt(Math.round(r+o*t))+wt(Math.round(a+u*t))}}function vr(t,n){var e,r={},a={};for(e in t)e in n?r[e]=Mr(t[e],n[e]):a[e]=t[e];for(e in n)e in t||(a[e]=n[e]);return function(t){for(e in r)a[e]=r[e](t);return a}}function mr(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function yr(t,n){var e,r,a,i=ic.lastIndex=oc.lastIndex=0,o=-1,u=[],c=[];for(t+="",n+="";(e=ic.exec(t))&&(r=oc.exec(n));)(a=r.index)>i&&(a=n.slice(i,a),u[o]?u[o]+=a:u[++o]=a),(e=e[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,c.push({i:o,x:mr(e,r)})),i=oc.lastIndex;return i<n.length&&(a=n.slice(i),u[o]?u[o]+=a:u[++o]=a),u.length<2?c[0]?(n=c[0].x,function(t){return n(t)+""}):function(){return n}:(n=c.length,function(t){for(var e,r=0;n>r;++r)u[(e=c[r]).i]=e.x(t);return u.join("")})}function Mr(t,n){for(var e,r=eo.interpolators.length;--r>=0&&!(e=eo.interpolators[r](t,n)););return e}function br(t,n){var e,r=[],a=[],i=t.length,o=n.length,u=Math.min(t.length,n.length);for(e=0;u>e;++e)r.push(Mr(t[e],n[e]));for(;i>e;++e)a[e]=t[e];for(;o>e;++e)a[e]=n[e];return function(t){for(e=0;u>e;++e)a[e]=r[e](t);return a}}function wr(t){return function(n){return 0>=n?0:n>=1?1:t(n)}}function xr(t){return function(n){return 1-t(1-n)}}function _r(t){return function(n){return.5*(.5>n?t(2*n):2-t(2-2*n))}}function kr(t){return t*t}function Er(t){return t*t*t}function Tr(t){if(0>=t)return 0;if(t>=1)return 1;var n=t*t,e=n*t;return 4*(.5>t?e:3*(t-n)+e-.75)}function Sr(t){return function(n){return Math.pow(n,t)}}function Ar(t){return 1-Math.cos(t*Po)}function Nr(t){return Math.pow(2,10*(t-1))}function jr(t){return 1-Math.sqrt(1-t*t)}function Rr(t,n){var e;return arguments.length<2&&(n=.45),arguments.length?e=n/Co*Math.asin(1/t):(t=1,e=n/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-e)*Co/n)}}function Cr(t){return t||(t=1.70158),function(n){return n*n*((t+1)*n-t)}}function qr(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Pr(t,n){t=eo.hcl(t),n=eo.hcl(n);var e=t.h,r=t.c,a=t.l,i=n.h-e,o=n.c-r,u=n.l-a;return isNaN(o)&&(o=0,r=isNaN(r)?n.c:r),isNaN(i)?(i=0,e=isNaN(e)?n.h:e):i>180?i-=360:-180>i&&(i+=360),function(t){return ft(e+i*t,r+o*t,a+u*t)+""}}function Lr(t,n){t=eo.hsl(t),n=eo.hsl(n);var e=t.h,r=t.s,a=t.l,i=n.h-e,o=n.s-r,u=n.l-a;return isNaN(o)&&(o=0,r=isNaN(r)?n.s:r),isNaN(i)?(i=0,e=isNaN(e)?n.h:e):i>180?i-=360:-180>i&&(i+=360),function(t){return st(e+i*t,r+o*t,a+u*t)+""}}function Fr(t,n){t=eo.lab(t),n=eo.lab(n);var e=t.l,r=t.a,a=t.b,i=n.l-e,o=n.a-r,u=n.b-a;return function(t){return dt(e+i*t,r+o*t,a+u*t)+""}}function Dr(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function Or(t){var n=[t.a,t.b],e=[t.c,t.d],r=Ir(n),a=zr(n,e),i=Ir(Ur(e,n,-a))||0;n[0]*e[1]<e[0]*n[1]&&(n[0]*=-1,n[1]*=-1,r*=-1,a*=-1),this.rotate=(r?Math.atan2(n[1],n[0]):Math.atan2(-e[0],e[1]))*Fo,this.translate=[t.e,t.f],this.scale=[r,i],this.skew=i?Math.atan2(a,i)*Fo:0}function zr(t,n){return t[0]*n[0]+t[1]*n[1]}function Ir(t){var n=Math.sqrt(zr(t,t));return n&&(t[0]/=n,t[1]/=n),n}function Ur(t,n,e){return t[0]+=e*n[0],t[1]+=e*n[1],t}function Hr(t,n){var e,r=[],a=[],i=eo.transform(t),o=eo.transform(n),u=i.translate,c=o.translate,s=i.rotate,l=o.rotate,f=i.skew,h=o.skew,d=i.scale,p=o.scale;return u[0]!=c[0]||u[1]!=c[1]?(r.push("translate(",null,",",null,")"),a.push({i:1,x:mr(u[0],c[0])},{i:3,x:mr(u[1],c[1])})):c[0]||c[1]?r.push("translate("+c+")"):r.push(""),s!=l?(s-l>180?l+=360:l-s>180&&(s+=360),a.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:mr(s,l)})):l&&r.push(r.pop()+"rotate("+l+")"),f!=h?a.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:mr(f,h)}):h&&r.push(r.pop()+"skewX("+h+")"),d[0]!=p[0]||d[1]!=p[1]?(e=r.push(r.pop()+"scale(",null,",",null,")"),a.push({i:e-4,x:mr(d[0],p[0])},{i:e-2,x:mr(d[1],p[1])})):(1!=p[0]||1!=p[1])&&r.push(r.pop()+"scale("+p+")"),e=a.length,function(t){for(var n,i=-1;++i<e;)r[(n=a[i]).i]=n.x(t);return r.join("")}}function Gr(t,n){return n=(n-=t=+t)||1/n,function(e){return(e-t)/n}}function Br(t,n){return n=(n-=t=+t)||1/n,function(e){return Math.max(0,Math.min(1,(e-t)/n))}}function Xr(t){for(var n=t.source,e=t.target,r=Qr(n,e),a=[n];n!==r;)n=n.parent,a.push(n);for(var i=a.length;e!==r;)a.splice(i,0,e),e=e.parent;return a}function Wr(t){for(var n=[],e=t.parent;null!=e;)n.push(t),t=e,e=e.parent;return n.push(t),n}function Qr(t,n){if(t===n)return t;for(var e=Wr(t),r=Wr(n),a=e.pop(),i=r.pop(),o=null;a===i;)o=a,a=e.pop(),i=r.pop();return o}function $r(t){t.fixed|=2}function Vr(t){t.fixed&=-7}function Yr(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Jr(t){t.fixed&=-5}function Kr(t,n,e){var r=0,a=0;if(t.charge=0,!t.leaf)for(var i,o=t.nodes,u=o.length,c=-1;++c<u;)i=o[c],null!=i&&(Kr(i,n,e),t.charge+=i.charge,r+=i.charge*i.cx,a+=i.charge*i.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var s=n*e[t.point.index];t.charge+=t.pointCharge=s,r+=s*t.point.x,a+=s*t.point.y}t.cx=r/t.charge,t.cy=a/t.charge}function Zr(t,n){return eo.rebind(t,n,"sort","children","value"),t.nodes=t,t.links=ia,t}function ta(t,n){for(var e=[t];null!=(t=e.pop());)if(n(t),(a=t.children)&&(r=a.length))for(var r,a;--r>=0;)e.push(a[r])}function na(t,n){for(var e=[t],r=[];null!=(t=e.pop());)if(r.push(t),(i=t.children)&&(a=i.length))for(var a,i,o=-1;++o<a;)e.push(i[o]);for(;null!=(t=r.pop());)n(t)}function ea(t){return t.children}function ra(t){return t.value}function aa(t,n){return n.value-t.value}function ia(t){return eo.merge(t.map(function(t){return(t.children||[]).map(function(n){return{source:t,target:n}})}))}function oa(t){return t.x}function ua(t){return t.y}function ca(t,n,e){t.y0=n,t.y=e}function sa(t){return eo.range(t.length)}function la(t){for(var n=-1,e=t[0].length,r=[];++n<e;)r[n]=0;return r}function fa(t){for(var n,e=1,r=0,a=t[0][1],i=t.length;i>e;++e)(n=t[e][1])>a&&(r=e,a=n);return r}function ha(t){return t.reduce(da,0)}function da(t,n){return t+n[1]}function pa(t,n){return ga(t,Math.ceil(Math.log(n.length)/Math.LN2+1))}function ga(t,n){for(var e=-1,r=+t[0],a=(t[1]-r)/n,i=[];++e<=n;)i[e]=a*e+r;return i}function va(t){return[eo.min(t),eo.max(t)]}function ma(t,n){return t.value-n.value}function ya(t,n){var e=t._pack_next;t._pack_next=n,n._pack_prev=t,n._pack_next=e,e._pack_prev=n}function Ma(t,n){t._pack_next=n,n._pack_prev=t}function ba(t,n){var e=n.x-t.x,r=n.y-t.y,a=t.r+n.r;return.999*a*a>e*e+r*r}function wa(t){function n(t){l=Math.min(t.x-t.r,l),f=Math.max(t.x+t.r,f),h=Math.min(t.y-t.r,h),d=Math.max(t.y+t.r,d)}if((e=t.children)&&(s=e.length)){var e,r,a,i,o,u,c,s,l=1/0,f=-(1/0),h=1/0,d=-(1/0);if(e.forEach(xa),r=e[0],r.x=-r.r,r.y=0,n(r),s>1&&(a=e[1],a.x=a.r,a.y=0,n(a),s>2))for(i=e[2],Ea(r,a,i),n(i),ya(r,i),r._pack_prev=i,ya(i,a),a=r._pack_next,o=3;s>o;o++){Ea(r,a,i=e[o]);var p=0,g=1,v=1;for(u=a._pack_next;u!==a;u=u._pack_next,g++)if(ba(u,i)){p=1;break}if(1==p)for(c=r._pack_prev;c!==u._pack_prev&&!ba(c,i);c=c._pack_prev,v++);p?(v>g||g==v&&a.r<r.r?Ma(r,a=u):Ma(r=c,a),o--):(ya(r,i),a=i,n(i))}var m=(l+f)/2,y=(h+d)/2,M=0;for(o=0;s>o;o++)i=e[o],i.x-=m,i.y-=y,M=Math.max(M,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=M,e.forEach(_a)}}function xa(t){t._pack_next=t._pack_prev=t}function _a(t){delete t._pack_next,delete t._pack_prev}function ka(t,n,e,r){var a=t.children;if(t.x=n+=r*t.x,t.y=e+=r*t.y,t.r*=r,a)for(var i=-1,o=a.length;++i<o;)ka(a[i],n,e,r)}function Ea(t,n,e){var r=t.r+e.r,a=n.x-t.x,i=n.y-t.y;if(r&&(a||i)){var o=n.r+e.r,u=a*a+i*i;o*=o,r*=r;var c=.5+(r-o)/(2*u),s=Math.sqrt(Math.max(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);e.x=t.x+c*a+s*i,e.y=t.y+c*i-s*a}else e.x=t.x+r,e.y=t.y}function Ta(t,n){return t.parent==n.parent?1:2}function Sa(t){var n=t.children;return n.length?n[0]:t.t}function Aa(t){var n,e=t.children;return(n=e.length)?e[n-1]:t.t}function Na(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function ja(t){for(var n,e=0,r=0,a=t.children,i=a.length;--i>=0;)n=a[i],n.z+=e,n.m+=e,e+=n.s+(r+=n.c)}function Ra(t,n,e){return t.a.parent===n.parent?t.a:e}function Ca(t){return 1+eo.max(t,function(t){return t.y})}function qa(t){return t.reduce(function(t,n){return t+n.x},0)/t.length}function Pa(t){var n=t.children;return n&&n.length?Pa(n[0]):t}function La(t){var n,e=t.children;return e&&(n=e.length)?La(e[n-1]):t}function Fa(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Da(t,n){var e=t.x+n[3],r=t.y+n[0],a=t.dx-n[1]-n[3],i=t.dy-n[0]-n[2];return 0>a&&(e+=a/2,a=0),0>i&&(r+=i/2,i=0),{x:e,y:r,dx:a,dy:i}}function Oa(t){var n=t[0],e=t[t.length-1];return e>n?[n,e]:[e,n]}function za(t){return t.rangeExtent?t.rangeExtent():Oa(t.range())}function Ia(t,n,e,r){var a=e(t[0],t[1]),i=r(n[0],n[1]);return function(t){return i(a(t))}}function Ua(t,n){var e,r=0,a=t.length-1,i=t[r],o=t[a];return i>o&&(e=r,r=a,a=e,e=i,i=o,o=e),t[r]=n.floor(i),t[a]=n.ceil(o),t}function Ha(t){return t?{floor:function(n){return Math.floor(n/t)*t},ceil:function(n){return Math.ceil(n/t)*t}}:mc}function Ga(t,n,e,r){var a=[],i=[],o=0,u=Math.min(t.length,n.length)-1;for(t[u]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++o<=u;)a.push(e(t[o-1],t[o])),i.push(r(n[o-1],n[o]));return function(n){var e=eo.bisect(t,n,1,u)-1;return i[e](a[e](n))}}function Ba(t,n,e,r){function a(){var a=Math.min(t.length,n.length)>2?Ga:Ia,c=r?Br:Gr;return o=a(t,n,c,e),u=a(n,t,c,Mr),i}function i(t){return o(t)}var o,u;return i.invert=function(t){return u(t)},i.domain=function(n){return arguments.length?(t=n.map(Number),a()):t},i.range=function(t){return arguments.length?(n=t,a()):n},i.rangeRound=function(t){return i.range(t).interpolate(Dr)},i.clamp=function(t){return arguments.length?(r=t,a()):r},i.interpolate=function(t){return arguments.length?(e=t,a()):e},i.ticks=function(n){return $a(t,n)},i.tickFormat=function(n,e){return Va(t,n,e)},i.nice=function(n){return Wa(t,n),a()},i.copy=function(){return Ba(t,n,e,r)},a()}function Xa(t,n){return eo.rebind(t,n,"range","rangeRound","interpolate","clamp")}function Wa(t,n){return Ua(t,Ha(Qa(t,n)[2]))}function Qa(t,n){null==n&&(n=10);var e=Oa(t),r=e[1]-e[0],a=Math.pow(10,Math.floor(Math.log(r/n)/Math.LN10)),i=n/r*a;return.15>=i?a*=10:.35>=i?a*=5:.75>=i&&(a*=2),e[0]=Math.ceil(e[0]/a)*a,e[1]=Math.floor(e[1]/a)*a+.5*a,e[2]=a,e}function $a(t,n){return eo.range.apply(eo,Qa(t,n))}function Va(t,n,e){var r=Qa(t,n);if(e){var a=iu.exec(e);if(a.shift(),"s"===a[8]){var i=eo.formatPrefix(Math.max(ho(r[0]),ho(r[1])));return a[7]||(a[7]="."+Ya(i.scale(r[2]))),a[8]="f",e=eo.format(a.join("")),function(t){return e(i.scale(t))+i.symbol}}a[7]||(a[7]="."+Ja(a[8],r)),e=a.join("")}else e=",."+Ya(r[2])+"f";return eo.format(e)}function Ya(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function Ja(t,n){var e=Ya(n[2]);return t in yc?Math.abs(e-Ya(Math.max(ho(n[0]),ho(n[1]))))+ +("e"!==t):e-2*("%"===t)}function Ka(t,n,e,r){function a(t){return(e?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(n)}function i(t){return e?Math.pow(n,t):-Math.pow(n,-t)}function o(n){return t(a(n))}return o.invert=function(n){return i(t.invert(n))},o.domain=function(n){return arguments.length?(e=n[0]>=0,t.domain((r=n.map(Number)).map(a)),o):r},o.base=function(e){return arguments.length?(n=+e,t.domain(r.map(a)),o):n},o.nice=function(){var n=Ua(r.map(a),e?Math:bc);return t.domain(n),r=n.map(i),o},o.ticks=function(){var t=Oa(r),o=[],u=t[0],c=t[1],s=Math.floor(a(u)),l=Math.ceil(a(c)),f=n%1?2:n;if(isFinite(l-s)){if(e){for(;l>s;s++)for(var h=1;f>h;h++)o.push(i(s)*h);o.push(i(s))}else for(o.push(i(s));s++<l;)for(var h=f-1;h>0;h--)o.push(i(s)*h);for(s=0;o[s]<u;s++);for(l=o.length;o[l-1]>c;l--);o=o.slice(s,l)}return o},o.tickFormat=function(t,n){if(!arguments.length)return Mc;arguments.length<2?n=Mc:"function"!=typeof n&&(n=eo.format(n));var r,u=Math.max(.1,t/o.ticks().length),c=e?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(t){return t/i(c(a(t)+r))<=u?n(t):""}},o.copy=function(){return Ka(t.copy(),n,e,r)},Xa(o,t)}function Za(t,n,e){function r(n){return t(a(n))}var a=ti(n),i=ti(1/n);return r.invert=function(n){return i(t.invert(n))},r.domain=function(n){return arguments.length?(t.domain((e=n.map(Number)).map(a)),r):e},r.ticks=function(t){return $a(e,t)},r.tickFormat=function(t,n){return Va(e,t,n)},r.nice=function(t){return r.domain(Wa(e,t))},r.exponent=function(o){return arguments.length?(a=ti(n=o),i=ti(1/n),t.domain(e.map(a)),r):n},r.copy=function(){return Za(t.copy(),n,e)},Xa(r,t)}function ti(t){return function(n){return 0>n?-Math.pow(-n,t):Math.pow(n,t)}}function ni(t,n){function e(e){return i[((a.get(e)||("range"===n.t?a.set(e,t.push(e)):NaN))-1)%i.length]}function r(n,e){return eo.range(t.length).map(function(t){return n+e*t})}var a,i,o;return e.domain=function(r){if(!arguments.length)return t;t=[],a=new l;for(var i,o=-1,u=r.length;++o<u;)a.has(i=r[o])||a.set(i,t.push(i));return e[n.t].apply(e,n.a)},e.range=function(t){return arguments.length?(i=t,o=0,n={t:"range",a:arguments},e):i},e.rangePoints=function(a,u){arguments.length<2&&(u=0);var c=a[0],s=a[1],l=t.length<2?(c=(c+s)/2,0):(s-c)/(t.length-1+u);return i=r(c+l*u/2,l),o=0,n={t:"rangePoints",a:arguments},e},e.rangeRoundPoints=function(a,u){arguments.length<2&&(u=0);var c=a[0],s=a[1],l=t.length<2?(c=s=Math.round((c+s)/2),0):(s-c)/(t.length-1+u)|0;return i=r(c+Math.round(l*u/2+(s-c-(t.length-1+u)*l)/2),l),o=0,n={t:"rangeRoundPoints",a:arguments},e},e.rangeBands=function(a,u,c){arguments.length<2&&(u=0),arguments.length<3&&(c=u);var s=a[1]<a[0],l=a[s-0],f=a[1-s],h=(f-l)/(t.length-u+2*c);return i=r(l+h*c,h),s&&i.reverse(),o=h*(1-u),n={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(a,u,c){arguments.length<2&&(u=0),arguments.length<3&&(c=u);var s=a[1]<a[0],l=a[s-0],f=a[1-s],h=Math.floor((f-l)/(t.length-u+2*c));return i=r(l+Math.round((f-l-(t.length-u)*h)/2),h),s&&i.reverse(),o=Math.round(h*(1-u)),n={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return o},e.rangeExtent=function(){return Oa(n.a[0])},e.copy=function(){return ni(t,n)},e.domain(t)}function ei(t,n){function e(){var e=0,r=n.length;for(u=[];++e<r;)u[e-1]=eo.quantile(t,e/r);return o}function o(t){return isNaN(t=+t)?void 0:n[eo.bisect(u,t)]}var u;return o.domain=function(n){return arguments.length?(t=n.map(a).filter(i).sort(r),e()):t},o.range=function(t){return arguments.length?(n=t,e()):n},o.quantiles=function(){return u},o.invertExtent=function(e){return e=n.indexOf(e),0>e?[NaN,NaN]:[e>0?u[e-1]:t[0],e<u.length?u[e]:t[t.length-1]]},o.copy=function(){return ei(t,n)},e()}function ri(t,n,e){function r(n){return e[Math.max(0,Math.min(o,Math.floor(i*(n-t))))]}function a(){return i=e.length/(n-t),o=e.length-1,r}var i,o;return r.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],a()):[t,n]},r.range=function(t){return arguments.length?(e=t,a()):e},r.invertExtent=function(n){return n=e.indexOf(n),n=0>n?NaN:n/i+t,[n,n+1/i]},r.copy=function(){return ri(t,n,e)},a()}function ai(t,n){function e(e){return e>=e?n[eo.bisect(t,e)]:void 0}return e.domain=function(n){return arguments.length?(t=n,e):t},e.range=function(t){return arguments.length?(n=t,e):n},e.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]},e.copy=function(){return ai(t,n)},e}function ii(t){function n(t){return+t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=e.map(n),n):t},n.ticks=function(n){return $a(t,n)},n.tickFormat=function(n,e){return Va(t,n,e)},n.copy=function(){return ii(t)},n}function oi(){return 0}function ui(t){return t.innerRadius}function ci(t){return t.outerRadius}function si(t){return t.startAngle}function li(t){return t.endAngle}function fi(t){return t&&t.padAngle}function hi(t,n,e,r){return(t-e)*n-(n-r)*t>0?0:1}function di(t,n,e,r,a){var i=t[0]-n[0],o=t[1]-n[1],u=(a?r:-r)/Math.sqrt(i*i+o*o),c=u*o,s=-u*i,l=t[0]+c,f=t[1]+s,h=n[0]+c,d=n[1]+s,p=(l+h)/2,g=(f+d)/2,v=h-l,m=d-f,y=v*v+m*m,M=e-r,b=l*d-h*f,w=(0>m?-1:1)*Math.sqrt(M*M*y-b*b),x=(b*m-v*w)/y,_=(-b*v-m*w)/y,k=(b*m+v*w)/y,E=(-b*v+m*w)/y,T=x-p,S=_-g,A=k-p,N=E-g;return T*T+S*S>A*A+N*N&&(x=k,_=E),[[x-c,_-s],[x*e/M,_*e/M]]}function pi(t){function n(n){function o(){s.push("M",i(t(l),u))}for(var c,s=[],l=[],f=-1,h=n.length,d=St(e),p=St(r);++f<h;)a.call(this,c=n[f],f)?l.push([+d.call(this,c,f),+p.call(this,c,f)]):l.length&&(o(),l=[]);return l.length&&o(),s.length?s.join(""):null}var e=Ne,r=je,a=jn,i=gi,o=i.key,u=.7;return n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n.defined=function(t){return arguments.length?(a=t,n):a},n.interpolate=function(t){return arguments.length?(o="function"==typeof t?i=t:(i=Tc.get(t)||gi).key,n):o},n.tension=function(t){return arguments.length?(u=t,n):u},n}function gi(t){return t.join("L")}function vi(t){return gi(t)+"Z"}function mi(t){for(var n=0,e=t.length,r=t[0],a=[r[0],",",r[1]];++n<e;)a.push("H",(r[0]+(r=t[n])[0])/2,"V",r[1]);return e>1&&a.push("H",r[0]),a.join("")}function yi(t){for(var n=0,e=t.length,r=t[0],a=[r[0],",",r[1]];++n<e;)a.push("V",(r=t[n])[1],"H",r[0]);return a.join("")}function Mi(t){for(var n=0,e=t.length,r=t[0],a=[r[0],",",r[1]];++n<e;)a.push("H",(r=t[n])[0],"V",r[1]);return a.join("")}function bi(t,n){return t.length<4?gi(t):t[1]+_i(t.slice(1,-1),ki(t,n))}function wi(t,n){return t.length<3?gi(t):t[0]+_i((t.push(t[0]),t),ki([t[t.length-2]].concat(t,[t[1]]),n))}function xi(t,n){return t.length<3?gi(t):t[0]+_i(t,ki(t,n))}function _i(t,n){if(n.length<1||t.length!=n.length&&t.length!=n.length+2)return gi(t);var e=t.length!=n.length,r="",a=t[0],i=t[1],o=n[0],u=o,c=1;if(e&&(r+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],a=t[1],c=2),n.length>1){u=n[1],i=t[c],c++,r+="C"+(a[0]+o[0])+","+(a[1]+o[1])+","+(i[0]-u[0])+","+(i[1]-u[1])+","+i[0]+","+i[1];for(var s=2;s<n.length;s++,c++)i=t[c],u=n[s],r+="S"+(i[0]-u[0])+","+(i[1]-u[1])+","+i[0]+","+i[1]}if(e){var l=t[c];r+="Q"+(i[0]+2*u[0]/3)+","+(i[1]+2*u[1]/3)+","+l[0]+","+l[1]}return r}function ki(t,n){for(var e,r=[],a=(1-n)/2,i=t[0],o=t[1],u=1,c=t.length;++u<c;)e=i,i=o,o=t[u],r.push([a*(o[0]-e[0]),a*(o[1]-e[1])]);return r}function Ei(t){if(t.length<3)return gi(t);var n=1,e=t.length,r=t[0],a=r[0],i=r[1],o=[a,a,a,(r=t[1])[0]],u=[i,i,i,r[1]],c=[a,",",i,"L",Ni(Nc,o),",",Ni(Nc,u)];for(t.push(t[e-1]);++n<=e;)r=t[n],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),ji(c,o,u);return t.pop(),c.push("L",r),c.join("")}function Ti(t){if(t.length<4)return gi(t);for(var n,e=[],r=-1,a=t.length,i=[0],o=[0];++r<3;)n=t[r],i.push(n[0]),o.push(n[1]);for(e.push(Ni(Nc,i)+","+Ni(Nc,o)),--r;++r<a;)n=t[r],i.shift(),i.push(n[0]),o.shift(),o.push(n[1]),ji(e,i,o);return e.join("")}function Si(t){for(var n,e,r=-1,a=t.length,i=a+4,o=[],u=[];++r<4;)e=t[r%a],o.push(e[0]),u.push(e[1]);for(n=[Ni(Nc,o),",",Ni(Nc,u)],--r;++r<i;)e=t[r%a],o.shift(),o.push(e[0]),u.shift(),u.push(e[1]),ji(n,o,u);return n.join("")}function Ai(t,n){var e=t.length-1;if(e)for(var r,a,i=t[0][0],o=t[0][1],u=t[e][0]-i,c=t[e][1]-o,s=-1;++s<=e;)r=t[s],a=s/e,r[0]=n*r[0]+(1-n)*(i+a*u),r[1]=n*r[1]+(1-n)*(o+a*c);return Ei(t)}function Ni(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function ji(t,n,e){t.push("C",Ni(Sc,n),",",Ni(Sc,e),",",Ni(Ac,n),",",Ni(Ac,e),",",Ni(Nc,n),",",Ni(Nc,e))}function Ri(t,n){return(n[1]-t[1])/(n[0]-t[0])}function Ci(t){for(var n=0,e=t.length-1,r=[],a=t[0],i=t[1],o=r[0]=Ri(a,i);++n<e;)r[n]=(o+(o=Ri(a=i,i=t[n+1])))/2;return r[n]=o,r}function qi(t){for(var n,e,r,a,i=[],o=Ci(t),u=-1,c=t.length-1;++u<c;)n=Ri(t[u],t[u+1]),ho(n)<No?o[u]=o[u+1]=0:(e=o[u]/n,r=o[u+1]/n,a=e*e+r*r,a>9&&(a=3*n/Math.sqrt(a),o[u]=a*e,o[u+1]=a*r));for(u=-1;++u<=c;)a=(t[Math.min(c,u+1)][0]-t[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),i.push([a||0,o[u]*a||0]);return i}function Pi(t){return t.length<3?gi(t):t[0]+_i(t,qi(t))}function Li(t){for(var n,e,r,a=-1,i=t.length;++a<i;)n=t[a],e=n[0],r=n[1]-Po,n[0]=e*Math.cos(r),n[1]=e*Math.sin(r);return t}function Fi(t){function n(n){function c(){g.push("M",u(t(m),f),l,s(t(v.reverse()),f),"Z")}for(var h,d,p,g=[],v=[],m=[],y=-1,M=n.length,b=St(e),w=St(a),x=e===r?function(){return d}:St(r),_=a===i?function(){return p}:St(i);++y<M;)o.call(this,h=n[y],y)?(v.push([d=+b.call(this,h,y),p=+w.call(this,h,y)]),m.push([+x.call(this,h,y),+_.call(this,h,y)])):v.length&&(c(),v=[],m=[]);return v.length&&c(),g.length?g.join(""):null}var e=Ne,r=Ne,a=0,i=je,o=jn,u=gi,c=u.key,s=u,l="L",f=.7;return n.x=function(t){return arguments.length?(e=r=t,n):r},n.x0=function(t){return arguments.length?(e=t,n):e},n.x1=function(t){return arguments.length?(r=t,n):r},n.y=function(t){return arguments.length?(a=i=t,n):i},n.y0=function(t){return arguments.length?(a=t,n):a},n.y1=function(t){return arguments.length?(i=t,n):i},n.defined=function(t){return arguments.length?(o=t,n):o},n.interpolate=function(t){return arguments.length?(c="function"==typeof t?u=t:(u=Tc.get(t)||gi).key,s=u.reverse||u,l=u.closed?"M":"L",n):c},n.tension=function(t){return arguments.length?(f=t,n):f},n}function Di(t){return t.radius}function Oi(t){return[t.x,t.y]}function zi(t){return function(){var n=t.apply(this,arguments),e=n[0],r=n[1]-Po;return[e*Math.cos(r),e*Math.sin(r)]}}function Ii(){return 64}function Ui(){return"circle"}function Hi(t){var n=Math.sqrt(t/Ro);return"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z"}function Gi(t){return function(){var n,e;(n=this[t])&&(e=n[n.active])&&(--n.count?delete n[n.active]:delete this[t],n.active+=.5,e.event&&e.event.interrupt.call(this,this.__data__,e.index))}}function Bi(t,n,e){return yo(t,Fc),t.namespace=n,t.id=e,t}function Xi(t,n,e,r){var a=t.id,i=t.namespace;return B(t,"function"==typeof e?function(t,o,u){t[i][a].tween.set(n,r(e.call(t,t.__data__,o,u)))}:(e=r(e),function(t){t[i][a].tween.set(n,e)}))}function Wi(t){return null==t&&(t=""),function(){this.textContent=t}}function Qi(t){return null==t?"__transition__":"__transition_"+t+"__"}function $i(t,n,e,r,a){var i=t[e]||(t[e]={active:0,count:0}),o=i[r];if(!o){var u=a.time;o=i[r]={tween:new l,time:u,delay:a.delay,duration:a.duration,ease:a.ease,index:n},a=null,++i.count,eo.timer(function(a){function c(e){if(i.active>r)return l();var a=i[i.active];a&&(--i.count,delete i[i.active],a.event&&a.event.interrupt.call(t,t.__data__,a.index)),i.active=r,o.event&&o.event.start.call(t,t.__data__,n),o.tween.forEach(function(e,r){(r=r.call(t,t.__data__,n))&&g.push(r)}),h=o.ease,f=o.duration,eo.timer(function(){return p.c=s(e||1)?jn:s,1},0,u)}function s(e){if(i.active!==r)return 1;for(var a=e/f,u=h(a),c=g.length;c>0;)g[--c].call(t,u);return a>=1?(o.event&&o.event.end.call(t,t.__data__,n),l()):void 0}function l(){return--i.count?delete i[r]:delete t[e],1}var f,h,d=o.delay,p=eu,g=[];return p.t=d+u,a>=d?c(a-d):void(p.c=c)},0,u)}}function Vi(t,n,e){t.attr("transform",function(t){var r=n(t);return"translate("+(isFinite(r)?r:e(t))+",0)"})}function Yi(t,n,e){t.attr("transform",function(t){var r=n(t);return"translate(0,"+(isFinite(r)?r:e(t))+")"})}function Ji(t){return t.toISOString()}function Ki(t,n,e){function r(n){return t(n)}function a(t,e){var r=t[1]-t[0],a=r/e,i=eo.bisect(Xc,a);return i==Xc.length?[n.year,Qa(t.map(function(t){return t/31536e6}),e)[2]]:i?n[a/Xc[i-1]<Xc[i]/a?i-1:i]:[$c,Qa(t,e)[2]]}return r.invert=function(n){return Zi(t.invert(n))},r.domain=function(n){return arguments.length?(t.domain(n),r):t.domain().map(Zi)},r.nice=function(t,n){function e(e){return!isNaN(e)&&!t.range(e,Zi(+e+1),n).length}var i=r.domain(),o=Oa(i),u=null==t?a(o,10):"number"==typeof t&&a(o,t);return u&&(t=u[0],n=u[1]),r.domain(Ua(i,n>1?{floor:function(n){for(;e(n=t.floor(n));)n=Zi(n-1);return n},ceil:function(n){for(;e(n=t.ceil(n));)n=Zi(+n+1);return n}}:t))},r.ticks=function(t,n){var e=Oa(r.domain()),i=null==t?a(e,10):"number"==typeof t?a(e,t):!t.range&&[{range:t},n];return i&&(t=i[0],n=i[1]),t.range(e[0],Zi(+e[1]+1),1>n?1:n)},r.tickFormat=function(){return e},r.copy=function(){return Ki(t.copy(),n,e)},Xa(r,t)}function Zi(t){return new Date(t)}function to(t){return JSON.parse(t.responseText);
}function no(t){var n=io.createRange();return n.selectNode(io.body),n.createContextualFragment(t.responseText)}var eo={version:"3.5.6"},ro=[].slice,ao=function(t){return ro.call(t)},io=this.document;if(io)try{ao(io.documentElement.childNodes)[0].nodeType}catch(t){ao=function(t){for(var n=t.length,e=new Array(n);n--;)e[n]=t[n];return e}}if(Date.now||(Date.now=function(){return+new Date}),io)try{io.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var oo=this.Element.prototype,uo=oo.setAttribute,co=oo.setAttributeNS,so=this.CSSStyleDeclaration.prototype,lo=so.setProperty;oo.setAttribute=function(t,n){uo.call(this,t,n+"")},oo.setAttributeNS=function(t,n,e){co.call(this,t,n,e+"")},so.setProperty=function(t,n,e){lo.call(this,t,n+"",e)}}eo.ascending=r,eo.descending=function(t,n){return t>n?-1:n>t?1:n>=t?0:NaN},eo.min=function(t,n){var e,r,a=-1,i=t.length;if(1===arguments.length){for(;++a<i;)if(null!=(r=t[a])&&r>=r){e=r;break}for(;++a<i;)null!=(r=t[a])&&e>r&&(e=r)}else{for(;++a<i;)if(null!=(r=n.call(t,t[a],a))&&r>=r){e=r;break}for(;++a<i;)null!=(r=n.call(t,t[a],a))&&e>r&&(e=r)}return e},eo.max=function(t,n){var e,r,a=-1,i=t.length;if(1===arguments.length){for(;++a<i;)if(null!=(r=t[a])&&r>=r){e=r;break}for(;++a<i;)null!=(r=t[a])&&r>e&&(e=r)}else{for(;++a<i;)if(null!=(r=n.call(t,t[a],a))&&r>=r){e=r;break}for(;++a<i;)null!=(r=n.call(t,t[a],a))&&r>e&&(e=r)}return e},eo.extent=function(t,n){var e,r,a,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){e=a=r;break}for(;++i<o;)null!=(r=t[i])&&(e>r&&(e=r),r>a&&(a=r))}else{for(;++i<o;)if(null!=(r=n.call(t,t[i],i))&&r>=r){e=a=r;break}for(;++i<o;)null!=(r=n.call(t,t[i],i))&&(e>r&&(e=r),r>a&&(a=r))}return[e,a]},eo.sum=function(t,n){var e,r=0,a=t.length,o=-1;if(1===arguments.length)for(;++o<a;)i(e=+t[o])&&(r+=e);else for(;++o<a;)i(e=+n.call(t,t[o],o))&&(r+=e);return r},eo.mean=function(t,n){var e,r=0,o=t.length,u=-1,c=o;if(1===arguments.length)for(;++u<o;)i(e=a(t[u]))?r+=e:--c;else for(;++u<o;)i(e=a(n.call(t,t[u],u)))?r+=e:--c;return c?r/c:void 0},eo.quantile=function(t,n){var e=(t.length-1)*n+1,r=Math.floor(e),a=+t[r-1],i=e-r;return i?a+i*(t[r]-a):a},eo.median=function(t,n){var e,o=[],u=t.length,c=-1;if(1===arguments.length)for(;++c<u;)i(e=a(t[c]))&&o.push(e);else for(;++c<u;)i(e=a(n.call(t,t[c],c)))&&o.push(e);return o.length?eo.quantile(o.sort(r),.5):void 0},eo.variance=function(t,n){var e,r,o=t.length,u=0,c=0,s=-1,l=0;if(1===arguments.length)for(;++s<o;)i(e=a(t[s]))&&(r=e-u,u+=r/++l,c+=r*(e-u));else for(;++s<o;)i(e=a(n.call(t,t[s],s)))&&(r=e-u,u+=r/++l,c+=r*(e-u));return l>1?c/(l-1):void 0},eo.deviation=function(){var t=eo.variance.apply(this,arguments);return t?Math.sqrt(t):t};var fo=o(r);eo.bisectLeft=fo.left,eo.bisect=eo.bisectRight=fo.right,eo.bisector=function(t){return o(1===t.length?function(n,e){return r(t(n),e)}:t)},eo.shuffle=function(t,n,e){(i=arguments.length)<3&&(e=t.length,2>i&&(n=0));for(var r,a,i=e-n;i;)a=Math.random()*i--|0,r=t[i+n],t[i+n]=t[a+n],t[a+n]=r;return t},eo.permute=function(t,n){for(var e=n.length,r=new Array(e);e--;)r[e]=t[n[e]];return r},eo.pairs=function(t){for(var n,e=0,r=t.length-1,a=t[0],i=new Array(0>r?0:r);r>e;)i[e]=[n=a,a=t[++e]];return i},eo.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,n=eo.min(arguments,u),e=new Array(n);++t<n;)for(var r,a=-1,i=e[t]=new Array(r);++a<r;)i[a]=arguments[a][t];return e},eo.transpose=function(t){return eo.zip.apply(eo,t)},eo.keys=function(t){var n=[];for(var e in t)n.push(e);return n},eo.values=function(t){var n=[];for(var e in t)n.push(t[e]);return n},eo.entries=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n},eo.merge=function(t){for(var n,e,r,a=t.length,i=-1,o=0;++i<a;)o+=t[i].length;for(e=new Array(o);--a>=0;)for(r=t[a],n=r.length;--n>=0;)e[--o]=r[n];return e};var ho=Math.abs;eo.range=function(t,n,e){if(arguments.length<3&&(e=1,arguments.length<2&&(n=t,t=0)),(n-t)/e===1/0)throw new Error("infinite range");var r,a=[],i=c(ho(e)),o=-1;if(t*=i,n*=i,e*=i,0>e)for(;(r=t+e*++o)>n;)a.push(r/i);else for(;(r=t+e*++o)<n;)a.push(r/i);return a},eo.map=function(t,n){var e=new l;if(t instanceof l)t.forEach(function(t,n){e.set(t,n)});else if(Array.isArray(t)){var r,a=-1,i=t.length;if(1===arguments.length)for(;++a<i;)e.set(a,t[a]);else for(;++a<i;)e.set(n.call(t,r=t[a],a),r)}else for(var o in t)e.set(o,t[o]);return e};var po="__proto__",go="\x00";s(l,{has:d,get:function(t){return this._[f(t)]},set:function(t,n){return this._[f(t)]=n},remove:p,keys:g,values:function(){var t=[];for(var n in this._)t.push(this._[n]);return t},entries:function(){var t=[];for(var n in this._)t.push({key:h(n),value:this._[n]});return t},size:v,empty:m,forEach:function(t){for(var n in this._)t.call(this,h(n),this._[n])}}),eo.nest=function(){function t(n,o,u){if(u>=i.length)return r?r.call(a,o):e?o.sort(e):o;for(var c,s,f,h,d=-1,p=o.length,g=i[u++],v=new l;++d<p;)(h=v.get(c=g(s=o[d])))?h.push(s):v.set(c,[s]);return n?(s=n(),f=function(e,r){s.set(e,t(n,r,u))}):(s={},f=function(e,r){s[e]=t(n,r,u)}),v.forEach(f),s}function n(t,e){if(e>=i.length)return t;var r=[],a=o[e++];return t.forEach(function(t,a){r.push({key:t,values:n(a,e)})}),a?r.sort(function(t,n){return a(t.key,n.key)}):r}var e,r,a={},i=[],o=[];return a.map=function(n,e){return t(e,n,0)},a.entries=function(e){return n(t(eo.map,e,0),0)},a.key=function(t){return i.push(t),a},a.sortKeys=function(t){return o[i.length-1]=t,a},a.sortValues=function(t){return e=t,a},a.rollup=function(t){return r=t,a},a},eo.set=function(t){var n=new y;if(t)for(var e=0,r=t.length;r>e;++e)n.add(t[e]);return n},s(y,{has:d,add:function(t){return this._[f(t+="")]=!0,t},remove:p,values:g,size:v,empty:m,forEach:function(t){for(var n in this._)t.call(this,h(n))}}),eo.behavior={},eo.rebind=function(t,n){for(var e,r=1,a=arguments.length;++r<a;)t[e=arguments[r]]=b(t,n,n[e]);return t};var vo=["webkit","ms","moz","Moz","o","O"];eo.dispatch=function(){for(var t=new _,n=-1,e=arguments.length;++n<e;)t[arguments[n]]=k(t);return t},_.prototype.on=function(t,n){var e=t.indexOf("."),r="";if(e>=0&&(r=t.slice(e+1),t=t.slice(0,e)),t)return arguments.length<2?this[t].on(r):this[t].on(r,n);if(2===arguments.length){if(null==n)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},eo.event=null,eo.requote=function(t){return t.replace(mo,"\\$&")};var mo=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,yo={}.__proto__?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)t[e]=n[e]},Mo=function(t,n){return n.querySelector(t)},bo=function(t,n){return n.querySelectorAll(t)},wo=function(t,n){var e=t.matches||t[w(t,"matchesSelector")];return(wo=function(t,n){return e.call(t,n)})(t,n)};"function"==typeof Sizzle&&(Mo=function(t,n){return Sizzle(t,n)[0]||null},bo=Sizzle,wo=Sizzle.matchesSelector),eo.selection=function(){return eo.select(io.documentElement)};var xo=eo.selection.prototype=[];xo.select=function(t){var n,e,r,a,i=[];t=N(t);for(var o=-1,u=this.length;++o<u;){i.push(n=[]),n.parentNode=(r=this[o]).parentNode;for(var c=-1,s=r.length;++c<s;)(a=r[c])?(n.push(e=t.call(a,a.__data__,c,o)),e&&"__data__"in a&&(e.__data__=a.__data__)):n.push(null)}return A(i)},xo.selectAll=function(t){var n,e,r=[];t=j(t);for(var a=-1,i=this.length;++a<i;)for(var o=this[a],u=-1,c=o.length;++u<c;)(e=o[u])&&(r.push(n=ao(t.call(e,e.__data__,u,a))),n.parentNode=e);return A(r)};var _o={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};eo.ns={prefix:_o,qualify:function(t){var n=t.indexOf(":"),e=t;return n>=0&&(e=t.slice(0,n),t=t.slice(n+1)),_o.hasOwnProperty(e)?{space:_o[e],local:t}:t}},xo.attr=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node();return t=eo.ns.qualify(t),t.local?e.getAttributeNS(t.space,t.local):e.getAttribute(t)}for(n in t)this.each(R(n,t[n]));return this}return this.each(R(t,n))},xo.classed=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node(),r=(t=P(t)).length,a=-1;if(n=e.classList){for(;++a<r;)if(!n.contains(t[a]))return!1}else for(n=e.getAttribute("class");++a<r;)if(!q(t[a]).test(n))return!1;return!0}for(n in t)this.each(L(n,t[n]));return this}return this.each(L(t,n))},xo.style=function(t,n,r){var a=arguments.length;if(3>a){if("string"!=typeof t){2>a&&(n="");for(r in t)this.each(D(r,t[r],n));return this}if(2>a){var i=this.node();return e(i).getComputedStyle(i,null).getPropertyValue(t)}r=""}return this.each(D(t,n,r))},xo.property=function(t,n){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(n in t)this.each(O(n,t[n]));return this}return this.each(O(t,n))},xo.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},xo.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},xo.append=function(t){return t=z(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},xo.insert=function(t,n){return t=z(t),n=N(n),this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})},xo.remove=function(){return this.each(I)},xo.data=function(t,n){function e(t,e){var r,a,i,o=t.length,f=e.length,h=Math.min(o,f),d=new Array(f),p=new Array(f),g=new Array(o);if(n){var v,m=new l,y=new Array(o);for(r=-1;++r<o;)m.has(v=n.call(a=t[r],a.__data__,r))?g[r]=a:m.set(v,a),y[r]=v;for(r=-1;++r<f;)(a=m.get(v=n.call(e,i=e[r],r)))?a!==!0&&(d[r]=a,a.__data__=i):p[r]=U(i),m.set(v,!0);for(r=-1;++r<o;)m.get(y[r])!==!0&&(g[r]=t[r])}else{for(r=-1;++r<h;)a=t[r],i=e[r],a?(a.__data__=i,d[r]=a):p[r]=U(i);for(;f>r;++r)p[r]=U(e[r]);for(;o>r;++r)g[r]=t[r]}p.update=d,p.parentNode=d.parentNode=g.parentNode=t.parentNode,u.push(p),c.push(d),s.push(g)}var r,a,i=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(r=this[0]).length);++i<o;)(a=r[i])&&(t[i]=a.__data__);return t}var u=X([]),c=A([]),s=A([]);if("function"==typeof t)for(;++i<o;)e(r=this[i],t.call(r,r.parentNode.__data__,i));else for(;++i<o;)e(r=this[i],t);return c.enter=function(){return u},c.exit=function(){return s},c},xo.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},xo.filter=function(t){var n,e,r,a=[];"function"!=typeof t&&(t=H(t));for(var i=0,o=this.length;o>i;i++){a.push(n=[]),n.parentNode=(e=this[i]).parentNode;for(var u=0,c=e.length;c>u;u++)(r=e[u])&&t.call(r,r.__data__,u,i)&&n.push(r)}return A(a)},xo.order=function(){for(var t=-1,n=this.length;++t<n;)for(var e,r=this[t],a=r.length-1,i=r[a];--a>=0;)(e=r[a])&&(i&&i!==e.nextSibling&&i.parentNode.insertBefore(e,i),i=e);return this},xo.sort=function(t){t=G.apply(this,arguments);for(var n=-1,e=this.length;++n<e;)this[n].sort(t);return this.order()},xo.each=function(t){return B(this,function(n,e,r){t.call(n,n.__data__,e,r)})},xo.call=function(t){var n=ao(arguments);return t.apply(n[0]=this,n),this},xo.empty=function(){return!this.node()},xo.node=function(){for(var t=0,n=this.length;n>t;t++)for(var e=this[t],r=0,a=e.length;a>r;r++){var i=e[r];if(i)return i}return null},xo.size=function(){var t=0;return B(this,function(){++t}),t};var ko=[];eo.selection.enter=X,eo.selection.enter.prototype=ko,ko.append=xo.append,ko.empty=xo.empty,ko.node=xo.node,ko.call=xo.call,ko.size=xo.size,ko.select=function(t){for(var n,e,r,a,i,o=[],u=-1,c=this.length;++u<c;){r=(a=this[u]).update,o.push(n=[]),n.parentNode=a.parentNode;for(var s=-1,l=a.length;++s<l;)(i=a[s])?(n.push(r[s]=e=t.call(a.parentNode,i.__data__,s,u)),e.__data__=i.__data__):n.push(null)}return A(o)},ko.insert=function(t,n){return arguments.length<2&&(n=W(this)),xo.insert.call(this,t,n)},eo.select=function(n){var e;return"string"==typeof n?(e=[Mo(n,io)],e.parentNode=io.documentElement):(e=[n],e.parentNode=t(n)),A([e])},eo.selectAll=function(t){var n;return"string"==typeof t?(n=ao(bo(t,io)),n.parentNode=io.documentElement):(n=t,n.parentNode=null),A([n])},xo.on=function(t,n,e){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(n=!1);for(e in t)this.each(Q(e,t[e],n));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;e=!1}return this.each(Q(t,n,e))};var Eo=eo.map({mouseenter:"mouseover",mouseleave:"mouseout"});io&&Eo.forEach(function(t){"on"+t in io&&Eo.remove(t)});var To,So=0;eo.mouse=function(t){return J(t,T())};var Ao=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;eo.touch=function(t,n,e){if(arguments.length<3&&(e=n,n=T().changedTouches),n)for(var r,a=0,i=n.length;i>a;++a)if((r=n[a]).identifier===e)return J(t,r)},eo.behavior.drag=function(){function t(){this.on("mousedown.drag",i).on("touchstart.drag",o)}function n(t,n,e,i,o){return function(){function u(){var t,e,r=n(h,g);r&&(t=r[0]-M[0],e=r[1]-M[1],p|=t|e,M=r,d({type:"drag",x:r[0]+s[0],y:r[1]+s[1],dx:t,dy:e}))}function c(){n(h,g)&&(m.on(i+v,null).on(o+v,null),y(p&&eo.event.target===f),d({type:"dragend"}))}var s,l=this,f=eo.event.target,h=l.parentNode,d=r.of(l,arguments),p=0,g=t(),v=".drag"+(null==g?"":"-"+g),m=eo.select(e(f)).on(i+v,u).on(o+v,c),y=Y(f),M=n(h,g);a?(s=a.apply(l,arguments),s=[s.x-M[0],s.y-M[1]]):s=[0,0],d({type:"dragstart"})}}var r=S(t,"drag","dragstart","dragend"),a=null,i=n(x,eo.mouse,e,"mousemove","mouseup"),o=n(K,eo.touch,M,"touchmove","touchend");return t.origin=function(n){return arguments.length?(a=n,t):a},eo.rebind(t,r,"on")},eo.touches=function(t,n){return arguments.length<2&&(n=T().touches),n?ao(n).map(function(n){var e=J(t,n);return e.identifier=n.identifier,e}):[]};var No=1e-6,jo=No*No,Ro=Math.PI,Co=2*Ro,qo=Co-No,Po=Ro/2,Lo=Ro/180,Fo=180/Ro,Do=Math.SQRT2,Oo=2,zo=4;eo.interpolateZoom=function(t,n){function e(t){var n=t*y;if(m){var e=at(g),o=i/(Oo*h)*(e*it(Do*n+g)-rt(g));return[r+o*s,a+o*l,i*e/at(Do*n+g)]}return[r+t*s,a+t*l,i*Math.exp(Do*n)]}var r=t[0],a=t[1],i=t[2],o=n[0],u=n[1],c=n[2],s=o-r,l=u-a,f=s*s+l*l,h=Math.sqrt(f),d=(c*c-i*i+zo*f)/(2*i*Oo*h),p=(c*c-i*i-zo*f)/(2*c*Oo*h),g=Math.log(Math.sqrt(d*d+1)-d),v=Math.log(Math.sqrt(p*p+1)-p),m=v-g,y=(m||Math.log(c/i))/Do;return e.duration=1e3*y,e},eo.behavior.zoom=function(){function t(t){t.on(R,f).on(Uo+".zoom",d).on("dblclick.zoom",p).on(P,h)}function n(t){return[(t[0]-k.x)/k.k,(t[1]-k.y)/k.k]}function r(t){return[t[0]*k.k+k.x,t[1]*k.k+k.y]}function a(t){k.k=Math.max(A[0],Math.min(A[1],t))}function i(t,n){n=r(n),k.x+=t[0]-n[0],k.y+=t[1]-n[1]}function o(n,e,r,o){n.__chart__={x:k.x,y:k.y,k:k.k},a(Math.pow(2,o)),i(v=e,r),n=eo.select(n),N>0&&(n=n.transition().duration(N)),n.call(t.event)}function u(){w&&w.domain(b.range().map(function(t){return(t-k.x)/k.k}).map(b.invert)),_&&_.domain(x.range().map(function(t){return(t-k.y)/k.k}).map(x.invert))}function c(t){j++||t({type:"zoomstart"})}function s(t){u(),t({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function l(t){--j||(t({type:"zoomend"}),v=null)}function f(){function t(){f=1,i(eo.mouse(a),d),s(u)}function r(){h.on(C,null).on(q,null),p(f&&eo.event.target===o),l(u)}var a=this,o=eo.event.target,u=L.of(a,arguments),f=0,h=eo.select(e(a)).on(C,t).on(q,r),d=n(eo.mouse(a)),p=Y(a);Lc.call(a),c(u)}function h(){function t(){var t=eo.touches(p);return d=k.k,t.forEach(function(t){t.identifier in v&&(v[t.identifier]=n(t))}),t}function e(){var n=eo.event.target;eo.select(n).on(b,r).on(w,u),x.push(n);for(var e=eo.event.changedTouches,a=0,i=e.length;i>a;++a)v[e[a].identifier]=null;var c=t(),s=Date.now();if(1===c.length){if(500>s-M){var l=c[0];o(p,l,v[l.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),E()}M=s}else if(c.length>1){var l=c[0],f=c[1],h=l[0]-f[0],d=l[1]-f[1];m=h*h+d*d}}function r(){var t,n,e,r,o=eo.touches(p);Lc.call(p);for(var u=0,c=o.length;c>u;++u,r=null)if(e=o[u],r=v[e.identifier]){if(n)break;t=e,n=r}if(r){var l=(l=e[0]-t[0])*l+(l=e[1]-t[1])*l,f=m&&Math.sqrt(l/m);t=[(t[0]+e[0])/2,(t[1]+e[1])/2],n=[(n[0]+r[0])/2,(n[1]+r[1])/2],a(f*d)}M=null,i(t,n),s(g)}function u(){if(eo.event.touches.length){for(var n=eo.event.changedTouches,e=0,r=n.length;r>e;++e)delete v[n[e].identifier];for(var a in v)return void t()}eo.selectAll(x).on(y,null),_.on(R,f).on(P,h),T(),l(g)}var d,p=this,g=L.of(p,arguments),v={},m=0,y=".zoom-"+eo.event.changedTouches[0].identifier,b="touchmove"+y,w="touchend"+y,x=[],_=eo.select(p),T=Y(p);e(),c(g),_.on(R,null).on(P,e)}function d(){var t=L.of(this,arguments);y?clearTimeout(y):(Lc.call(this),g=n(v=m||eo.mouse(this)),c(t)),y=setTimeout(function(){y=null,l(t)},50),E(),a(Math.pow(2,.002*Io())*k.k),i(v,g),s(t)}function p(){var t=eo.mouse(this),e=Math.log(k.k)/Math.LN2;o(this,t,n(t),eo.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var g,v,m,y,M,b,w,x,_,k={x:0,y:0,k:1},T=[960,500],A=Ho,N=250,j=0,R="mousedown.zoom",C="mousemove.zoom",q="mouseup.zoom",P="touchstart.zoom",L=S(t,"zoomstart","zoom","zoomend");return Uo||(Uo="onwheel"in io?(Io=function(){return-eo.event.deltaY*(eo.event.deltaMode?120:1)},"wheel"):"onmousewheel"in io?(Io=function(){return eo.event.wheelDelta},"mousewheel"):(Io=function(){return-eo.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=L.of(this,arguments),n=k;qc?eo.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},c(t)}).tween("zoom:zoom",function(){var e=T[0],r=T[1],a=v?v[0]:e/2,i=v?v[1]:r/2,o=eo.interpolateZoom([(a-k.x)/k.k,(i-k.y)/k.k,e/k.k],[(a-n.x)/n.k,(i-n.y)/n.k,e/n.k]);return function(n){var r=o(n),u=e/r[2];this.__chart__=k={x:a-r[0]*u,y:i-r[1]*u,k:u},s(t)}}).each("interrupt.zoom",function(){l(t)}).each("end.zoom",function(){l(t)}):(this.__chart__=k,c(t),s(t),l(t))})},t.translate=function(n){return arguments.length?(k={x:+n[0],y:+n[1],k:k.k},u(),t):[k.x,k.y]},t.scale=function(n){return arguments.length?(k={x:k.x,y:k.y,k:+n},u(),t):k.k},t.scaleExtent=function(n){return arguments.length?(A=null==n?Ho:[+n[0],+n[1]],t):A},t.center=function(n){return arguments.length?(m=n&&[+n[0],+n[1]],t):m},t.size=function(n){return arguments.length?(T=n&&[+n[0],+n[1]],t):T},t.duration=function(n){return arguments.length?(N=+n,t):N},t.x=function(n){return arguments.length?(w=n,b=n.copy(),k={x:0,y:0,k:1},t):w},t.y=function(n){return arguments.length?(_=n,x=n.copy(),k={x:0,y:0,k:1},t):_},eo.rebind(t,L,"on")};var Io,Uo,Ho=[0,1/0];eo.color=ut,ut.prototype.toString=function(){return this.rgb()+""},eo.hsl=ct;var Go=ct.prototype=new ut;Go.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new ct(this.h,this.s,this.l/t)},Go.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new ct(this.h,this.s,t*this.l)},Go.rgb=function(){return st(this.h,this.s,this.l)},eo.hcl=lt;var Bo=lt.prototype=new ut;Bo.brighter=function(t){return new lt(this.h,this.c,Math.min(100,this.l+Xo*(arguments.length?t:1)))},Bo.darker=function(t){return new lt(this.h,this.c,Math.max(0,this.l-Xo*(arguments.length?t:1)))},Bo.rgb=function(){return ft(this.h,this.c,this.l).rgb()},eo.lab=ht;var Xo=18,Wo=.95047,Qo=1,$o=1.08883,Vo=ht.prototype=new ut;Vo.brighter=function(t){return new ht(Math.min(100,this.l+Xo*(arguments.length?t:1)),this.a,this.b)},Vo.darker=function(t){return new ht(Math.max(0,this.l-Xo*(arguments.length?t:1)),this.a,this.b)},Vo.rgb=function(){return dt(this.l,this.a,this.b)},eo.rgb=yt;var Yo=yt.prototype=new ut;Yo.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var n=this.r,e=this.g,r=this.b,a=30;return n||e||r?(n&&a>n&&(n=a),e&&a>e&&(e=a),r&&a>r&&(r=a),new yt(Math.min(255,n/t),Math.min(255,e/t),Math.min(255,r/t))):new yt(a,a,a)},Yo.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new yt(t*this.r,t*this.g,t*this.b)},Yo.hsl=function(){return _t(this.r,this.g,this.b)},Yo.toString=function(){return"#"+wt(this.r)+wt(this.g)+wt(this.b)};var Jo=eo.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Jo.forEach(function(t,n){Jo.set(t,Mt(n))}),eo.functor=St,eo.xhr=At(M),eo.dsv=function(t,n){function e(t,e,i){arguments.length<3&&(i=e,e=null);var o=Nt(t,n,null==e?r:a(e),i);return o.row=function(t){return arguments.length?o.response(null==(e=t)?r:a(t)):e},o}function r(t){return e.parse(t.responseText)}function a(t){return function(n){return e.parse(n.responseText,t)}}function i(n){return n.map(o).join(t)}function o(t){return u.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var u=new RegExp('["'+t+"\n]"),c=t.charCodeAt(0);return e.parse=function(t,n){var r;return e.parseRows(t,function(t,e){if(r)return r(t,e-1);var a=new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}");r=n?function(t,e){return n(a(t),e)}:a})},e.parseRows=function(t,n){function e(){if(l>=s)return o;if(a)return a=!1,i;var n=l;if(34===t.charCodeAt(n)){for(var e=n;e++<s;)if(34===t.charCodeAt(e)){if(34!==t.charCodeAt(e+1))break;++e}l=e+2;var r=t.charCodeAt(e+1);return 13===r?(a=!0,10===t.charCodeAt(e+2)&&++l):10===r&&(a=!0),t.slice(n+1,e).replace(/""/g,'"')}for(;s>l;){var r=t.charCodeAt(l++),u=1;if(10===r)a=!0;else if(13===r)a=!0,10===t.charCodeAt(l)&&(++l,++u);else if(r!==c)continue;return t.slice(n,l-u)}return t.slice(n)}for(var r,a,i={},o={},u=[],s=t.length,l=0,f=0;(r=e())!==o;){for(var h=[];r!==i&&r!==o;)h.push(r),r=e();n&&null==(h=n(h,f++))||u.push(h)}return u},e.format=function(n){if(Array.isArray(n[0]))return e.formatRows(n);var r=new y,a=[];return n.forEach(function(t){for(var n in t)r.has(n)||a.push(r.add(n))}),[a.map(o).join(t)].concat(n.map(function(n){return a.map(function(t){return o(n[t])}).join(t)})).join("\n")},e.formatRows=function(t){return t.map(i).join("\n")},e},eo.csv=eo.dsv(",","text/csv"),eo.tsv=eo.dsv("	","text/tab-separated-values");var Ko,Zo,tu,nu,eu,ru=this[w(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};eo.timer=function(t,n,e){var r=arguments.length;2>r&&(n=0),3>r&&(e=Date.now());var a=e+n,i={c:t,t:a,f:!1,n:null};Zo?Zo.n=i:Ko=i,Zo=i,tu||(nu=clearTimeout(nu),tu=1,ru(Ct))},eo.timer.flush=function(){qt(),Pt()},eo.round=function(t,n){return n?Math.round(t*(n=Math.pow(10,n)))/n:Math.round(t)};var au=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Ft);eo.formatPrefix=function(t,n){var e=0;return t&&(0>t&&(t*=-1),n&&(t=eo.round(t,Lt(t,n))),e=1+Math.floor(1e-12+Math.log(t)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),au[8+e/3]};var iu=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ou=eo.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,n){return t.toPrecision(n)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},r:function(t,n){return(t=eo.round(t,Lt(t,n))).toFixed(Math.max(0,Math.min(20,Lt(t*(1+1e-15),n))))}}),uu=eo.time={},cu=Date;zt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){su.setUTCDate.apply(this._,arguments)},setDay:function(){su.setUTCDay.apply(this._,arguments)},setFullYear:function(){su.setUTCFullYear.apply(this._,arguments)},setHours:function(){su.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){su.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){su.setUTCMinutes.apply(this._,arguments)},setMonth:function(){su.setUTCMonth.apply(this._,arguments)},setSeconds:function(){su.setUTCSeconds.apply(this._,arguments)},setTime:function(){su.setTime.apply(this._,arguments)}};var su=Date.prototype;uu.year=It(function(t){return t=uu.day(t),t.setMonth(0,1),t},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t){return t.getFullYear()}),uu.years=uu.year.range,uu.years.utc=uu.year.utc.range,uu.day=It(function(t){var n=new cu(2e3,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n},function(t,n){t.setDate(t.getDate()+n)},function(t){return t.getDate()-1}),uu.days=uu.day.range,uu.days.utc=uu.day.utc.range,uu.dayOfYear=function(t){var n=uu.year(t);return Math.floor((t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=uu[t]=It(function(t){return(t=uu.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,n){t.setDate(t.getDate()+7*Math.floor(n))},function(t){var e=uu.year(t).getDay();return Math.floor((uu.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});uu[t+"s"]=e.range,uu[t+"s"].utc=e.utc.range,uu[t+"OfYear"]=function(t){var e=uu.year(t).getDay();return Math.floor((uu.dayOfYear(t)+(e+n)%7)/7)}}),uu.week=uu.sunday,uu.weeks=uu.sunday.range,uu.weeks.utc=uu.sunday.utc.range,uu.weekOfYear=uu.sundayOfYear;var lu={"-":"",_:" ",0:"0"},fu=/^\s*\d+/,hu=/^%/;eo.locale=function(t){return{numberFormat:Dt(t),timeFormat:Ht(t)}};var du=eo.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});eo.format=du.numberFormat,eo.geo={},ln.prototype={s:0,t:0,add:function(t){fn(t,this.t,pu),fn(pu.s,this.s,this),this.s?this.t+=pu.t:this.s=pu.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var pu=new ln;eo.geo.stream=function(t,n){t&&gu.hasOwnProperty(t.type)?gu[t.type](t,n):hn(t,n)};var gu={Feature:function(t,n){hn(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,a=e.length;++r<a;)hn(e[r].geometry,n)}},vu={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,a=e.length;++r<a;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){dn(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,a=e.length;++r<a;)dn(e[r],n,0)},Polygon:function(t,n){pn(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,a=e.length;++r<a;)pn(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,a=e.length;++r<a;)hn(e[r],n)}};eo.geo.area=function(t){return mu=0,eo.geo.stream(t,Mu),mu};var mu,yu=new ln,Mu={sphere:function(){mu+=4*Ro},point:x,lineStart:x,lineEnd:x,polygonStart:function(){yu.reset(),Mu.lineStart=gn},polygonEnd:function(){var t=2*yu;mu+=0>t?4*Ro+t:t,Mu.lineStart=Mu.lineEnd=Mu.point=x}};eo.geo.bounds=function(){function t(t,n){M.push(b=[l=t,h=t]),f>n&&(f=n),n>d&&(d=n)}function n(n,e){var r=vn([n*Lo,e*Lo]);if(m){var a=yn(m,r),i=[a[1],-a[0],0],o=yn(i,a);wn(o),o=xn(o);var c=n-p,s=c>0?1:-1,g=o[0]*Fo*s,v=ho(c)>180;if(v^(g>s*p&&s*n>g)){var y=o[1]*Fo;y>d&&(d=y)}else if(g=(g+360)%360-180,v^(g>s*p&&s*n>g)){var y=-o[1]*Fo;f>y&&(f=y)}else f>e&&(f=e),e>d&&(d=e);v?p>n?u(l,n)>u(l,h)&&(h=n):u(n,h)>u(l,h)&&(l=n):h>=l?(l>n&&(l=n),n>h&&(h=n)):n>p?u(l,n)>u(l,h)&&(h=n):u(n,h)>u(l,h)&&(l=n)}else t(n,e);m=r,p=n}function e(){w.point=n}function r(){b[0]=l,b[1]=h,w.point=t,m=null}function a(t,e){if(m){var r=t-p;y+=ho(r)>180?r+(r>0?360:-360):r}else g=t,v=e;Mu.point(t,e),n(t,e)}function i(){Mu.lineStart()}function o(){a(g,v),Mu.lineEnd(),ho(y)>No&&(l=-(h=180)),b[0]=l,b[1]=h,m=null}function u(t,n){return(n-=t)<0?n+360:n}function c(t,n){return t[0]-n[0]}function s(t,n){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t}var l,f,h,d,p,g,v,m,y,M,b,w={point:t,lineStart:e,lineEnd:r,polygonStart:function(){w.point=a,w.lineStart=i,w.lineEnd=o,y=0,Mu.polygonStart()},polygonEnd:function(){Mu.polygonEnd(),w.point=t,w.lineStart=e,w.lineEnd=r,0>yu?(l=-(h=180),f=-(d=90)):y>No?d=90:-No>y&&(f=-90),b[0]=l,b[1]=h}};return function(t){d=h=-(l=f=1/0),M=[],eo.geo.stream(t,w);var n=M.length;if(n){M.sort(c);for(var e,r=1,a=M[0],i=[a];n>r;++r)e=M[r],s(e[0],a)||s(e[1],a)?(u(a[0],e[1])>u(a[0],a[1])&&(a[1]=e[1]),u(e[0],a[1])>u(a[0],a[1])&&(a[0]=e[0])):i.push(a=e);for(var o,e,p=-(1/0),n=i.length-1,r=0,a=i[n];n>=r;a=e,++r)e=i[r],(o=u(a[1],e[0]))>p&&(p=o,l=e[0],h=a[1])}return M=b=null,l===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[l,f],[h,d]]}}(),eo.geo.centroid=function(t){bu=wu=xu=_u=ku=Eu=Tu=Su=Au=Nu=ju=0,eo.geo.stream(t,Ru);var n=Au,e=Nu,r=ju,a=n*n+e*e+r*r;return jo>a&&(n=Eu,e=Tu,r=Su,No>wu&&(n=xu,e=_u,r=ku),a=n*n+e*e+r*r,jo>a)?[NaN,NaN]:[Math.atan2(e,n)*Fo,et(r/Math.sqrt(a))*Fo]};var bu,wu,xu,_u,ku,Eu,Tu,Su,Au,Nu,ju,Ru={sphere:x,point:kn,lineStart:Tn,lineEnd:Sn,polygonStart:function(){Ru.lineStart=An},polygonEnd:function(){Ru.lineStart=Tn}},Cu=Pn(jn,On,In,[-Ro,-Ro/2]),qu=1e9;eo.geo.clipExtent=function(){var t,n,e,r,a,i,o={stream:function(t){return a&&(a.valid=!1),a=i(t),a.valid=!0,a},extent:function(u){return arguments.length?(i=Bn(t=+u[0][0],n=+u[0][1],e=+u[1][0],r=+u[1][1]),a&&(a.valid=!1,
a=null),o):[[t,n],[e,r]]}};return o.extent([[0,0],[960,500]])},(eo.geo.conicEqualArea=function(){return Xn(Wn)}).raw=Wn,eo.geo.albers=function(){return eo.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},eo.geo.albersUsa=function(){function t(t){var i=t[0],o=t[1];return n=null,e(i,o),n||(r(i,o),n)||a(i,o),n}var n,e,r,a,i=eo.geo.albers(),o=eo.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=eo.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){n=[t,e]}};return t.invert=function(t){var n=i.scale(),e=i.translate(),r=(t[0]-e[0])/n,a=(t[1]-e[1])/n;return(a>=.12&&.234>a&&r>=-.425&&-.214>r?o:a>=.166&&.234>a&&r>=-.214&&-.115>r?u:i).invert(t)},t.stream=function(t){var n=i.stream(t),e=o.stream(t),r=u.stream(t);return{point:function(t,a){n.point(t,a),e.point(t,a),r.point(t,a)},sphere:function(){n.sphere(),e.sphere(),r.sphere()},lineStart:function(){n.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){n.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){n.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){n.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},t.precision=function(n){return arguments.length?(i.precision(n),o.precision(n),u.precision(n),t):i.precision()},t.scale=function(n){return arguments.length?(i.scale(n),o.scale(.35*n),u.scale(n),t.translate(i.translate())):i.scale()},t.translate=function(n){if(!arguments.length)return i.translate();var s=i.scale(),l=+n[0],f=+n[1];return e=i.translate(n).clipExtent([[l-.455*s,f-.238*s],[l+.455*s,f+.238*s]]).stream(c).point,r=o.translate([l-.307*s,f+.201*s]).clipExtent([[l-.425*s+No,f+.12*s+No],[l-.214*s-No,f+.234*s-No]]).stream(c).point,a=u.translate([l-.205*s,f+.212*s]).clipExtent([[l-.214*s+No,f+.166*s+No],[l-.115*s-No,f+.234*s-No]]).stream(c).point,t},t.scale(1070)};var Pu,Lu,Fu,Du,Ou,zu,Iu={point:x,lineStart:x,lineEnd:x,polygonStart:function(){Lu=0,Iu.lineStart=Qn},polygonEnd:function(){Iu.lineStart=Iu.lineEnd=Iu.point=x,Pu+=ho(Lu/2)}},Uu={point:$n,lineStart:x,lineEnd:x,polygonStart:x,polygonEnd:x},Hu={point:Jn,lineStart:Kn,lineEnd:Zn,polygonStart:function(){Hu.lineStart=te},polygonEnd:function(){Hu.point=Jn,Hu.lineStart=Kn,Hu.lineEnd=Zn}};eo.geo.path=function(){function t(t){return t&&("function"==typeof u&&i.pointRadius(+u.apply(this,arguments)),o&&o.valid||(o=a(i)),eo.geo.stream(t,o)),i.result()}function n(){return o=null,t}var e,r,a,i,o,u=4.5;return t.area=function(t){return Pu=0,eo.geo.stream(t,a(Iu)),Pu},t.centroid=function(t){return xu=_u=ku=Eu=Tu=Su=Au=Nu=ju=0,eo.geo.stream(t,a(Hu)),ju?[Au/ju,Nu/ju]:Su?[Eu/Su,Tu/Su]:ku?[xu/ku,_u/ku]:[NaN,NaN]},t.bounds=function(t){return Ou=zu=-(Fu=Du=1/0),eo.geo.stream(t,a(Uu)),[[Fu,Du],[Ou,zu]]},t.projection=function(t){return arguments.length?(a=(e=t)?t.stream||re(t):M,n()):e},t.context=function(t){return arguments.length?(i=null==(r=t)?new Vn:new ne(t),"function"!=typeof u&&i.pointRadius(u),n()):r},t.pointRadius=function(n){return arguments.length?(u="function"==typeof n?n:(i.pointRadius(+n),+n),t):u},t.projection(eo.geo.albersUsa()).context(null)},eo.geo.transform=function(t){return{stream:function(n){var e=new ae(n);for(var r in t)e[r]=t[r];return e}}},ae.prototype={point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},eo.geo.projection=oe,eo.geo.projectionMutator=ue,(eo.geo.equirectangular=function(){return oe(se)}).raw=se.invert=se,eo.geo.rotation=function(t){function n(n){return n=t(n[0]*Lo,n[1]*Lo),n[0]*=Fo,n[1]*=Fo,n}return t=fe(t[0]%360*Lo,t[1]*Lo,t.length>2?t[2]*Lo:0),n.invert=function(n){return n=t.invert(n[0]*Lo,n[1]*Lo),n[0]*=Fo,n[1]*=Fo,n},n},le.invert=se,eo.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,n=fe(-t[0]*Lo,-t[1]*Lo,0).invert,a=[];return e(null,null,1,{point:function(t,e){a.push(t=n(t,e)),t[0]*=Fo,t[1]*=Fo}}),{type:"Polygon",coordinates:[a]}}var n,e,r=[0,0],a=6;return t.origin=function(n){return arguments.length?(r=n,t):r},t.angle=function(r){return arguments.length?(e=ge((n=+r)*Lo,a*Lo),t):n},t.precision=function(r){return arguments.length?(e=ge(n*Lo,(a=+r)*Lo),t):a},t.angle(90)},eo.geo.distance=function(t,n){var e,r=(n[0]-t[0])*Lo,a=t[1]*Lo,i=n[1]*Lo,o=Math.sin(r),u=Math.cos(r),c=Math.sin(a),s=Math.cos(a),l=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((e=f*o)*e+(e=s*l-c*f*u)*e),c*l+s*f*u)},eo.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return eo.range(Math.ceil(i/v)*v,a,v).map(h).concat(eo.range(Math.ceil(s/m)*m,c,m).map(d)).concat(eo.range(Math.ceil(r/p)*p,e,p).filter(function(t){return ho(t%v)>No}).map(l)).concat(eo.range(Math.ceil(u/g)*g,o,g).filter(function(t){return ho(t%m)>No}).map(f))}var e,r,a,i,o,u,c,s,l,f,h,d,p=10,g=p,v=90,m=360,y=2.5;return t.lines=function(){return n().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(d(c).slice(1),h(a).reverse().slice(1),d(s).reverse().slice(1))]}},t.extent=function(n){return arguments.length?t.majorExtent(n).minorExtent(n):t.minorExtent()},t.majorExtent=function(n){return arguments.length?(i=+n[0][0],a=+n[1][0],s=+n[0][1],c=+n[1][1],i>a&&(n=i,i=a,a=n),s>c&&(n=s,s=c,c=n),t.precision(y)):[[i,s],[a,c]]},t.minorExtent=function(n){return arguments.length?(r=+n[0][0],e=+n[1][0],u=+n[0][1],o=+n[1][1],r>e&&(n=r,r=e,e=n),u>o&&(n=u,u=o,o=n),t.precision(y)):[[r,u],[e,o]]},t.step=function(n){return arguments.length?t.majorStep(n).minorStep(n):t.minorStep()},t.majorStep=function(n){return arguments.length?(v=+n[0],m=+n[1],t):[v,m]},t.minorStep=function(n){return arguments.length?(p=+n[0],g=+n[1],t):[p,g]},t.precision=function(n){return arguments.length?(y=+n,l=me(u,o,90),f=ye(r,e,y),h=me(s,c,90),d=ye(i,a,y),t):y},t.majorExtent([[-180,-90+No],[180,90-No]]).minorExtent([[-180,-80-No],[180,80+No]])},eo.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[n||r.apply(this,arguments),e||a.apply(this,arguments)]}}var n,e,r=Me,a=be;return t.distance=function(){return eo.geo.distance(n||r.apply(this,arguments),e||a.apply(this,arguments))},t.source=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.target=function(n){return arguments.length?(a=n,e="function"==typeof n?null:n,t):a},t.precision=function(){return arguments.length?t:0},t},eo.geo.interpolate=function(t,n){return we(t[0]*Lo,t[1]*Lo,n[0]*Lo,n[1]*Lo)},eo.geo.length=function(t){return Gu=0,eo.geo.stream(t,Bu),Gu};var Gu,Bu={sphere:x,point:x,lineStart:xe,lineEnd:x,polygonStart:x,polygonEnd:x},Xu=_e(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(eo.geo.azimuthalEqualArea=function(){return oe(Xu)}).raw=Xu;var Wu=_e(function(t){var n=Math.acos(t);return n&&n/Math.sin(n)},M);(eo.geo.azimuthalEquidistant=function(){return oe(Wu)}).raw=Wu,(eo.geo.conicConformal=function(){return Xn(ke)}).raw=ke,(eo.geo.conicEquidistant=function(){return Xn(Ee)}).raw=Ee;var Qu=_e(function(t){return 1/t},Math.atan);(eo.geo.gnomonic=function(){return oe(Qu)}).raw=Qu,Te.invert=function(t,n){return[t,2*Math.atan(Math.exp(n))-Po]},(eo.geo.mercator=function(){return Se(Te)}).raw=Te;var $u=_e(function(){return 1},Math.asin);(eo.geo.orthographic=function(){return oe($u)}).raw=$u;var Vu=_e(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(eo.geo.stereographic=function(){return oe(Vu)}).raw=Vu,Ae.invert=function(t,n){return[-n,2*Math.atan(Math.exp(t))-Po]},(eo.geo.transverseMercator=function(){var t=Se(Ae),n=t.center,e=t.rotate;return t.center=function(t){return t?n([-t[1],t[0]]):(t=n(),[t[1],-t[0]])},t.rotate=function(t){return t?e([t[0],t[1],t.length>2?t[2]+90:90]):(t=e(),[t[0],t[1],t[2]-90])},e([0,0,90])}).raw=Ae,eo.geom={},eo.geom.hull=function(t){function n(t){if(t.length<3)return[];var n,a=St(e),i=St(r),o=t.length,u=[],c=[];for(n=0;o>n;n++)u.push([+a.call(this,t[n],n),+i.call(this,t[n],n),n]);for(u.sort(Ce),n=0;o>n;n++)c.push([u[n][0],-u[n][1]]);var s=Re(u),l=Re(c),f=l[0]===s[0],h=l[l.length-1]===s[s.length-1],d=[];for(n=s.length-1;n>=0;--n)d.push(t[u[s[n]][2]]);for(n=+f;n<l.length-h;++n)d.push(t[u[l[n]][2]]);return d}var e=Ne,r=je;return arguments.length?n(t):(n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n)},eo.geom.polygon=function(t){return yo(t,Yu),t};var Yu=eo.geom.polygon.prototype=[];Yu.area=function(){for(var t,n=-1,e=this.length,r=this[e-1],a=0;++n<e;)t=r,r=this[n],a+=t[1]*r[0]-t[0]*r[1];return.5*a},Yu.centroid=function(t){var n,e,r=-1,a=this.length,i=0,o=0,u=this[a-1];for(arguments.length||(t=-1/(6*this.area()));++r<a;)n=u,u=this[r],e=n[0]*u[1]-u[0]*n[1],i+=(n[0]+u[0])*e,o+=(n[1]+u[1])*e;return[i*t,o*t]},Yu.clip=function(t){for(var n,e,r,a,i,o,u=Le(t),c=-1,s=this.length-Le(this),l=this[s-1];++c<s;){for(n=t.slice(),t.length=0,a=this[c],i=n[(r=n.length-u)-1],e=-1;++e<r;)o=n[e],qe(o,l,a)?(qe(i,l,a)||t.push(Pe(i,o,l,a)),t.push(o)):qe(i,l,a)&&t.push(Pe(i,o,l,a)),i=o;u&&t.push(t[0]),l=a}return t};var Ju,Ku,Zu,tc,nc,ec=[],rc=[];Ge.prototype.prepare=function(){for(var t,n=this.edges,e=n.length;e--;)t=n[e].edge,t.b&&t.a||n.splice(e,1);return n.sort(Xe),n.length},nr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},er.prototype={insert:function(t,n){var e,r,a;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;e=t}else this._?(t=or(this._),n.P=null,n.N=t,t.P=t.L=n,e=t):(n.P=n.N=null,this._=n,e=null);for(n.L=n.R=null,n.U=e,n.C=!0,t=n;e&&e.C;)r=e.U,e===r.L?(a=r.R,a&&a.C?(e.C=a.C=!1,r.C=!0,t=r):(t===e.R&&(ar(this,e),t=e,e=t.U),e.C=!1,r.C=!0,ir(this,r))):(a=r.L,a&&a.C?(e.C=a.C=!1,r.C=!0,t=r):(t===e.L&&(ir(this,e),t=e,e=t.U),e.C=!1,r.C=!0,ar(this,r))),e=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,e,r,a=t.U,i=t.L,o=t.R;if(e=i?o?or(o):i:o,a?a.L===t?a.L=e:a.R=e:this._=e,i&&o?(r=e.C,e.C=t.C,e.L=i,i.U=e,e!==o?(a=e.U,e.U=t.U,t=e.R,a.L=t,e.R=o,o.U=e):(e.U=a,a=e,t=e.R)):(r=t.C,t=e),t&&(t.U=a),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===a.L){if(n=a.R,n.C&&(n.C=!1,a.C=!0,ar(this,a),n=a.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,ir(this,n),n=a.R),n.C=a.C,a.C=n.R.C=!1,ar(this,a),t=this._;break}}else if(n=a.L,n.C&&(n.C=!1,a.C=!0,ir(this,a),n=a.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,ar(this,n),n=a.L),n.C=a.C,a.C=n.L.C=!1,ir(this,a),t=this._;break}n.C=!0,t=a,a=a.U}while(!t.C);t&&(t.C=!1)}}},eo.geom.voronoi=function(t){function n(t){var n=new Array(t.length),r=u[0][0],a=u[0][1],i=u[1][0],o=u[1][1];return ur(e(t),u).cells.forEach(function(e,u){var c=e.edges,s=e.site,l=n[u]=c.length?c.map(function(t){var n=t.start();return[n.x,n.y]}):s.x>=r&&s.x<=i&&s.y>=a&&s.y<=o?[[r,o],[i,o],[i,a],[r,a]]:[];l.point=t[u]}),n}function e(t){return t.map(function(t,n){return{x:Math.round(i(t,n)/No)*No,y:Math.round(o(t,n)/No)*No,i:n}})}var r=Ne,a=je,i=r,o=a,u=ac;return t?n(t):(n.links=function(t){return ur(e(t)).edges.filter(function(t){return t.l&&t.r}).map(function(n){return{source:t[n.l.i],target:t[n.r.i]}})},n.triangles=function(t){var n=[];return ur(e(t)).cells.forEach(function(e,r){for(var a,i,o=e.site,u=e.edges.sort(Xe),c=-1,s=u.length,l=u[s-1].edge,f=l.l===o?l.r:l.l;++c<s;)a=l,i=f,l=u[c].edge,f=l.l===o?l.r:l.l,r<i.i&&r<f.i&&sr(o,i,f)<0&&n.push([t[r],t[i.i],t[f.i]])}),n},n.x=function(t){return arguments.length?(i=St(r=t),n):r},n.y=function(t){return arguments.length?(o=St(a=t),n):a},n.clipExtent=function(t){return arguments.length?(u=null==t?ac:t,n):u===ac?null:u},n.size=function(t){return arguments.length?n.clipExtent(t&&[[0,0],t]):u===ac?null:u&&u[1]},n)};var ac=[[-1e6,-1e6],[1e6,1e6]];eo.geom.delaunay=function(t){return eo.geom.voronoi().triangles(t)},eo.geom.quadtree=function(t,n,e,r,a){function i(t){function i(t,n,e,r,a,i,o,u){if(!isNaN(e)&&!isNaN(r))if(t.leaf){var c=t.x,l=t.y;if(null!=c)if(ho(c-e)+ho(l-r)<.01)s(t,n,e,r,a,i,o,u);else{var f=t.point;t.x=t.y=t.point=null,s(t,f,c,l,a,i,o,u),s(t,n,e,r,a,i,o,u)}else t.x=e,t.y=r,t.point=n}else s(t,n,e,r,a,i,o,u)}function s(t,n,e,r,a,o,u,c){var s=.5*(a+u),l=.5*(o+c),f=e>=s,h=r>=l,d=h<<1|f;t.leaf=!1,t=t.nodes[d]||(t.nodes[d]=hr()),f?a=s:u=s,h?o=l:c=l,i(t,n,e,r,a,o,u,c)}var l,f,h,d,p,g,v,m,y,M=St(u),b=St(c);if(null!=n)g=n,v=e,m=r,y=a;else if(m=y=-(g=v=1/0),f=[],h=[],p=t.length,o)for(d=0;p>d;++d)l=t[d],l.x<g&&(g=l.x),l.y<v&&(v=l.y),l.x>m&&(m=l.x),l.y>y&&(y=l.y),f.push(l.x),h.push(l.y);else for(d=0;p>d;++d){var w=+M(l=t[d],d),x=+b(l,d);g>w&&(g=w),v>x&&(v=x),w>m&&(m=w),x>y&&(y=x),f.push(w),h.push(x)}var _=m-g,k=y-v;_>k?y=v+_:m=g+k;var E=hr();if(E.add=function(t){i(E,t,+M(t,++d),+b(t,d),g,v,m,y)},E.visit=function(t){dr(t,E,g,v,m,y)},E.find=function(t){return pr(E,t[0],t[1],g,v,m,y)},d=-1,null==n){for(;++d<p;)i(E,t[d],f[d],h[d],g,v,m,y);--d}else t.forEach(E.add);return f=h=t=l=null,E}var o,u=Ne,c=je;return(o=arguments.length)?(u=lr,c=fr,3===o&&(a=e,r=n,e=n=0),i(t)):(i.x=function(t){return arguments.length?(u=t,i):u},i.y=function(t){return arguments.length?(c=t,i):c},i.extent=function(t){return arguments.length?(null==t?n=e=r=a=null:(n=+t[0][0],e=+t[0][1],r=+t[1][0],a=+t[1][1]),i):null==n?null:[[n,e],[r,a]]},i.size=function(t){return arguments.length?(null==t?n=e=r=a=null:(n=e=0,r=+t[0],a=+t[1]),i):null==n?null:[r-n,a-e]},i)},eo.interpolateRgb=gr,eo.interpolateObject=vr,eo.interpolateNumber=mr,eo.interpolateString=yr;var ic=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oc=new RegExp(ic.source,"g");eo.interpolate=Mr,eo.interpolators=[function(t,n){var e=typeof n;return("string"===e?Jo.has(n.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(n)?gr:yr:n instanceof ut?gr:Array.isArray(n)?br:"object"===e&&isNaN(n)?vr:mr)(t,n)}],eo.interpolateArray=br;var uc=function(){return M},cc=eo.map({linear:uc,poly:Sr,quad:function(){return kr},cubic:function(){return Er},sin:function(){return Ar},exp:function(){return Nr},circle:function(){return jr},elastic:Rr,back:Cr,bounce:function(){return qr}}),sc=eo.map({in:M,out:xr,"in-out":_r,"out-in":function(t){return _r(xr(t))}});eo.ease=function(t){var n=t.indexOf("-"),e=n>=0?t.slice(0,n):t,r=n>=0?t.slice(n+1):"in";return e=cc.get(e)||uc,r=sc.get(r)||M,wr(r(e.apply(null,ro.call(arguments,1))))},eo.interpolateHcl=Pr,eo.interpolateHsl=Lr,eo.interpolateLab=Fr,eo.interpolateRound=Dr,eo.transform=function(t){var n=io.createElementNS(eo.ns.prefix.svg,"g");return(eo.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new Or(e?e.matrix:lc)})(t)},Or.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var lc={a:1,b:0,c:0,d:1,e:0,f:0};eo.interpolateTransform=Hr,eo.layout={},eo.layout.bundle=function(){return function(t){for(var n=[],e=-1,r=t.length;++e<r;)n.push(Xr(t[e]));return n}},eo.layout.chord=function(){function t(){var t,s,f,h,d,p={},g=[],v=eo.range(i),m=[];for(e=[],r=[],t=0,h=-1;++h<i;){for(s=0,d=-1;++d<i;)s+=a[h][d];g.push(s),m.push(eo.range(i)),t+=s}for(o&&v.sort(function(t,n){return o(g[t],g[n])}),u&&m.forEach(function(t,n){t.sort(function(t,e){return u(a[n][t],a[n][e])})}),t=(Co-l*i)/t,s=0,h=-1;++h<i;){for(f=s,d=-1;++d<i;){var y=v[h],M=m[y][d],b=a[y][M],w=s,x=s+=b*t;p[y+"-"+M]={index:y,subindex:M,startAngle:w,endAngle:x,value:b}}r[y]={index:y,startAngle:f,endAngle:s,value:(s-f)/t},s+=l}for(h=-1;++h<i;)for(d=h-1;++d<i;){var _=p[h+"-"+d],k=p[d+"-"+h];(_.value||k.value)&&e.push(_.value<k.value?{source:k,target:_}:{source:_,target:k})}c&&n()}function n(){e.sort(function(t,n){return c((t.source.value+t.target.value)/2,(n.source.value+n.target.value)/2)})}var e,r,a,i,o,u,c,s={},l=0;return s.matrix=function(t){return arguments.length?(i=(a=t)&&a.length,e=r=null,s):a},s.padding=function(t){return arguments.length?(l=t,e=r=null,s):l},s.sortGroups=function(t){return arguments.length?(o=t,e=r=null,s):o},s.sortSubgroups=function(t){return arguments.length?(u=t,e=null,s):u},s.sortChords=function(t){return arguments.length?(c=t,e&&n(),s):c},s.chords=function(){return e||t(),e},s.groups=function(){return r||t(),r},s},eo.layout.force=function(){function t(t){return function(n,e,r,a){if(n.point!==t){var i=n.cx-t.x,o=n.cy-t.y,u=a-e,c=i*i+o*o;if(c>u*u/v){if(p>c){var s=n.charge/c;t.px-=i*s,t.py-=o*s}return!0}if(n.point&&c&&p>c){var s=n.pointCharge/c;t.px-=i*s,t.py-=o*s}}return!n.charge}}function n(t){t.px=eo.event.x,t.py=eo.event.y,u.resume()}var e,r,a,i,o,u={},c=eo.dispatch("start","tick","end"),s=[1,1],l=.9,f=fc,h=hc,d=-30,p=dc,g=.1,v=.64,m=[],y=[];return u.tick=function(){if((r*=.99)<.005)return c.end({type:"end",alpha:r=0}),!0;var n,e,u,f,h,p,v,M,b,w=m.length,x=y.length;for(e=0;x>e;++e)u=y[e],f=u.source,h=u.target,M=h.x-f.x,b=h.y-f.y,(p=M*M+b*b)&&(p=r*i[e]*((p=Math.sqrt(p))-a[e])/p,M*=p,b*=p,h.x-=M*(v=f.weight/(h.weight+f.weight)),h.y-=b*v,f.x+=M*(v=1-v),f.y+=b*v);if((v=r*g)&&(M=s[0]/2,b=s[1]/2,e=-1,v))for(;++e<w;)u=m[e],u.x+=(M-u.x)*v,u.y+=(b-u.y)*v;if(d)for(Kr(n=eo.geom.quadtree(m),r,o),e=-1;++e<w;)(u=m[e]).fixed||n.visit(t(u));for(e=-1;++e<w;)u=m[e],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*l,u.y-=(u.py-(u.py=u.y))*l);c.tick({type:"tick",alpha:r})},u.nodes=function(t){return arguments.length?(m=t,u):m},u.links=function(t){return arguments.length?(y=t,u):y},u.size=function(t){return arguments.length?(s=t,u):s},u.linkDistance=function(t){return arguments.length?(f="function"==typeof t?t:+t,u):f},u.distance=u.linkDistance,u.linkStrength=function(t){return arguments.length?(h="function"==typeof t?t:+t,u):h},u.friction=function(t){return arguments.length?(l=+t,u):l},u.charge=function(t){return arguments.length?(d="function"==typeof t?t:+t,u):d},u.chargeDistance=function(t){return arguments.length?(p=t*t,u):Math.sqrt(p)},u.gravity=function(t){return arguments.length?(g=+t,u):g},u.theta=function(t){return arguments.length?(v=t*t,u):Math.sqrt(v)},u.alpha=function(t){return arguments.length?(t=+t,r?r=t>0?t:0:t>0&&(c.start({type:"start",alpha:r=t}),eo.timer(u.tick)),u):r},u.start=function(){function t(t,r){if(!e){for(e=new Array(c),u=0;c>u;++u)e[u]=[];for(u=0;l>u;++u){var a=y[u];e[a.source.index].push(a.target),e[a.target.index].push(a.source)}}for(var i,o=e[n],u=-1,s=o.length;++u<s;)if(!isNaN(i=o[u][t]))return i;return Math.random()*r}var n,e,r,c=m.length,l=y.length,p=s[0],g=s[1];for(n=0;c>n;++n)(r=m[n]).index=n,r.weight=0;for(n=0;l>n;++n)r=y[n],"number"==typeof r.source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(n=0;c>n;++n)r=m[n],isNaN(r.x)&&(r.x=t("x",p)),isNaN(r.y)&&(r.y=t("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(a=[],"function"==typeof f)for(n=0;l>n;++n)a[n]=+f.call(this,y[n],n);else for(n=0;l>n;++n)a[n]=f;if(i=[],"function"==typeof h)for(n=0;l>n;++n)i[n]=+h.call(this,y[n],n);else for(n=0;l>n;++n)i[n]=h;if(o=[],"function"==typeof d)for(n=0;c>n;++n)o[n]=+d.call(this,m[n],n);else for(n=0;c>n;++n)o[n]=d;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){return e||(e=eo.behavior.drag().origin(M).on("dragstart.force",$r).on("drag.force",n).on("dragend.force",Vr)),arguments.length?void this.on("mouseover.force",Yr).on("mouseout.force",Jr).call(e):e},eo.rebind(u,c,"on")};var fc=20,hc=1,dc=1/0;eo.layout.hierarchy=function(){function t(a){var i,o=[a],u=[];for(a.depth=0;null!=(i=o.pop());)if(u.push(i),(s=e.call(t,i,i.depth))&&(c=s.length)){for(var c,s,l;--c>=0;)o.push(l=s[c]),l.parent=i,l.depth=i.depth+1;r&&(i.value=0),i.children=s}else r&&(i.value=+r.call(t,i,i.depth)||0),delete i.children;return na(a,function(t){var e,a;n&&(e=t.children)&&e.sort(n),r&&(a=t.parent)&&(a.value+=t.value)}),u}var n=aa,e=ea,r=ra;return t.sort=function(e){return arguments.length?(n=e,t):n},t.children=function(n){return arguments.length?(e=n,t):e},t.value=function(n){return arguments.length?(r=n,t):r},t.revalue=function(n){return r&&(ta(n,function(t){t.children&&(t.value=0)}),na(n,function(n){var e;n.children||(n.value=+r.call(t,n,n.depth)||0),(e=n.parent)&&(e.value+=n.value)})),n},t},eo.layout.partition=function(){function t(n,e,r,a){var i=n.children;if(n.x=e,n.y=n.depth*a,n.dx=r,n.dy=a,i&&(o=i.length)){var o,u,c,s=-1;for(r=n.value?r/n.value:0;++s<o;)t(u=i[s],e,c=u.value*r,a),e+=c}}function n(t){var e=t.children,r=0;if(e&&(a=e.length))for(var a,i=-1;++i<a;)r=Math.max(r,n(e[i]));return 1+r}function e(e,i){var o=r.call(this,e,i);return t(o[0],0,a[0],a[1]/n(o[0])),o}var r=eo.layout.hierarchy(),a=[1,1];return e.size=function(t){return arguments.length?(a=t,e):a},Zr(e,r)},eo.layout.pie=function(){function t(o){var u,c=o.length,s=o.map(function(e,r){return+n.call(t,e,r)}),l=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof a?a.apply(this,arguments):a)-l,h=Math.min(Math.abs(f)/c,+("function"==typeof i?i.apply(this,arguments):i)),d=h*(0>f?-1:1),p=(f-c*d)/eo.sum(s),g=eo.range(c),v=[];return null!=e&&g.sort(e===pc?function(t,n){return s[n]-s[t]}:function(t,n){return e(o[t],o[n])}),g.forEach(function(t){v[t]={data:o[t],value:u=s[t],startAngle:l,endAngle:l+=u*p+d,padAngle:h}}),v}var n=Number,e=pc,r=0,a=Co,i=0;return t.value=function(e){return arguments.length?(n=e,t):n},t.sort=function(n){return arguments.length?(e=n,t):e},t.startAngle=function(n){return arguments.length?(r=n,t):r},t.endAngle=function(n){return arguments.length?(a=n,t):a},t.padAngle=function(n){return arguments.length?(i=n,t):i},t};var pc={};eo.layout.stack=function(){function t(u,c){if(!(h=u.length))return u;var s=u.map(function(e,r){return n.call(t,e,r)}),l=s.map(function(n){return n.map(function(n,e){return[i.call(t,n,e),o.call(t,n,e)]})}),f=e.call(t,l,c);s=eo.permute(s,f),l=eo.permute(l,f);var h,d,p,g,v=r.call(t,l,c),m=s[0].length;for(p=0;m>p;++p)for(a.call(t,s[0][p],g=v[p],l[0][p][1]),d=1;h>d;++d)a.call(t,s[d][p],g+=l[d-1][p][1],l[d][p][1]);return u}var n=M,e=sa,r=la,a=ca,i=oa,o=ua;return t.values=function(e){return arguments.length?(n=e,t):n},t.order=function(n){return arguments.length?(e="function"==typeof n?n:gc.get(n)||sa,t):e},t.offset=function(n){return arguments.length?(r="function"==typeof n?n:vc.get(n)||la,t):r},t.x=function(n){return arguments.length?(i=n,t):i},t.y=function(n){return arguments.length?(o=n,t):o},t.out=function(n){return arguments.length?(a=n,t):a},t};var gc=eo.map({"inside-out":function(t){var n,e,r=t.length,a=t.map(fa),i=t.map(ha),o=eo.range(r).sort(function(t,n){return a[t]-a[n]}),u=0,c=0,s=[],l=[];for(n=0;r>n;++n)e=o[n],c>u?(u+=i[e],s.push(e)):(c+=i[e],l.push(e));return l.reverse().concat(s)},reverse:function(t){return eo.range(t.length).reverse()},default:sa}),vc=eo.map({silhouette:function(t){var n,e,r,a=t.length,i=t[0].length,o=[],u=0,c=[];for(e=0;i>e;++e){for(n=0,r=0;a>n;n++)r+=t[n][e][1];r>u&&(u=r),o.push(r)}for(e=0;i>e;++e)c[e]=(u-o[e])/2;return c},wiggle:function(t){var n,e,r,a,i,o,u,c,s,l=t.length,f=t[0],h=f.length,d=[];for(d[0]=c=s=0,e=1;h>e;++e){for(n=0,a=0;l>n;++n)a+=t[n][e][1];for(n=0,i=0,u=f[e][0]-f[e-1][0];l>n;++n){for(r=0,o=(t[n][e][1]-t[n][e-1][1])/(2*u);n>r;++r)o+=(t[r][e][1]-t[r][e-1][1])/u;i+=o*t[n][e][1]}d[e]=c-=a?i/a*u:0,s>c&&(s=c)}for(e=0;h>e;++e)d[e]-=s;return d},expand:function(t){var n,e,r,a=t.length,i=t[0].length,o=1/a,u=[];for(e=0;i>e;++e){for(n=0,r=0;a>n;n++)r+=t[n][e][1];if(r)for(n=0;a>n;n++)t[n][e][1]/=r;else for(n=0;a>n;n++)t[n][e][1]=o}for(e=0;i>e;++e)u[e]=0;return u},zero:la});eo.layout.histogram=function(){function t(t,i){for(var o,u,c=[],s=t.map(e,this),l=r.call(this,s,i),f=a.call(this,l,s,i),i=-1,h=s.length,d=f.length-1,p=n?1:1/h;++i<d;)o=c[i]=[],o.dx=f[i+1]-(o.x=f[i]),o.y=0;if(d>0)for(i=-1;++i<h;)u=s[i],u>=l[0]&&u<=l[1]&&(o=c[eo.bisect(f,u,1,d)-1],o.y+=p,o.push(t[i]));return c}var n=!0,e=Number,r=va,a=pa;return t.value=function(n){return arguments.length?(e=n,t):e},t.range=function(n){return arguments.length?(r=St(n),t):r},t.bins=function(n){return arguments.length?(a="number"==typeof n?function(t){return ga(t,n)}:St(n),t):a},t.frequency=function(e){return arguments.length?(n=!!e,t):n},t},eo.layout.pack=function(){function t(t,i){var o=e.call(this,t,i),u=o[0],c=a[0],s=a[1],l=null==n?Math.sqrt:"function"==typeof n?n:function(){return n};if(u.x=u.y=0,na(u,function(t){t.r=+l(t.value)}),na(u,wa),r){var f=r*(n?1:Math.max(2*u.r/c,2*u.r/s))/2;na(u,function(t){t.r+=f}),na(u,wa),na(u,function(t){t.r-=f})}return ka(u,c/2,s/2,n?1:1/Math.max(2*u.r/c,2*u.r/s)),o}var n,e=eo.layout.hierarchy().sort(ma),r=0,a=[1,1];return t.size=function(n){return arguments.length?(a=n,t):a},t.radius=function(e){return arguments.length?(n=null==e||"function"==typeof e?e:+e,t):n},t.padding=function(n){return arguments.length?(r=+n,t):r},Zr(t,e)},eo.layout.tree=function(){function t(t,a){var l=o.call(this,t,a),f=l[0],h=n(f);if(na(h,e),h.parent.m=-h.z,ta(h,r),s)ta(f,i);else{var d=f,p=f,g=f;ta(f,function(t){t.x<d.x&&(d=t),t.x>p.x&&(p=t),t.depth>g.depth&&(g=t)});var v=u(d,p)/2-d.x,m=c[0]/(p.x+u(p,d)/2+v),y=c[1]/(g.depth||1);ta(f,function(t){t.x=(t.x+v)*m,t.y=t.depth*y})}return l}function n(t){for(var n,e={A:null,children:[t]},r=[e];null!=(n=r.pop());)for(var a,i=n.children,o=0,u=i.length;u>o;++o)r.push((i[o]=a={_:i[o],parent:n,children:(a=i[o].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=a);return e.children[0]}function e(t){var n=t.children,e=t.parent.children,r=t.i?e[t.i-1]:null;if(n.length){ja(t);var i=(n[0].z+n[n.length-1].z)/2;r?(t.z=r.z+u(t._,r._),t.m=t.z-i):t.z=i}else r&&(t.z=r.z+u(t._,r._));t.parent.A=a(t,r,t.parent.A||e[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function a(t,n,e){if(n){for(var r,a=t,i=t,o=n,c=a.parent.children[0],s=a.m,l=i.m,f=o.m,h=c.m;o=Aa(o),a=Sa(a),o&&a;)c=Sa(c),i=Aa(i),i.a=t,r=o.z+f-a.z-s+u(o._,a._),r>0&&(Na(Ra(o,t,e),t,r),s+=r,l+=r),f+=o.m,s+=a.m,h+=c.m,l+=i.m;o&&!Aa(i)&&(i.t=o,i.m+=f-l),a&&!Sa(c)&&(c.t=a,c.m+=s-h,e=t)}return e}function i(t){t.x*=c[0],t.y=t.depth*c[1]}var o=eo.layout.hierarchy().sort(null).value(null),u=Ta,c=[1,1],s=null;return t.separation=function(n){return arguments.length?(u=n,t):u},t.size=function(n){return arguments.length?(s=null==(c=n)?i:null,t):s?null:c},t.nodeSize=function(n){return arguments.length?(s=null==(c=n)?null:i,t):s?c:null},Zr(t,o)},eo.layout.cluster=function(){function t(t,i){var o,u=n.call(this,t,i),c=u[0],s=0;na(c,function(t){var n=t.children;n&&n.length?(t.x=qa(n),t.y=Ca(n)):(t.x=o?s+=e(t,o):0,t.y=0,o=t)});var l=Pa(c),f=La(c),h=l.x-e(l,f)/2,d=f.x+e(f,l)/2;return na(c,a?function(t){t.x=(t.x-c.x)*r[0],t.y=(c.y-t.y)*r[1]}:function(t){t.x=(t.x-h)/(d-h)*r[0],t.y=(1-(c.y?t.y/c.y:1))*r[1]}),u}var n=eo.layout.hierarchy().sort(null).value(null),e=Ta,r=[1,1],a=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(n){return arguments.length?(a=null==(r=n),t):a?null:r},t.nodeSize=function(n){return arguments.length?(a=null!=(r=n),t):a?r:null},Zr(t,n)},eo.layout.treemap=function(){function t(t,n){for(var e,r,a=-1,i=t.length;++a<i;)r=(e=t[a]).value*(0>n?0:n),e.area=isNaN(r)||0>=r?0:r}function n(e){var i=e.children;if(i&&i.length){var o,u,c,s=f(e),l=[],h=i.slice(),p=1/0,g="slice"===d?s.dx:"dice"===d?s.dy:"slice-dice"===d?1&e.depth?s.dy:s.dx:Math.min(s.dx,s.dy);for(t(h,s.dx*s.dy/e.value),l.area=0;(c=h.length)>0;)l.push(o=h[c-1]),l.area+=o.area,"squarify"!==d||(u=r(l,g))<=p?(h.pop(),p=u):(l.area-=l.pop().area,a(l,g,s,!1),g=Math.min(s.dx,s.dy),l.length=l.area=0,p=1/0);l.length&&(a(l,g,s,!0),l.length=l.area=0),i.forEach(n)}}function e(n){var r=n.children;if(r&&r.length){var i,o=f(n),u=r.slice(),c=[];for(t(u,o.dx*o.dy/n.value),c.area=0;i=u.pop();)c.push(i),c.area+=i.area,null!=i.z&&(a(c,i.z?o.dx:o.dy,o,!u.length),c.length=c.area=0);r.forEach(e)}}function r(t,n){for(var e,r=t.area,a=0,i=1/0,o=-1,u=t.length;++o<u;)(e=t[o].area)&&(i>e&&(i=e),e>a&&(a=e));return r*=r,n*=n,r?Math.max(n*a*p/r,r/(n*i*p)):1/0}function a(t,n,e,r){var a,i=-1,o=t.length,u=e.x,s=e.y,l=n?c(t.area/n):0;if(n==e.dx){for((r||l>e.dy)&&(l=e.dy);++i<o;)a=t[i],a.x=u,a.y=s,a.dy=l,u+=a.dx=Math.min(e.x+e.dx-u,l?c(a.area/l):0);a.z=!0,a.dx+=e.x+e.dx-u,e.y+=l,e.dy-=l}else{for((r||l>e.dx)&&(l=e.dx);++i<o;)a=t[i],a.x=u,a.y=s,a.dx=l,s+=a.dy=Math.min(e.y+e.dy-s,l?c(a.area/l):0);a.z=!1,a.dy+=e.y+e.dy-s,e.x+=l,e.dx-=l}}function i(r){var a=o||u(r),i=a[0];return i.x=0,i.y=0,i.dx=s[0],i.dy=s[1],o&&u.revalue(i),t([i],i.dx*i.dy/i.value),(o?e:n)(i),h&&(o=a),a}var o,u=eo.layout.hierarchy(),c=Math.round,s=[1,1],l=null,f=Fa,h=!1,d="squarify",p=.5*(1+Math.sqrt(5));return i.size=function(t){return arguments.length?(s=t,i):s},i.padding=function(t){function n(n){var e=t.call(i,n,n.depth);return null==e?Fa(n):Da(n,"number"==typeof e?[e,e,e,e]:e)}function e(n){return Da(n,t)}if(!arguments.length)return l;var r;return f=null==(l=t)?Fa:"function"==(r=typeof t)?n:"number"===r?(t=[t,t,t,t],e):e,i},i.round=function(t){return arguments.length?(c=t?Math.round:Number,i):c!=Number},i.sticky=function(t){return arguments.length?(h=t,o=null,i):h},i.ratio=function(t){return arguments.length?(p=t,i):p},i.mode=function(t){return arguments.length?(d=t+"",i):d},Zr(i,u)},eo.random={normal:function(t,n){var e=arguments.length;return 2>e&&(n=1),1>e&&(t=0),function(){var e,r,a;do e=2*Math.random()-1,r=2*Math.random()-1,a=e*e+r*r;while(!a||a>1);return t+n*e*Math.sqrt(-2*Math.log(a)/a)}},logNormal:function(){var t=eo.random.normal.apply(eo,arguments);return function(){return Math.exp(t())}},bates:function(t){var n=eo.random.irwinHall(t);return function(){return n()/t}},irwinHall:function(t){return function(){for(var n=0,e=0;t>e;e++)n+=Math.random();return n}}},eo.scale={};var mc={floor:M,ceil:M};eo.scale.linear=function(){return Ba([0,1],[0,1],Mr,!1)};var yc={s:1,g:1,p:1,r:1,e:1};eo.scale.log=function(){return Ka(eo.scale.linear().domain([0,1]),10,!0,[1,10])};var Mc=eo.format(".0e"),bc={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};eo.scale.pow=function(){return Za(eo.scale.linear(),1,[0,1])},eo.scale.sqrt=function(){return eo.scale.pow().exponent(.5)},eo.scale.ordinal=function(){return ni([],{t:"range",a:[[]]})},eo.scale.category10=function(){return eo.scale.ordinal().range(wc)},eo.scale.category20=function(){return eo.scale.ordinal().range(xc)},eo.scale.category20b=function(){return eo.scale.ordinal().range(_c)},eo.scale.category20c=function(){return eo.scale.ordinal().range(kc)};var wc=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(bt),xc=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(bt),_c=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(bt),kc=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(bt);eo.scale.quantile=function(){return ei([],[])},eo.scale.quantize=function(){return ri(0,1,[0,1])},eo.scale.threshold=function(){return ai([.5],[0,1])},eo.scale.identity=function(){return ii([0,1])},eo.svg={},eo.svg.arc=function(){function t(){var t=Math.max(0,+e.apply(this,arguments)),s=Math.max(0,+r.apply(this,arguments)),l=o.apply(this,arguments)-Po,f=u.apply(this,arguments)-Po,h=Math.abs(f-l),d=l>f?0:1;if(t>s&&(p=s,s=t,t=p),h>=qo)return n(s,d)+(t?n(t,1-d):"")+"Z";var p,g,v,m,y,M,b,w,x,_,k,E,T=0,S=0,A=[];if((m=(+c.apply(this,arguments)||0)/2)&&(v=i===Ec?Math.sqrt(t*t+s*s):+i.apply(this,arguments),d||(S*=-1),s&&(S=et(v/s*Math.sin(m))),t&&(T=et(v/t*Math.sin(m)))),s){y=s*Math.cos(l+S),M=s*Math.sin(l+S),b=s*Math.cos(f-S),w=s*Math.sin(f-S);var N=Math.abs(f-l-2*S)<=Ro?0:1;if(S&&hi(y,M,b,w)===d^N){var j=(l+f)/2;y=s*Math.cos(j),
M=s*Math.sin(j),b=w=null}}else y=M=0;if(t){x=t*Math.cos(f-T),_=t*Math.sin(f-T),k=t*Math.cos(l+T),E=t*Math.sin(l+T);var R=Math.abs(l-f+2*T)<=Ro?0:1;if(T&&hi(x,_,k,E)===1-d^R){var C=(l+f)/2;x=t*Math.cos(C),_=t*Math.sin(C),k=E=null}}else x=_=0;if((p=Math.min(Math.abs(s-t)/2,+a.apply(this,arguments)))>.001){g=s>t^d?0:1;var q=null==k?[x,_]:null==b?[y,M]:Pe([y,M],[k,E],[b,w],[x,_]),P=y-q[0],L=M-q[1],F=b-q[0],D=w-q[1],O=1/Math.sin(Math.acos((P*F+L*D)/(Math.sqrt(P*P+L*L)*Math.sqrt(F*F+D*D)))/2),z=Math.sqrt(q[0]*q[0]+q[1]*q[1]);if(null!=b){var I=Math.min(p,(s-z)/(O+1)),U=di(null==k?[x,_]:[k,E],[y,M],s,I,d),H=di([b,w],[x,_],s,I,d);p===I?A.push("M",U[0],"A",I,",",I," 0 0,",g," ",U[1],"A",s,",",s," 0 ",1-d^hi(U[1][0],U[1][1],H[1][0],H[1][1]),",",d," ",H[1],"A",I,",",I," 0 0,",g," ",H[0]):A.push("M",U[0],"A",I,",",I," 0 1,",g," ",H[0])}else A.push("M",y,",",M);if(null!=k){var G=Math.min(p,(t-z)/(O-1)),B=di([y,M],[k,E],t,-G,d),X=di([x,_],null==b?[y,M]:[b,w],t,-G,d);p===G?A.push("L",X[0],"A",G,",",G," 0 0,",g," ",X[1],"A",t,",",t," 0 ",d^hi(X[1][0],X[1][1],B[1][0],B[1][1]),",",1-d," ",B[1],"A",G,",",G," 0 0,",g," ",B[0]):A.push("L",X[0],"A",G,",",G," 0 0,",g," ",B[0])}else A.push("L",x,",",_)}else A.push("M",y,",",M),null!=b&&A.push("A",s,",",s," 0 ",N,",",d," ",b,",",w),A.push("L",x,",",_),null!=k&&A.push("A",t,",",t," 0 ",R,",",1-d," ",k,",",E);return A.push("Z"),A.join("")}function n(t,n){return"M0,"+t+"A"+t+","+t+" 0 1,"+n+" 0,"+-t+"A"+t+","+t+" 0 1,"+n+" 0,"+t}var e=ui,r=ci,a=oi,i=Ec,o=si,u=li,c=fi;return t.innerRadius=function(n){return arguments.length?(e=St(n),t):e},t.outerRadius=function(n){return arguments.length?(r=St(n),t):r},t.cornerRadius=function(n){return arguments.length?(a=St(n),t):a},t.padRadius=function(n){return arguments.length?(i=n==Ec?Ec:St(n),t):i},t.startAngle=function(n){return arguments.length?(o=St(n),t):o},t.endAngle=function(n){return arguments.length?(u=St(n),t):u},t.padAngle=function(n){return arguments.length?(c=St(n),t):c},t.centroid=function(){var t=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,n=(+o.apply(this,arguments)+ +u.apply(this,arguments))/2-Po;return[Math.cos(n)*t,Math.sin(n)*t]},t};var Ec="auto";eo.svg.line=function(){return pi(M)};var Tc=eo.map({linear:gi,"linear-closed":vi,step:mi,"step-before":yi,"step-after":Mi,basis:Ei,"basis-open":Ti,"basis-closed":Si,bundle:Ai,cardinal:xi,"cardinal-open":bi,"cardinal-closed":wi,monotone:Pi});Tc.forEach(function(t,n){n.key=t,n.closed=/-closed$/.test(t)});var Sc=[0,2/3,1/3,0],Ac=[0,1/3,2/3,0],Nc=[0,1/6,2/3,1/6];eo.svg.line.radial=function(){var t=pi(Li);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},yi.reverse=Mi,Mi.reverse=yi,eo.svg.area=function(){return Fi(M)},eo.svg.area.radial=function(){var t=Fi(Li);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},eo.svg.chord=function(){function t(t,u){var c=n(this,i,t,u),s=n(this,o,t,u);return"M"+c.p0+r(c.r,c.p1,c.a1-c.a0)+(e(c,s)?a(c.r,c.p1,c.r,c.p0):a(c.r,c.p1,s.r,s.p0)+r(s.r,s.p1,s.a1-s.a0)+a(s.r,s.p1,c.r,c.p0))+"Z"}function n(t,n,e,r){var a=n.call(t,e,r),i=u.call(t,a,r),o=c.call(t,a,r)-Po,l=s.call(t,a,r)-Po;return{r:i,a0:o,a1:l,p0:[i*Math.cos(o),i*Math.sin(o)],p1:[i*Math.cos(l),i*Math.sin(l)]}}function e(t,n){return t.a0==n.a0&&t.a1==n.a1}function r(t,n,e){return"A"+t+","+t+" 0 "+ +(e>Ro)+",1 "+n}function a(t,n,e,r){return"Q 0,0 "+r}var i=Me,o=be,u=Di,c=si,s=li;return t.radius=function(n){return arguments.length?(u=St(n),t):u},t.source=function(n){return arguments.length?(i=St(n),t):i},t.target=function(n){return arguments.length?(o=St(n),t):o},t.startAngle=function(n){return arguments.length?(c=St(n),t):c},t.endAngle=function(n){return arguments.length?(s=St(n),t):s},t},eo.svg.diagonal=function(){function t(t,a){var i=n.call(this,t,a),o=e.call(this,t,a),u=(i.y+o.y)/2,c=[i,{x:i.x,y:u},{x:o.x,y:u},o];return c=c.map(r),"M"+c[0]+"C"+c[1]+" "+c[2]+" "+c[3]}var n=Me,e=be,r=Oi;return t.source=function(e){return arguments.length?(n=St(e),t):n},t.target=function(n){return arguments.length?(e=St(n),t):e},t.projection=function(n){return arguments.length?(r=n,t):r},t},eo.svg.diagonal.radial=function(){var t=eo.svg.diagonal(),n=Oi,e=t.projection;return t.projection=function(t){return arguments.length?e(zi(n=t)):n},t},eo.svg.symbol=function(){function t(t,r){return(jc.get(n.call(this,t,r))||Hi)(e.call(this,t,r))}var n=Ui,e=Ii;return t.type=function(e){return arguments.length?(n=St(e),t):n},t.size=function(n){return arguments.length?(e=St(n),t):e},t};var jc=eo.map({circle:Hi,cross:function(t){var n=Math.sqrt(t/5)/2;return"M"+-3*n+","+-n+"H"+-n+"V"+-3*n+"H"+n+"V"+-n+"H"+3*n+"V"+n+"H"+n+"V"+3*n+"H"+-n+"V"+n+"H"+-3*n+"Z"},diamond:function(t){var n=Math.sqrt(t/(2*Cc)),e=n*Cc;return"M0,"+-n+"L"+e+",0 0,"+n+" "+-e+",0Z"},square:function(t){var n=Math.sqrt(t)/2;return"M"+-n+","+-n+"L"+n+","+-n+" "+n+","+n+" "+-n+","+n+"Z"},"triangle-down":function(t){var n=Math.sqrt(t/Rc),e=n*Rc/2;return"M0,"+e+"L"+n+","+-e+" "+-n+","+-e+"Z"},"triangle-up":function(t){var n=Math.sqrt(t/Rc),e=n*Rc/2;return"M0,"+-e+"L"+n+","+e+" "+-n+","+e+"Z"}});eo.svg.symbolTypes=jc.keys();var Rc=Math.sqrt(3),Cc=Math.tan(30*Lo);xo.transition=function(t){for(var n,e,r=qc||++Dc,a=Qi(t),i=[],o=Pc||{time:Date.now(),ease:Tr,delay:0,duration:250},u=-1,c=this.length;++u<c;){i.push(n=[]);for(var s=this[u],l=-1,f=s.length;++l<f;)(e=s[l])&&$i(e,l,a,r,o),n.push(e)}return Bi(i,a,r)},xo.interrupt=function(t){return this.each(null==t?Lc:Gi(Qi(t)))};var qc,Pc,Lc=Gi(Qi()),Fc=[],Dc=0;Fc.call=xo.call,Fc.empty=xo.empty,Fc.node=xo.node,Fc.size=xo.size,eo.transition=function(t,n){return t&&t.transition?qc?t.transition(n):t:eo.selection().transition(t)},eo.transition.prototype=Fc,Fc.select=function(t){var n,e,r,a=this.id,i=this.namespace,o=[];t=N(t);for(var u=-1,c=this.length;++u<c;){o.push(n=[]);for(var s=this[u],l=-1,f=s.length;++l<f;)(r=s[l])&&(e=t.call(r,r.__data__,l,u))?("__data__"in r&&(e.__data__=r.__data__),$i(e,l,i,a,r[i][a]),n.push(e)):n.push(null)}return Bi(o,i,a)},Fc.selectAll=function(t){var n,e,r,a,i,o=this.id,u=this.namespace,c=[];t=j(t);for(var s=-1,l=this.length;++s<l;)for(var f=this[s],h=-1,d=f.length;++h<d;)if(r=f[h]){i=r[u][o],e=t.call(r,r.__data__,h,s),c.push(n=[]);for(var p=-1,g=e.length;++p<g;)(a=e[p])&&$i(a,p,u,o,i),n.push(a)}return Bi(c,u,o)},Fc.filter=function(t){var n,e,r,a=[];"function"!=typeof t&&(t=H(t));for(var i=0,o=this.length;o>i;i++){a.push(n=[]);for(var e=this[i],u=0,c=e.length;c>u;u++)(r=e[u])&&t.call(r,r.__data__,u,i)&&n.push(r)}return Bi(a,this.namespace,this.id)},Fc.tween=function(t,n){var e=this.id,r=this.namespace;return arguments.length<2?this.node()[r][e].tween.get(t):B(this,null==n?function(n){n[r][e].tween.remove(t)}:function(a){a[r][e].tween.set(t,n)})},Fc.attr=function(t,n){function e(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function a(t){return null==t?e:(t+="",function(){var n,e=this.getAttribute(u);return e!==t&&(n=o(e,t),function(t){this.setAttribute(u,n(t))})})}function i(t){return null==t?r:(t+="",function(){var n,e=this.getAttributeNS(u.space,u.local);return e!==t&&(n=o(e,t),function(t){this.setAttributeNS(u.space,u.local,n(t))})})}if(arguments.length<2){for(n in t)this.attr(n,t[n]);return this}var o="transform"==t?Hr:Mr,u=eo.ns.qualify(t);return Xi(this,"attr."+t,n,u.local?i:a)},Fc.attrTween=function(t,n){function e(t,e){var r=n.call(this,t,e,this.getAttribute(a));return r&&function(t){this.setAttribute(a,r(t))}}function r(t,e){var r=n.call(this,t,e,this.getAttributeNS(a.space,a.local));return r&&function(t){this.setAttributeNS(a.space,a.local,r(t))}}var a=eo.ns.qualify(t);return this.tween("attr."+t,a.local?r:e)},Fc.style=function(t,n,r){function a(){this.style.removeProperty(t)}function i(n){return null==n?a:(n+="",function(){var a,i=e(this).getComputedStyle(this,null).getPropertyValue(t);return i!==n&&(a=Mr(i,n),function(n){this.style.setProperty(t,a(n),r)})})}var o=arguments.length;if(3>o){if("string"!=typeof t){2>o&&(n="");for(r in t)this.style(r,t[r],n);return this}r=""}return Xi(this,"style."+t,n,i)},Fc.styleTween=function(t,n,r){function a(a,i){var o=n.call(this,a,i,e(this).getComputedStyle(this,null).getPropertyValue(t));return o&&function(n){this.style.setProperty(t,o(n),r)}}return arguments.length<3&&(r=""),this.tween("style."+t,a)},Fc.text=function(t){return Xi(this,"text",t,Wi)},Fc.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var n;this[t].count<2&&(n=this.parentNode)&&n.removeChild(this)})},Fc.ease=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].ease:("function"!=typeof t&&(t=eo.ease.apply(eo,arguments)),B(this,function(r){r[e][n].ease=t}))},Fc.delay=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].delay:B(this,"function"==typeof t?function(r,a,i){r[e][n].delay=+t.call(r,r.__data__,a,i)}:(t=+t,function(r){r[e][n].delay=t}))},Fc.duration=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].duration:B(this,"function"==typeof t?function(r,a,i){r[e][n].duration=Math.max(1,t.call(r,r.__data__,a,i))}:(t=Math.max(1,t),function(r){r[e][n].duration=t}))},Fc.each=function(t,n){var e=this.id,r=this.namespace;if(arguments.length<2){var a=Pc,i=qc;try{qc=e,B(this,function(n,a,i){Pc=n[r][e],t.call(n,n.__data__,a,i)})}finally{Pc=a,qc=i}}else B(this,function(a){var i=a[r][e];(i.event||(i.event=eo.dispatch("start","end","interrupt"))).on(t,n)});return this},Fc.transition=function(){for(var t,n,e,r,a=this.id,i=++Dc,o=this.namespace,u=[],c=0,s=this.length;s>c;c++){u.push(t=[]);for(var n=this[c],l=0,f=n.length;f>l;l++)(e=n[l])&&(r=e[o][a],$i(e,l,o,i,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),t.push(e)}return Bi(u,o,i)},eo.svg.axis=function(){function t(t){t.each(function(){var t,s=eo.select(this),l=this.__chart__||e,f=this.__chart__=e.copy(),h=null==c?f.ticks?f.ticks.apply(f,u):f.domain():c,d=null==n?f.tickFormat?f.tickFormat.apply(f,u):M:n,p=s.selectAll(".tick").data(h,f),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",No),v=eo.transition(p.exit()).style("opacity",No).remove(),m=eo.transition(p.order()).style("opacity",1),y=Math.max(a,0)+o,b=za(f),w=s.selectAll(".domain").data([0]),x=(w.enter().append("path").attr("class","domain"),eo.transition(w));g.append("line"),g.append("text");var _,k,E,T,S=g.select("line"),A=m.select("line"),N=p.select("text").text(d),j=g.select("text"),R=m.select("text"),C="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=Vi,_="x",E="y",k="x2",T="y2",N.attr("dy",0>C?"0em":".71em").style("text-anchor","middle"),x.attr("d","M"+b[0]+","+C*i+"V0H"+b[1]+"V"+C*i)):(t=Yi,_="y",E="x",k="y2",T="x2",N.attr("dy",".32em").style("text-anchor",0>C?"end":"start"),x.attr("d","M"+C*i+","+b[0]+"H0V"+b[1]+"H"+C*i)),S.attr(T,C*a),j.attr(E,C*y),A.attr(k,0).attr(T,C*a),R.attr(_,0).attr(E,C*y),f.rangeBand){var q=f,P=q.rangeBand()/2;l=f=function(t){return q(t)+P}}else l.rangeBand?l=f:v.call(t,f,l);g.call(t,l,f),m.call(t,f,f)})}var n,e=eo.scale.linear(),r=Oc,a=6,i=6,o=3,u=[10],c=null;return t.scale=function(n){return arguments.length?(e=n,t):e},t.orient=function(n){return arguments.length?(r=n in zc?n+"":Oc,t):r},t.ticks=function(){return arguments.length?(u=arguments,t):u},t.tickValues=function(n){return arguments.length?(c=n,t):c},t.tickFormat=function(e){return arguments.length?(n=e,t):n},t.tickSize=function(n){var e=arguments.length;return e?(a=+n,i=+arguments[e-1],t):a},t.innerTickSize=function(n){return arguments.length?(a=+n,t):a},t.outerTickSize=function(n){return arguments.length?(i=+n,t):i},t.tickPadding=function(n){return arguments.length?(o=+n,t):o},t.tickSubdivide=function(){return arguments.length&&t},t};var Oc="bottom",zc={top:1,right:1,bottom:1,left:1};eo.svg.brush=function(){function t(e){e.each(function(){var e=eo.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),o=e.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=e.selectAll(".resize").data(g,M);u.exit().remove(),u.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Ic[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",t.empty()?"none":null);var c,f=eo.transition(e),h=eo.transition(o);s&&(c=za(s),h.attr("x",c[0]).attr("width",c[1]-c[0]),r(f)),l&&(c=za(l),h.attr("y",c[0]).attr("height",c[1]-c[0]),a(f)),n(f)})}function n(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+f[+/e$/.test(t)]+","+h[+/^s/.test(t)]+")"})}function r(t){t.select(".extent").attr("x",f[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function a(t){t.select(".extent").attr("y",h[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function i(){function i(){32==eo.event.keyCode&&(N||(M=null,R[0]-=f[1],R[1]-=h[1],N=2),E())}function g(){32==eo.event.keyCode&&2==N&&(R[0]+=f[1],R[1]+=h[1],N=0,E())}function v(){var t=eo.mouse(w),e=!1;b&&(t[0]+=b[0],t[1]+=b[1]),N||(eo.event.altKey?(M||(M=[(f[0]+f[1])/2,(h[0]+h[1])/2]),R[0]=f[+(t[0]<M[0])],R[1]=h[+(t[1]<M[1])]):M=null),S&&m(t,s,0)&&(r(k),e=!0),A&&m(t,l,1)&&(a(k),e=!0),e&&(n(k),_({type:"brush",mode:N?"move":"resize"}))}function m(t,n,e){var r,a,i=za(n),c=i[0],s=i[1],l=R[e],g=e?h:f,v=g[1]-g[0];return N&&(c-=l,s-=v+l),r=(e?p:d)?Math.max(c,Math.min(s,t[e])):t[e],N?a=(r+=l)+v:(M&&(l=Math.max(c,Math.min(s,2*M[e]-r))),r>l?(a=r,r=l):a=l),g[0]!=r||g[1]!=a?(e?u=null:o=null,g[0]=r,g[1]=a,!0):void 0}function y(){v(),k.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),eo.select("body").style("cursor",null),C.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),j(),_({type:"brushend"})}var M,b,w=this,x=eo.select(eo.event.target),_=c.of(w,arguments),k=eo.select(w),T=x.datum(),S=!/^(n|s)$/.test(T)&&s,A=!/^(e|w)$/.test(T)&&l,N=x.classed("extent"),j=Y(w),R=eo.mouse(w),C=eo.select(e(w)).on("keydown.brush",i).on("keyup.brush",g);if(eo.event.changedTouches?C.on("touchmove.brush",v).on("touchend.brush",y):C.on("mousemove.brush",v).on("mouseup.brush",y),k.interrupt().selectAll("*").interrupt(),N)R[0]=f[0]-R[0],R[1]=h[0]-R[1];else if(T){var q=+/w$/.test(T),P=+/^n/.test(T);b=[f[1-q]-R[0],h[1-P]-R[1]],R[0]=f[q],R[1]=h[P]}else eo.event.altKey&&(M=R.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),eo.select("body").style("cursor",x.style("cursor")),_({type:"brushstart"}),v()}var o,u,c=S(t,"brushstart","brush","brushend"),s=null,l=null,f=[0,0],h=[0,0],d=!0,p=!0,g=Uc[0];return t.event=function(t){t.each(function(){var t=c.of(this,arguments),n={x:f,y:h,i:o,j:u},e=this.__chart__||n;this.__chart__=n,qc?eo.select(this).transition().each("start.brush",function(){o=e.i,u=e.j,f=e.x,h=e.y,t({type:"brushstart"})}).tween("brush:brush",function(){var e=br(f,n.x),r=br(h,n.y);return o=u=null,function(a){f=n.x=e(a),h=n.y=r(a),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=n.i,u=n.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(n){return arguments.length?(s=n,g=Uc[!s<<1|!l],t):s},t.y=function(n){return arguments.length?(l=n,g=Uc[!s<<1|!l],t):l},t.clamp=function(n){return arguments.length?(s&&l?(d=!!n[0],p=!!n[1]):s?d=!!n:l&&(p=!!n),t):s&&l?[d,p]:s?d:l?p:null},t.extent=function(n){var e,r,a,i,c;return arguments.length?(s&&(e=n[0],r=n[1],l&&(e=e[0],r=r[0]),o=[e,r],s.invert&&(e=s(e),r=s(r)),e>r&&(c=e,e=r,r=c),(e!=f[0]||r!=f[1])&&(f=[e,r])),l&&(a=n[0],i=n[1],s&&(a=a[1],i=i[1]),u=[a,i],l.invert&&(a=l(a),i=l(i)),a>i&&(c=a,a=i,i=c),(a!=h[0]||i!=h[1])&&(h=[a,i])),t):(s&&(o?(e=o[0],r=o[1]):(e=f[0],r=f[1],s.invert&&(e=s.invert(e),r=s.invert(r)),e>r&&(c=e,e=r,r=c))),l&&(u?(a=u[0],i=u[1]):(a=h[0],i=h[1],l.invert&&(a=l.invert(a),i=l.invert(i)),a>i&&(c=a,a=i,i=c))),s&&l?[[e,a],[r,i]]:s?[e,r]:l&&[a,i])},t.clear=function(){return t.empty()||(f=[0,0],h=[0,0],o=u=null),t},t.empty=function(){return!!s&&f[0]==f[1]||!!l&&h[0]==h[1]},eo.rebind(t,c,"on")};var Ic={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Uc=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Hc=uu.format=du.timeFormat,Gc=Hc.utc,Bc=Gc("%Y-%m-%dT%H:%M:%S.%LZ");Hc.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ji:Bc,Ji.parse=function(t){var n=new Date(t);return isNaN(n)?null:n},Ji.toString=Bc.toString,uu.second=It(function(t){return new cu(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(t.getTime()+1e3*Math.floor(n))},function(t){return t.getSeconds()}),uu.seconds=uu.second.range,uu.seconds.utc=uu.second.utc.range,uu.minute=It(function(t){return new cu(6e4*Math.floor(t/6e4))},function(t,n){t.setTime(t.getTime()+6e4*Math.floor(n))},function(t){return t.getMinutes()}),uu.minutes=uu.minute.range,uu.minutes.utc=uu.minute.utc.range,uu.hour=It(function(t){var n=t.getTimezoneOffset()/60;return new cu(36e5*(Math.floor(t/36e5-n)+n))},function(t,n){t.setTime(t.getTime()+36e5*Math.floor(n))},function(t){return t.getHours()}),uu.hours=uu.hour.range,uu.hours.utc=uu.hour.utc.range,uu.month=It(function(t){return t=uu.day(t),t.setDate(1),t},function(t,n){t.setMonth(t.getMonth()+n)},function(t){return t.getMonth()}),uu.months=uu.month.range,uu.months.utc=uu.month.utc.range;var Xc=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Wc=[[uu.second,1],[uu.second,5],[uu.second,15],[uu.second,30],[uu.minute,1],[uu.minute,5],[uu.minute,15],[uu.minute,30],[uu.hour,1],[uu.hour,3],[uu.hour,6],[uu.hour,12],[uu.day,1],[uu.day,2],[uu.week,1],[uu.month,1],[uu.month,3],[uu.year,1]],Qc=Hc.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",jn]]),$c={range:function(t,n,e){return eo.range(Math.ceil(t/e)*e,+n,e).map(Zi)},floor:M,ceil:M};Wc.year=uu.year,uu.scale=function(){return Ki(eo.scale.linear(),Wc,Qc)};var Vc=Wc.map(function(t){return[t[0].utc,t[1]]}),Yc=Gc.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",jn]]);Vc.year=uu.year.utc,uu.scale.utc=function(){return Ki(eo.scale.linear(),Vc,Yc)},eo.text=At(function(t){return t.responseText}),eo.json=function(t,n){return Nt(t,"application/json",to,n)},eo.html=function(t,n){return Nt(t,"text/html",no,n)},eo.xml=At(function(t){return t.responseXML}),"function"==typeof define&&define.amd?define(eo):"object"==typeof n&&n.exports&&(n.exports=eo),this.d3=eo}()},{}],4:[function(t,e,r){!function(){function t(t,n){function e(n){var e,r=t.arcs[0>n?~n:n],a=r[0];return t.transform?(e=[0,0],r.forEach(function(t){e[0]+=t[0],e[1]+=t[1]})):e=r[r.length-1],0>n?[e,a]:[a,e]}function r(t,n){for(var e in t){var r=t[e];delete n[r.start],delete r.start,delete r.end,r.forEach(function(t){a[0>t?~t:t]=1}),u.push(r)}}var a={},i={},o={},u=[],c=-1;return n.forEach(function(e,r){var a,i=t.arcs[0>e?~e:e];i.length<3&&!i[1][0]&&!i[1][1]&&(a=n[++c],n[c]=e,n[r]=a)}),n.forEach(function(t){var n,r,a=e(t),u=a[0],c=a[1];if(n=o[u])if(delete o[n.end],n.push(t),n.end=c,r=i[c]){delete i[r.start];var s=r===n?n:n.concat(r);i[s.start=n.start]=o[s.end=r.end]=s}else i[n.start]=o[n.end]=n;else if(n=i[c])if(delete i[n.start],n.unshift(t),n.start=u,r=o[u]){delete o[r.end];var l=r===n?n:r.concat(n);i[l.start=r.start]=o[l.end=n.end]=l}else i[n.start]=o[n.end]=n;else n=[t],i[n.start=u]=o[n.end=c]=n}),r(o,i),r(i,o),n.forEach(function(t){a[0>t?~t:t]||u.push([t])}),u}function r(n,e,r){function a(t){var n=0>t?~t:t;(l[n]||(l[n]=[])).push({i:t,g:s})}function i(t){t.forEach(a)}function o(t){t.forEach(i)}function u(t){"GeometryCollection"===t.type?t.geometries.forEach(u):t.type in f&&(s=t,f[t.type](t.arcs))}var c=[];if(arguments.length>1){var s,l=[],f={LineString:i,MultiLineString:o,Polygon:o,MultiPolygon:function(t){t.forEach(o)}};u(e),l.forEach(arguments.length<3?function(t){c.push(t[0].i)}:function(t){r(t[0].g,t[t.length-1].g)&&c.push(t[0].i)})}else for(var h=0,d=n.arcs.length;d>h;++h)c.push(h);return{type:"MultiLineString",arcs:t(n,c)}}function a(e,r){function a(t){t.forEach(function(n){n.forEach(function(n){(o[n=0>n?~n:n]||(o[n]=[])).push(t)})}),c.push(t)}function i(t){return h(u(e,{type:"Polygon",arcs:[t]}).coordinates[0])>0}var o={},c=[],s=[];return r.forEach(function(t){"Polygon"===t.type?a(t.arcs):"MultiPolygon"===t.type&&t.arcs.forEach(a)}),c.forEach(function(t){if(!t._){var n=[],e=[t];for(t._=1,s.push(n);t=e.pop();)n.push(t),t.forEach(function(t){t.forEach(function(t){o[0>t?~t:t].forEach(function(t){t._||(t._=1,e.push(t))})})})}}),c.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:s.map(function(r){var a=[];if(r.forEach(function(t){t.forEach(function(t){t.forEach(function(t){o[0>t?~t:t].length<2&&a.push(t)})})}),a=t(e,a),(n=a.length)>1)for(var u,c=i(r[0][0]),s=0;s<n;++s)if(c===i(a[s])){u=a[0],a[0]=a[s],a[s]=u;break}return a})}}function i(t,n){return"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map(function(n){return o(t,n)})}:o(t,n)}function o(t,n){var e={type:"Feature",id:n.id,properties:n.properties||{},geometry:u(t,n)};return null==n.id&&delete e.id,e}function u(t,n){function e(t,n){n.length&&n.pop();for(var e,r=l[0>t?~t:t],a=0,i=r.length;i>a;++a)n.push(e=r[a].slice()),s(e,a);0>t&&c(n,i)}function r(t){return t=t.slice(),s(t,0),t}function a(t){for(var n=[],r=0,a=t.length;a>r;++r)e(t[r],n);return n.length<2&&n.push(n[0].slice()),n}function i(t){for(var n=a(t);n.length<4;)n.push(n[0].slice());return n}function o(t){return t.map(i)}function u(t){var n=t.type;return"GeometryCollection"===n?{type:n,geometries:t.geometries.map(u)}:n in f?{type:n,coordinates:f[n](t)}:null}var s=v(t.transform),l=t.arcs,f={Point:function(t){return r(t.coordinates)},MultiPoint:function(t){return t.coordinates.map(r)},LineString:function(t){return a(t.arcs)},MultiLineString:function(t){return t.arcs.map(a)},Polygon:function(t){return o(t.arcs)},MultiPolygon:function(t){return t.arcs.map(o)}};return u(n)}function c(t,n){for(var e,r=t.length,a=r-n;a<--r;)e=t[a],t[a++]=t[r],t[r]=e}function s(t,n){for(var e=0,r=t.length;r>e;){var a=e+r>>>1;t[a]<n?e=a+1:r=a}return e}function l(t){function n(t,n){t.forEach(function(t){0>t&&(t=~t);var e=a[t];e?e.push(n):a[t]=[n]})}function e(t,e){t.forEach(function(t){n(t,e)})}function r(t,n){"GeometryCollection"===t.type?t.geometries.forEach(function(t){r(t,n)}):t.type in o&&o[t.type](t.arcs,n)}var a={},i=t.map(function(){return[]}),o={LineString:n,MultiLineString:e,Polygon:e,MultiPolygon:function(t,n){t.forEach(function(t){e(t,n)})}};t.forEach(r);for(var u in a)for(var c=a[u],l=c.length,f=0;l>f;++f)for(var h=f+1;l>h;++h){var d,p=c[f],g=c[h];(d=i[p])[u=s(d,g)]!==g&&d.splice(u,0,g),(d=i[g])[u=s(d,p)]!==p&&d.splice(u,0,p)}return i}function f(t,n){function e(t){i.remove(t),t[1][2]=n(t),i.push(t)}var r=v(t.transform),a=m(t.transform),i=g();return n||(n=d),t.arcs.forEach(function(t){for(var o,u,c=[],s=0,l=0,f=t.length;f>l;++l)u=t[l],r(t[l]=[u[0],u[1],1/0],l);for(var l=1,f=t.length-1;f>l;++l)o=t.slice(l-1,l+2),o[1][2]=n(o),c.push(o),i.push(o);for(var l=0,f=c.length;f>l;++l)o=c[l],o.previous=c[l-1],o.next=c[l+1];for(;o=i.pop();){var h=o.previous,d=o.next;o[1][2]<s?o[1][2]=s:s=o[1][2],h&&(h.next=d,h[2]=o[2],e(h)),d&&(d.previous=h,d[0]=o[0],e(d))}t.forEach(a)}),t}function h(t){for(var n,e=-1,r=t.length,a=t[r-1],i=0;++e<r;)n=a,a=t[e],i+=n[0]*a[1]-n[1]*a[0];return.5*i}function d(t){var n=t[0],e=t[1],r=t[2];return Math.abs((n[0]-r[0])*(e[1]-n[1])-(n[0]-e[0])*(r[1]-n[1]))}function p(t,n){return t[1][2]-n[1][2]}function g(){function t(t,n){for(;n>0;){var e=(n+1>>1)-1,a=r[e];if(p(t,a)>=0)break;r[a._=n]=a,r[t._=n=e]=t}}function n(t,n){for(;;){var e=n+1<<1,i=e-1,o=n,u=r[o];if(a>i&&p(r[i],u)<0&&(u=r[o=i]),a>e&&p(r[e],u)<0&&(u=r[o=e]),o===n)break;r[u._=n]=u,r[t._=n=o]=t}}var e={},r=[],a=0;return e.push=function(n){return t(r[n._=a]=n,a++),a},e.pop=function(){if(!(0>=a)){var t,e=r[0];return--a>0&&(t=r[a],n(r[t._=0]=t,0)),e}},e.remove=function(e){var i,o=e._;if(r[o]===e)return o!==--a&&(i=r[a],(p(i,e)<0?t:n)(r[i._=o]=i,o)),o},e}function v(t){if(!t)return y;var n,e,r=t.scale[0],a=t.scale[1],i=t.translate[0],o=t.translate[1];return function(t,u){u||(n=e=0),t[0]=(n+=t[0])*r+i,t[1]=(e+=t[1])*a+o}}function m(t){if(!t)return y;var n,e,r=t.scale[0],a=t.scale[1],i=t.translate[0],o=t.translate[1];return function(t,u){u||(n=e=0);var c=(t[0]-i)/r|0,s=(t[1]-o)/a|0;t[0]=c-n,t[1]=s-e,n=c,e=s}}function y(){}var M={version:"1.6.19",mesh:function(t){return u(t,r.apply(this,arguments))},meshArcs:r,merge:function(t){return u(t,a.apply(this,arguments))},mergeArcs:a,feature:i,neighbors:l,presimplify:f};"function"==typeof define&&define.amd?define(M):"object"==typeof e&&e.exports?e.exports=M:this.topojson=M}()},{}],5:[function(t,n,e){(function(){function t(t){function n(n,e,r,a,i,o){for(;i>=0&&o>i;i+=t){var u=a?a[i]:i;r=e(r,n[u],u,n)}return r}return function(e,r,a,i){r=w(r,i,4);var o=!A(e)&&b.keys(e),u=(o||e).length,c=t>0?0:u-1;return arguments.length<3&&(a=e[o?o[c]:c],c+=t),n(e,r,a,o,c,u)}}function r(t){return function(n,e,r){e=x(e,r);for(var a=S(n),i=t>0?0:a-1;i>=0&&a>i;i+=t)if(e(n[i],i,n))return i;return-1}}function a(t,n,e){return function(r,a,i){var o=0,u=S(r);if("number"==typeof i)t>0?o=i>=0?i:Math.max(i+u,o):u=i>=0?Math.min(i+1,u):i+u+1;else if(e&&i&&u)return i=e(r,a),r[i]===a?i:-1;if(a!==a)return i=n(h.call(r,o,u),b.isNaN),i>=0?i+o:-1;for(i=t>0?o:u-1;i>=0&&u>i;i+=t)if(r[i]===a)return i;return-1}}function i(t,n){var e=q.length,r=t.constructor,a=b.isFunction(r)&&r.prototype||s,i="constructor";for(b.has(t,i)&&!b.contains(n,i)&&n.push(i);e--;)i=q[e],i in t&&t[i]!==a[i]&&!b.contains(n,i)&&n.push(i)}var o=this,u=o._,c=Array.prototype,s=Object.prototype,l=Function.prototype,f=c.push,h=c.slice,d=s.toString,p=s.hasOwnProperty,g=Array.isArray,v=Object.keys,m=l.bind,y=Object.create,M=function(){},b=function(t){return t instanceof b?t:this instanceof b?void(this._wrapped=t):new b(t)};"undefined"!=typeof e?("undefined"!=typeof n&&n.exports&&(e=n.exports=b),e._=b):o._=b,b.VERSION="1.8.3";var w=function(t,n,e){if(void 0===n)return t;switch(null==e?3:e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,a){return t.call(n,e,r,a)};case 4:return function(e,r,a,i){return t.call(n,e,r,a,i)}}return function(){return t.apply(n,arguments)}},x=function(t,n,e){return null==t?b.identity:b.isFunction(t)?w(t,n,e):b.isObject(t)?b.matcher(t):b.property(t)};b.iteratee=function(t,n){return x(t,n,1/0)};var _=function(t,n){return function(e){var r=arguments.length;if(2>r||null==e)return e;for(var a=1;r>a;a++)for(var i=arguments[a],o=t(i),u=o.length,c=0;u>c;c++){var s=o[c];n&&void 0!==e[s]||(e[s]=i[s])}return e}},k=function(t){if(!b.isObject(t))return{};if(y)return y(t);M.prototype=t;var n=new M;return M.prototype=null,n},E=function(t){return function(n){return null==n?void 0:n[t]}},T=Math.pow(2,53)-1,S=E("length"),A=function(t){var n=S(t);return"number"==typeof n&&n>=0&&T>=n};b.each=b.forEach=function(t,n,e){n=w(n,e);var r,a;if(A(t))for(r=0,a=t.length;a>r;r++)n(t[r],r,t);else{var i=b.keys(t);for(r=0,a=i.length;a>r;r++)n(t[i[r]],i[r],t)}return t},b.map=b.collect=function(t,n,e){n=x(n,e);for(var r=!A(t)&&b.keys(t),a=(r||t).length,i=Array(a),o=0;a>o;o++){var u=r?r[o]:o;i[o]=n(t[u],u,t)}return i},b.reduce=b.foldl=b.inject=t(1),b.reduceRight=b.foldr=t(-1),b.find=b.detect=function(t,n,e){var r;return r=A(t)?b.findIndex(t,n,e):b.findKey(t,n,e),void 0!==r&&-1!==r?t[r]:void 0},b.filter=b.select=function(t,n,e){var r=[];return n=x(n,e),b.each(t,function(t,e,a){n(t,e,a)&&r.push(t)}),r},b.reject=function(t,n,e){return b.filter(t,b.negate(x(n)),e)},b.every=b.all=function(t,n,e){n=x(n,e);for(var r=!A(t)&&b.keys(t),a=(r||t).length,i=0;a>i;i++){var o=r?r[i]:i;if(!n(t[o],o,t))return!1}return!0},b.some=b.any=function(t,n,e){n=x(n,e);for(var r=!A(t)&&b.keys(t),a=(r||t).length,i=0;a>i;i++){var o=r?r[i]:i;if(n(t[o],o,t))return!0}return!1},b.contains=b.includes=b.include=function(t,n,e,r){return A(t)||(t=b.values(t)),("number"!=typeof e||r)&&(e=0),b.indexOf(t,n,e)>=0},b.invoke=function(t,n){var e=h.call(arguments,2),r=b.isFunction(n);return b.map(t,function(t){var a=r?n:t[n];return null==a?a:a.apply(t,e)})},b.pluck=function(t,n){return b.map(t,b.property(n))},b.where=function(t,n){return b.filter(t,b.matcher(n))},b.findWhere=function(t,n){return b.find(t,b.matcher(n))},b.max=function(t,n,e){var r,a,i=-(1/0),o=-(1/0);if(null==n&&null!=t){t=A(t)?t:b.values(t);for(var u=0,c=t.length;c>u;u++)r=t[u],r>i&&(i=r)}else n=x(n,e),b.each(t,function(t,e,r){a=n(t,e,r),(a>o||a===-(1/0)&&i===-(1/0))&&(i=t,o=a)});return i},b.min=function(t,n,e){var r,a,i=1/0,o=1/0;if(null==n&&null!=t){t=A(t)?t:b.values(t);for(var u=0,c=t.length;c>u;u++)r=t[u],i>r&&(i=r)}else n=x(n,e),b.each(t,function(t,e,r){a=n(t,e,r),(o>a||a===1/0&&i===1/0)&&(i=t,o=a)});return i},b.shuffle=function(t){for(var n,e=A(t)?t:b.values(t),r=e.length,a=Array(r),i=0;r>i;i++)n=b.random(0,i),n!==i&&(a[i]=a[n]),a[n]=e[i];return a},b.sample=function(t,n,e){return null==n||e?(A(t)||(t=b.values(t)),t[b.random(t.length-1)]):b.shuffle(t).slice(0,Math.max(0,n))},b.sortBy=function(t,n,e){return n=x(n,e),b.pluck(b.map(t,function(t,e,r){return{value:t,index:e,criteria:n(t,e,r)}}).sort(function(t,n){var e=t.criteria,r=n.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(r>e||void 0===r)return-1}return t.index-n.index}),"value")};var N=function(t){return function(n,e,r){var a={};return e=x(e,r),b.each(n,function(r,i){var o=e(r,i,n);t(a,r,o)}),a}};b.groupBy=N(function(t,n,e){b.has(t,e)?t[e].push(n):t[e]=[n]}),b.indexBy=N(function(t,n,e){t[e]=n}),b.countBy=N(function(t,n,e){b.has(t,e)?t[e]++:t[e]=1}),b.toArray=function(t){return t?b.isArray(t)?h.call(t):A(t)?b.map(t,b.identity):b.values(t):[]},b.size=function(t){return null==t?0:A(t)?t.length:b.keys(t).length},b.partition=function(t,n,e){n=x(n,e);var r=[],a=[];return b.each(t,function(t,e,i){(n(t,e,i)?r:a).push(t)}),[r,a]},b.first=b.head=b.take=function(t,n,e){return null==t?void 0:null==n||e?t[0]:b.initial(t,t.length-n)},b.initial=function(t,n,e){return h.call(t,0,Math.max(0,t.length-(null==n||e?1:n)))},b.last=function(t,n,e){return null==t?void 0:null==n||e?t[t.length-1]:b.rest(t,Math.max(0,t.length-n))},b.rest=b.tail=b.drop=function(t,n,e){return h.call(t,null==n||e?1:n)},b.compact=function(t){return b.filter(t,b.identity)};var j=function(t,n,e,r){for(var a=[],i=0,o=r||0,u=S(t);u>o;o++){var c=t[o];if(A(c)&&(b.isArray(c)||b.isArguments(c))){n||(c=j(c,n,e));var s=0,l=c.length;for(a.length+=l;l>s;)a[i++]=c[s++]}else e||(a[i++]=c)}return a};b.flatten=function(t,n){return j(t,n,!1)},b.without=function(t){return b.difference(t,h.call(arguments,1))},b.uniq=b.unique=function(t,n,e,r){b.isBoolean(n)||(r=e,e=n,n=!1),null!=e&&(e=x(e,r));for(var a=[],i=[],o=0,u=S(t);u>o;o++){var c=t[o],s=e?e(c,o,t):c;n?(o&&i===s||a.push(c),i=s):e?b.contains(i,s)||(i.push(s),a.push(c)):b.contains(a,c)||a.push(c);
}return a},b.union=function(){return b.uniq(j(arguments,!0,!0))},b.intersection=function(t){for(var n=[],e=arguments.length,r=0,a=S(t);a>r;r++){var i=t[r];if(!b.contains(n,i)){for(var o=1;e>o&&b.contains(arguments[o],i);o++);o===e&&n.push(i)}}return n},b.difference=function(t){var n=j(arguments,!0,!0,1);return b.filter(t,function(t){return!b.contains(n,t)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(t){for(var n=t&&b.max(t,S).length||0,e=Array(n),r=0;n>r;r++)e[r]=b.pluck(t,r);return e},b.object=function(t,n){for(var e={},r=0,a=S(t);a>r;r++)n?e[t[r]]=n[r]:e[t[r][0]]=t[r][1];return e},b.findIndex=r(1),b.findLastIndex=r(-1),b.sortedIndex=function(t,n,e,r){e=x(e,r,1);for(var a=e(n),i=0,o=S(t);o>i;){var u=Math.floor((i+o)/2);e(t[u])<a?i=u+1:o=u}return i},b.indexOf=a(1,b.findIndex,b.sortedIndex),b.lastIndexOf=a(-1,b.findLastIndex),b.range=function(t,n,e){null==n&&(n=t||0,t=0),e=e||1;for(var r=Math.max(Math.ceil((n-t)/e),0),a=Array(r),i=0;r>i;i++,t+=e)a[i]=t;return a};var R=function(t,n,e,r,a){if(!(r instanceof n))return t.apply(e,a);var i=k(t.prototype),o=t.apply(i,a);return b.isObject(o)?o:i};b.bind=function(t,n){if(m&&t.bind===m)return m.apply(t,h.call(arguments,1));if(!b.isFunction(t))throw new TypeError("Bind must be called on a function");var e=h.call(arguments,2),r=function(){return R(t,r,n,this,e.concat(h.call(arguments)))};return r},b.partial=function(t){var n=h.call(arguments,1),e=function(){for(var r=0,a=n.length,i=Array(a),o=0;a>o;o++)i[o]=n[o]===b?arguments[r++]:n[o];for(;r<arguments.length;)i.push(arguments[r++]);return R(t,e,this,this,i)};return e},b.bindAll=function(t){var n,e,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(n=1;r>n;n++)e=arguments[n],t[e]=b.bind(t[e],t);return t},b.memoize=function(t,n){var e=function(r){var a=e.cache,i=""+(n?n.apply(this,arguments):r);return b.has(a,i)||(a[i]=t.apply(this,arguments)),a[i]};return e.cache={},e},b.delay=function(t,n){var e=h.call(arguments,2);return setTimeout(function(){return t.apply(null,e)},n)},b.defer=b.partial(b.delay,b,1),b.throttle=function(t,n,e){var r,a,i,o=null,u=0;e||(e={});var c=function(){u=e.leading===!1?0:b.now(),o=null,i=t.apply(r,a),o||(r=a=null)};return function(){var s=b.now();u||e.leading!==!1||(u=s);var l=n-(s-u);return r=this,a=arguments,0>=l||l>n?(o&&(clearTimeout(o),o=null),u=s,i=t.apply(r,a),o||(r=a=null)):o||e.trailing===!1||(o=setTimeout(c,l)),i}},b.debounce=function(t,n,e){var r,a,i,o,u,c=function(){var s=b.now()-o;n>s&&s>=0?r=setTimeout(c,n-s):(r=null,e||(u=t.apply(i,a),r||(i=a=null)))};return function(){i=this,a=arguments,o=b.now();var s=e&&!r;return r||(r=setTimeout(c,n)),s&&(u=t.apply(i,a),i=a=null),u}},b.wrap=function(t,n){return b.partial(n,t)},b.negate=function(t){return function(){return!t.apply(this,arguments)}},b.compose=function(){var t=arguments,n=t.length-1;return function(){for(var e=n,r=t[n].apply(this,arguments);e--;)r=t[e].call(this,r);return r}},b.after=function(t,n){return function(){return--t<1?n.apply(this,arguments):void 0}},b.before=function(t,n){var e;return function(){return--t>0&&(e=n.apply(this,arguments)),1>=t&&(n=null),e}},b.once=b.partial(b.before,2);var C=!{toString:null}.propertyIsEnumerable("toString"),q=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(t){if(!b.isObject(t))return[];if(v)return v(t);var n=[];for(var e in t)b.has(t,e)&&n.push(e);return C&&i(t,n),n},b.allKeys=function(t){if(!b.isObject(t))return[];var n=[];for(var e in t)n.push(e);return C&&i(t,n),n},b.values=function(t){for(var n=b.keys(t),e=n.length,r=Array(e),a=0;e>a;a++)r[a]=t[n[a]];return r},b.mapObject=function(t,n,e){n=x(n,e);for(var r,a=b.keys(t),i=a.length,o={},u=0;i>u;u++)r=a[u],o[r]=n(t[r],r,t);return o},b.pairs=function(t){for(var n=b.keys(t),e=n.length,r=Array(e),a=0;e>a;a++)r[a]=[n[a],t[n[a]]];return r},b.invert=function(t){for(var n={},e=b.keys(t),r=0,a=e.length;a>r;r++)n[t[e[r]]]=e[r];return n},b.functions=b.methods=function(t){var n=[];for(var e in t)b.isFunction(t[e])&&n.push(e);return n.sort()},b.extend=_(b.allKeys),b.extendOwn=b.assign=_(b.keys),b.findKey=function(t,n,e){n=x(n,e);for(var r,a=b.keys(t),i=0,o=a.length;o>i;i++)if(r=a[i],n(t[r],r,t))return r},b.pick=function(t,n,e){var r,a,i={},o=t;if(null==o)return i;b.isFunction(n)?(a=b.allKeys(o),r=w(n,e)):(a=j(arguments,!1,!1,1),r=function(t,n,e){return n in e},o=Object(o));for(var u=0,c=a.length;c>u;u++){var s=a[u],l=o[s];r(l,s,o)&&(i[s]=l)}return i},b.omit=function(t,n,e){if(b.isFunction(n))n=b.negate(n);else{var r=b.map(j(arguments,!1,!1,1),String);n=function(t,n){return!b.contains(r,n)}}return b.pick(t,n,e)},b.defaults=_(b.allKeys,!0),b.create=function(t,n){var e=k(t);return n&&b.extendOwn(e,n),e},b.clone=function(t){return b.isObject(t)?b.isArray(t)?t.slice():b.extend({},t):t},b.tap=function(t,n){return n(t),t},b.isMatch=function(t,n){var e=b.keys(n),r=e.length;if(null==t)return!r;for(var a=Object(t),i=0;r>i;i++){var o=e[i];if(n[o]!==a[o]||!(o in a))return!1}return!0};var P=function(t,n,e,r){if(t===n)return 0!==t||1/t===1/n;if(null==t||null==n)return t===n;t instanceof b&&(t=t._wrapped),n instanceof b&&(n=n._wrapped);var a=d.call(t);if(a!==d.call(n))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!==+t?+n!==+n:0===+t?1/+t===1/n:+t===+n;case"[object Date]":case"[object Boolean]":return+t===+n}var i="[object Array]"===a;if(!i){if("object"!=typeof t||"object"!=typeof n)return!1;var o=t.constructor,u=n.constructor;if(o!==u&&!(b.isFunction(o)&&o instanceof o&&b.isFunction(u)&&u instanceof u)&&"constructor"in t&&"constructor"in n)return!1}e=e||[],r=r||[];for(var c=e.length;c--;)if(e[c]===t)return r[c]===n;if(e.push(t),r.push(n),i){if(c=t.length,c!==n.length)return!1;for(;c--;)if(!P(t[c],n[c],e,r))return!1}else{var s,l=b.keys(t);if(c=l.length,b.keys(n).length!==c)return!1;for(;c--;)if(s=l[c],!b.has(n,s)||!P(t[s],n[s],e,r))return!1}return e.pop(),r.pop(),!0};b.isEqual=function(t,n){return P(t,n)},b.isEmpty=function(t){return null==t?!0:A(t)&&(b.isArray(t)||b.isString(t)||b.isArguments(t))?0===t.length:0===b.keys(t).length},b.isElement=function(t){return!(!t||1!==t.nodeType)},b.isArray=g||function(t){return"[object Array]"===d.call(t)},b.isObject=function(t){var n=typeof t;return"function"===n||"object"===n&&!!t},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){b["is"+t]=function(n){return d.call(n)==="[object "+t+"]"}}),b.isArguments(arguments)||(b.isArguments=function(t){return b.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(t){return"function"==typeof t||!1}),b.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},b.isNaN=function(t){return b.isNumber(t)&&t!==+t},b.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===d.call(t)},b.isNull=function(t){return null===t},b.isUndefined=function(t){return void 0===t},b.has=function(t,n){return null!=t&&p.call(t,n)},b.noConflict=function(){return o._=u,this},b.identity=function(t){return t},b.constant=function(t){return function(){return t}},b.noop=function(){},b.property=E,b.propertyOf=function(t){return null==t?function(){}:function(n){return t[n]}},b.matcher=b.matches=function(t){return t=b.extendOwn({},t),function(n){return b.isMatch(n,t)}},b.times=function(t,n,e){var r=Array(Math.max(0,t));n=w(n,e,1);for(var a=0;t>a;a++)r[a]=n(a);return r},b.random=function(t,n){return null==n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))},b.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},F=b.invert(L),D=function(t){var n=function(n){return t[n]},e="(?:"+b.keys(t).join("|")+")",r=RegExp(e),a=RegExp(e,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(a,n):t}};b.escape=D(L),b.unescape=D(F),b.result=function(t,n,e){var r=null==t?void 0:t[n];return void 0===r&&(r=e),b.isFunction(r)?r.call(t):r};var O=0;b.uniqueId=function(t){var n=++O+"";return t?t+n:n},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,I={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\u2028|\u2029/g,H=function(t){return"\\"+I[t]};b.template=function(t,n,e){!n&&e&&(n=e),n=b.defaults({},n,b.templateSettings);var r=RegExp([(n.escape||z).source,(n.interpolate||z).source,(n.evaluate||z).source].join("|")+"|$","g"),a=0,i="__p+='";t.replace(r,function(n,e,r,o,u){return i+=t.slice(a,u).replace(U,H),a=u+n.length,e?i+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":r?i+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),n}),i+="';\n",n.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(n.variable||"obj","_",i)}catch(t){throw t.source=i,t}var u=function(t){return o.call(this,t,b)},c=n.variable||"obj";return u.source="function("+c+"){\n"+i+"}",u},b.chain=function(t){var n=b(t);return n._chain=!0,n};var G=function(t,n){return t._chain?b(n).chain():n};b.mixin=function(t){b.each(b.functions(t),function(n){var e=b[n]=t[n];b.prototype[n]=function(){var t=[this._wrapped];return f.apply(t,arguments),G(this,e.apply(b,t))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=c[t];b.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0],G(this,e)}}),b.each(["concat","join","slice"],function(t){var n=c[t];b.prototype[t]=function(){return G(this,n.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}).call(this)},{}],6:[function(t,n,e){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(t){var n=t("./makePromise"),e=t("./Scheduler"),r=t("./env").asap;return n({scheduler:new e(r)})})}("function"==typeof define&&define.amd?define:function(e){n.exports=e(t)})},{"./Scheduler":7,"./env":19,"./makePromise":21}],7:[function(t,n,e){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(){function t(t){this._async=t,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var n=this;this.drain=function(){n._drain()}}return t.prototype.enqueue=function(t){this._queue[this._queueLen++]=t,this.run()},t.prototype.afterQueue=function(t){this._afterQueue[this._afterQueueLen++]=t,this.run()},t.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},t.prototype._drain=function(){for(var t=0;t<this._queueLen;++t)this._queue[t].run(),this._queue[t]=void 0;for(this._queueLen=0,this._running=!1,t=0;t<this._afterQueueLen;++t)this._afterQueue[t].run(),this._afterQueue[t]=void 0;this._afterQueueLen=0},t})}("function"==typeof define&&define.amd?define:function(t){n.exports=t()})},{}],8:[function(t,n,e){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(){function t(n){Error.call(this),this.message=n,this.name=t.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t})}("function"==typeof define&&define.amd?define:function(t){n.exports=t()})},{}],9:[function(t,n,e){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(){function t(t,e){function r(n,r,i){var o=t._defer(),u=i.length,c=new Array(u);return a({f:n,thisArg:r,args:i,params:c,i:u-1,call:e},o._handler),o}function a(n,r){if(n.i<0)return e(n.f,n.thisArg,n.params,r);var a=t._handler(n.args[n.i]);a.fold(i,n,void 0,r)}function i(t,n,e){t.params[t.i]=n,t.i-=1,a(t,e)}return arguments.length<2&&(e=n),r}function n(t,n,e,r){try{r.resolve(t.apply(n,e))}catch(t){r.reject(t)}}return t.tryCatchResolve=n,t})}("function"==typeof define&&define.amd?define:function(t){n.exports=t()})},{}],10:[function(t,n,e){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(t){var n=t("../state"),e=t("../apply");return function(t){function r(n){function e(t){l=null,this.resolve(t)}function r(t){this.resolved||(l.push(t),0===--s&&this.reject(l))}for(var a,i,o=t._defer(),u=o._handler,c=n.length>>>0,s=c,l=[],f=0;c>f;++f)if(i=n[f],void 0!==i||f in n){if(a=t._handler(i),a.state()>0){u.become(a),t._visitRemaining(n,f,a);break}a.visit(u,e,r)}else--s;return 0===s&&u.reject(new RangeError("any(): array must not be empty")),o}function a(n,e){function r(t){this.resolved||(l.push(t),0===--d&&(f=null,this.resolve(l)))}function a(t){this.resolved||(f.push(t),0===--i&&(l=null,this.reject(f)))}var i,o,u,c=t._defer(),s=c._handler,l=[],f=[],h=n.length>>>0,d=0;for(u=0;h>u;++u)o=n[u],(void 0!==o||u in n)&&++d;for(e=Math.max(e,0),i=d-e+1,d=Math.min(e,d),e>d?s.reject(new RangeError("some(): array must contain at least "+e+" item(s), but had "+d)):0===d&&s.resolve(l),u=0;h>u;++u)o=n[u],(void 0!==o||u in n)&&t._handler(o).visit(s,r,a,s.notify);return c}function i(n,e){return t._traverse(e,n)}function o(n,e){var r=y.call(n);return t._traverse(e,r).then(function(t){return u(r,t)})}function u(n,e){for(var r=e.length,a=new Array(r),i=0,o=0;r>i;++i)e[i]&&(a[o++]=t._handler(n[i]).value);return a.length=o,a}function c(t){return g(t.map(s))}function s(e){var r=t._handler(e);return 0===r.state()?p(e).then(n.fulfilled,n.rejected):(r._unreport(),n.inspect(r))}function l(t,n){return arguments.length>2?v.call(t,h(n),arguments[2]):v.call(t,h(n))}function f(t,n){return arguments.length>2?m.call(t,h(n),arguments[2]):m.call(t,h(n))}function h(t){return function(n,e,r){return d(t,void 0,[n,e,r])}}var d=e(t),p=t.resolve,g=t.all,v=Array.prototype.reduce,m=Array.prototype.reduceRight,y=Array.prototype.slice;return t.any=r,t.some=a,t.settle=c,t.map=i,t.filter=o,t.reduce=l,t.reduceRight=f,t.prototype.spread=function(t){return this.then(g).then(function(n){return t.apply(this,n)})},t}})}("function"==typeof define&&define.amd?define:function(e){n.exports=e(t)})},{"../apply":9,"../state":22}],11:[function(t,n,e){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(){function t(){throw new TypeError("catch predicate must be a function")}function n(t,n){return e(n)?t instanceof n:n(t)}function e(t){return t===Error||null!=t&&t.prototype instanceof Error}function r(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function a(t){return t}return function(e){function i(t,e){return function(r){return n(r,e)?t.call(this,r):s(r)}}function o(t,n,e,a){var i=t.call(n);return r(i)?u(i,e,a):e(a)}function u(t,n,e){return c(t).then(function(){return n(e)})}var c=e.resolve,s=e.reject,l=e.prototype.catch;return e.prototype.done=function(t,n){this._handler.visit(this._handler.receiver,t,n)},e.prototype.catch=e.prototype.otherwise=function(n){return arguments.length<2?l.call(this,n):"function"!=typeof n?this.ensure(t):l.call(this,i(arguments[1],n))},e.prototype.finally=e.prototype.ensure=function(t){return"function"!=typeof t?this:this.then(function(n){return o(t,this,a,n)},function(n){return o(t,this,s,n)})},e.prototype.else=e.prototype.orElse=function(t){return this.then(void 0,function(){return t})},e.prototype.yield=function(t){return this.then(function(){return t})},e.prototype.tap=function(t){return this.then(t).yield(this)},e}})}("function"==typeof define&&define.amd?define:function(t){n.exports=t()})},{}],12:[function(t,n,e){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(){return function(t){return t.prototype.fold=function(n,e){var r=this._beget();return this._handler.fold(function(e,r,a){t._handler(e).fold(function(t,e,r){r.resolve(n.call(this,e,t))},r,this,a)},e,r._handler.receiver,r._handler),r},t}})}("function"==typeof define&&define.amd?define:function(t){n.exports=t()})},{}],13:[function(t,n,e){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(t){var n=t("../state").inspect;return function(t){return t.prototype.inspect=function(){return n(t._handler(this))},t}})}("function"==typeof define&&define.amd?define:function(e){n.exports=e(t)})},{"../state":22}],14:[function(t,n,e){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(){return function(t){function n(t,n,r,a){return e(function(n){return[n,t(n)]},n,r,a)}function e(t,n,a,i){function o(i,o){return r(a(i)).then(function(){return e(t,n,a,o)})}return r(i).then(function(e){return r(n(e)).then(function(n){return n?e:r(t(e)).spread(o)})})}var r=t.resolve;return t.iterate=n,t.unfold=e,t}})}("function"==typeof define&&define.amd?define:function(t){n.exports=t()})},{}],15:[function(t,n,e){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(){return function(t){return t.prototype.progress=function(t){return this.then(void 0,void 0,t)},t}})}("function"==typeof define&&define.amd?define:function(t){n.exports=t()})},{}],16:[function(t,n,e){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(t){function n(t,n,r,a){return e.setTimer(function(){t(r,a,n)},n)}var e=t("../env"),r=t("../TimeoutError");return function(t){function a(t,e,r){n(i,t,e,r)}function i(t,n){n.resolve(t)}function o(t,n,e){var a="undefined"==typeof t?new r("timed out after "+e+"ms"):t;n.reject(a)}return t.prototype.delay=function(t){var n=this._beget();return this._handler.fold(a,t,void 0,n._handler),n},t.prototype.timeout=function(t,r){var a=this._beget(),i=a._handler,u=n(o,t,r,a._handler);return this._handler.visit(i,function(t){e.clearTimer(u),this.resolve(t)},function(t){e.clearTimer(u),this.reject(t)},i.notify),a},t}})}("function"==typeof define&&define.amd?define:function(e){n.exports=e(t)})},{"../TimeoutError":8,"../env":19}],17:[function(t,n,e){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(t){function n(t){throw t}function e(){}var r=t("../env").setTimer,a=t("../format");return function(t){function i(t){t.handled||(d.push(t),l("Potentially unhandled rejection ["+t.id+"] "+a.formatError(t.value)))}function o(t){var n=d.indexOf(t);n>=0&&(d.splice(n,1),f("Handled previous rejection ["+t.id+"] "+a.formatObject(t.value)))}function u(t,n){h.push(t,n),null===p&&(p=r(c,0))}function c(){for(p=null;h.length>0;)h.shift()(h.shift())}var s,l=e,f=e;"undefined"!=typeof console&&(s=console,l="undefined"!=typeof s.error?function(t){s.error(t)}:function(t){s.log(t)},f="undefined"!=typeof s.info?function(t){s.info(t)}:function(t){s.log(t)}),t.onPotentiallyUnhandledRejection=function(t){u(i,t)},t.onPotentiallyUnhandledRejectionHandled=function(t){u(o,t)},t.onFatalRejection=function(t){u(n,t.value)};var h=[],d=[],p=null;return t}})}("function"==typeof define&&define.amd?define:function(e){n.exports=e(t)})},{"../env":19,"../format":20}],18:[function(t,n,e){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(){return function(t){return t.prototype.with=t.prototype.withThis=function(t){var n=this._beget(),e=n._handler;return e.receiver=t,this._handler.chain(e,t),n},t}})}("function"==typeof define&&define.amd?define:function(t){n.exports=t()})},{}],19:[function(t,n,e){(function(e){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(t){function n(){return"undefined"!=typeof e&&"[object process]"===Object.prototype.toString.call(e)}function r(){return"function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver}function a(t){function n(){var t=e;e=void 0,t()}var e,r=document.createTextNode(""),a=new t(n);a.observe(r,{characterData:!0});var i=0;return function(t){e=t,r.data=i^=1}}var i,o="undefined"!=typeof setTimeout&&setTimeout,u=function(t,n){return setTimeout(t,n)},c=function(t){return clearTimeout(t)},s=function(t){return o(t,0)};if(n())s=function(t){return e.nextTick(t)};else if(i=r())s=a(i);else if(!o){var l=t,f=l("vertx");u=function(t,n){return f.setTimer(n,t)},c=f.cancelTimer,s=f.runOnLoop||f.runOnContext}return{setTimer:u,clearTimer:c,asap:s}})}("function"==typeof define&&define.amd?define:function(e){n.exports=e(t)})}).call(this,t("_process"))},{_process:66}],20:[function(t,n,e){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(){function t(t){var e="object"==typeof t&&null!==t&&t.stack?t.stack:n(t);return t instanceof Error?e:e+" (WARNING: non-Error used)"}function n(t){var n=String(t);return"[object Object]"===n&&"undefined"!=typeof JSON&&(n=e(t,n)),n}function e(t,n){try{return JSON.stringify(t)}catch(t){return n}}return{formatError:t,formatObject:n,tryStringify:e}})}("function"==typeof define&&define.amd?define:function(t){n.exports=t()})},{}],21:[function(t,n,e){(function(t){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(n){"use strict";n(function(){return function(n){function e(t,n){this._handler=t===b?n:r(t)}function r(t){function n(t){a.resolve(t)}function e(t){a.reject(t)}function r(t){a.notify(t)}var a=new x;try{t(n,e,r)}catch(t){e(t)}return a}function a(t){return L(t)?t:new e(b,new _(m(t)))}function i(t){return new e(b,new _(new T(t)))}function o(){return tt}function u(){return new e(b,new x)}function c(t,n){var e=new x(t.receiver,t.join().context);return new n(b,e)}function s(t){return f(X,null,t)}function l(t,n){return f(I,t,n)}function f(t,n,r){function a(e,a,o){o.resolved||h(r,i,e,t(n,a,e),o)}function i(t,n,e){l[t]=n,0===--s&&e.become(new E(l))}for(var o,u="function"==typeof n?a:i,c=new x,s=r.length>>>0,l=new Array(s),f=0;f<r.length&&!c.resolved;++f)o=r[f],void 0!==o||f in r?h(r,u,f,o,c):--s;return 0===s&&c.become(new E(l)),new e(b,c)}function h(t,n,e,r,a){if(F(r)){var i=y(r),o=i.state();0===o?i.fold(n,e,void 0,a):o>0?n(e,i.value,a):(a.become(i),d(t,e+1,i))}else n(e,r,a)}function d(t,n,e){for(var r=n;r<t.length;++r)p(m(t[r]),e)}function p(t,n){if(t!==n){var e=t.state();0===e?t.visit(t,void 0,t._unreport):0>e&&t._unreport()}}function g(t){return"object"!=typeof t||null===t?i(new TypeError("non-iterable passed to race()")):0===t.length?o():1===t.length?a(t[0]):v(t)}function v(t){var n,r,a,i=new x;for(n=0;n<t.length;++n)if(r=t[n],void 0!==r||n in t){if(a=m(r),0!==a.state()){i.become(a),d(t,n+1,a);break}a.visit(i,i.resolve,i.reject)}return new e(b,i)}function m(t){return L(t)?t._handler.join():F(t)?M(t):new E(t)}function y(t){return L(t)?t._handler.join():M(t)}function M(t){try{var n=t.then;return"function"==typeof n?new k(n,t):new E(t)}catch(t){return new T(t)}}function b(){}function w(){}function x(t,n){e.createContext(this,n),this.consumers=void 0,this.receiver=t,this.handler=void 0,this.resolved=!1}function _(t){this.handler=t}function k(t,n){x.call(this),$.enqueue(new C(t,n,this))}function E(t){e.createContext(this),this.value=t}function T(t){e.createContext(this),this.id=++K,this.value=t,this.handled=!1,this.reported=!1,this._report()}function S(t,n){this.rejection=t,this.context=n}function A(t){this.rejection=t}function N(){return new T(new TypeError("Promise cycle"))}function j(t,n){this.continuation=t,this.handler=n}function R(t,n){this.handler=n,this.value=t}function C(t,n,e){this._then=t,this.thenable=n,this.resolver=e}function q(t,n,e,r,a){try{t.call(n,e,r,a)}catch(t){r(t)}}function P(t,n,e,r){this.f=t,this.z=n,this.c=e,this.to=r,this.resolver=J,this.receiver=this}function L(t){return t instanceof e}function F(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function D(t,n,r,a){return"function"!=typeof t?a.become(n):(e.enterContext(n),U(t,n.value,r,a),void e.exitContext())}function O(t,n,r,a,i){return"function"!=typeof t?i.become(r):(e.enterContext(r),H(t,n,r.value,a,i),void e.exitContext())}function z(t,n,r,a,i){return"function"!=typeof t?i.notify(n):(e.enterContext(r),G(t,n,a,i),void e.exitContext())}function I(t,n,e){try{return t(n,e)}catch(t){return i(t)}}function U(t,n,e,r){try{r.become(m(t.call(e,n)))}catch(t){r.become(new T(t))}}function H(t,n,e,r,a){try{t.call(r,n,e,a)}catch(t){a.become(new T(t))}}function G(t,n,e,r){try{r.notify(t.call(e,n))}catch(t){r.notify(t)}}function B(t,n){n.prototype=Y(t.prototype),n.prototype.constructor=n}function X(t,n){return n}function W(){}function Q(){return"undefined"!=typeof t&&null!==t&&"function"==typeof t.emit?function(n,e){return"unhandledRejection"===n?t.emit(n,e.value,e):t.emit(n,e)}:"undefined"!=typeof self&&"function"==typeof CustomEvent?function(t,n,e){var r=!1;try{var a=new e("unhandledRejection");r=a instanceof e}catch(t){}return r?function(t,r){var a=new e(t,{detail:{reason:r.value,key:r},bubbles:!1,cancelable:!0});return!n.dispatchEvent(a)}:t}(W,self,CustomEvent):W}var $=n.scheduler,V=Q(),Y=Object.create||function(t){function n(){}return n.prototype=t,new n};e.resolve=a,e.reject=i,e.never=o,e._defer=u,e._handler=m,e.prototype.then=function(t,n,e){var r=this._handler,a=r.join().state();if("function"!=typeof t&&a>0||"function"!=typeof n&&0>a)return new this.constructor(b,r);var i=this._beget(),o=i._handler;return r.chain(o,r.receiver,t,n,e),i},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype._beget=function(){return c(this._handler,this.constructor)},e.all=s,e.race=g,e._traverse=l,e._visitRemaining=d,b.prototype.when=b.prototype.become=b.prototype.notify=b.prototype.fail=b.prototype._unreport=b.prototype._report=W,b.prototype._state=0,b.prototype.state=function(){return this._state},b.prototype.join=function(){for(var t=this;void 0!==t.handler;)t=t.handler;return t},b.prototype.chain=function(t,n,e,r,a){this.when({resolver:t,receiver:n,fulfilled:e,rejected:r,progress:a})},b.prototype.visit=function(t,n,e,r){this.chain(J,t,n,e,r)},b.prototype.fold=function(t,n,e,r){this.when(new P(t,n,e,r))},B(b,w),w.prototype.become=function(t){t.fail()};var J=new w;B(b,x),x.prototype._state=0,x.prototype.resolve=function(t){this.become(m(t))},x.prototype.reject=function(t){this.resolved||this.become(new T(t))},x.prototype.join=function(){if(!this.resolved)return this;for(var t=this;void 0!==t.handler;)if(t=t.handler,t===this)return this.handler=N();return t},x.prototype.run=function(){var t=this.consumers,n=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var e=0;e<t.length;++e)n.when(t[e])},x.prototype.become=function(t){this.resolved||(this.resolved=!0,this.handler=t,void 0!==this.consumers&&$.enqueue(this),void 0!==this.context&&t._report(this.context))},x.prototype.when=function(t){this.resolved?$.enqueue(new j(t,this.handler)):void 0===this.consumers?this.consumers=[t]:this.consumers.push(t)},x.prototype.notify=function(t){this.resolved||$.enqueue(new R(t,this))},x.prototype.fail=function(t){var n="undefined"==typeof t?this.context:t;this.resolved&&this.handler.join().fail(n)},x.prototype._report=function(t){this.resolved&&this.handler.join()._report(t)},x.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},B(b,_),_.prototype.when=function(t){$.enqueue(new j(t,this))},_.prototype._report=function(t){this.join()._report(t)},_.prototype._unreport=function(){this.join()._unreport()},B(x,k),B(b,E),E.prototype._state=1,E.prototype.fold=function(t,n,e,r){O(t,n,this,e,r)},E.prototype.when=function(t){D(t.fulfilled,this,t.receiver,t.resolver)};var K=0;B(b,T),T.prototype._state=-1,T.prototype.fold=function(t,n,e,r){r.become(this)},T.prototype.when=function(t){"function"==typeof t.rejected&&this._unreport(),D(t.rejected,this,t.receiver,t.resolver)},T.prototype._report=function(t){$.afterQueue(new S(this,t))},T.prototype._unreport=function(){this.handled||(this.handled=!0,$.afterQueue(new A(this)))},T.prototype.fail=function(t){this.reported=!0,V("unhandledRejection",this),e.onFatalRejection(this,void 0===t?this.context:t)},S.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,V("unhandledRejection",this.rejection)||e.onPotentiallyUnhandledRejection(this.rejection,this.context))},A.prototype.run=function(){this.rejection.reported&&(V("rejectionHandled",this.rejection)||e.onPotentiallyUnhandledRejectionHandled(this.rejection))},e.createContext=e.enterContext=e.exitContext=e.onPotentiallyUnhandledRejection=e.onPotentiallyUnhandledRejectionHandled=e.onFatalRejection=W;var Z=new b,tt=new e(b,Z);return j.prototype.run=function(){this.handler.join().when(this.continuation)},R.prototype.run=function(){var t=this.handler.consumers;if(void 0!==t)for(var n,e=0;e<t.length;++e)n=t[e],z(n.progress,this.value,this.handler,n.receiver,n.resolver)},C.prototype.run=function(){function t(t){r.resolve(t)}function n(t){r.reject(t)}function e(t){r.notify(t)}var r=this.resolver;q(this._then,this.thenable,t,n,e)},P.prototype.fulfilled=function(t){this.f.call(this.c,this.z,t,this.to)},P.prototype.rejected=function(t){this.to.reject(t)},P.prototype.progress=function(t){this.to.notify(t)},e}})}("function"==typeof define&&define.amd?define:function(t){n.exports=t()})}).call(this,t("_process"))},{_process:66}],22:[function(t,n,e){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(){function t(){return{state:"pending"}}function n(t){return{state:"rejected",reason:t}}function e(t){return{state:"fulfilled",value:t}}function r(r){var a=r.state();return 0===a?t():a>0?e(r.value):n(r.value)}return{pending:t,fulfilled:e,rejected:n,inspect:r}})}("function"==typeof define&&define.amd?define:function(t){n.exports=t()})},{}],23:[function(t,n,e){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";t(function(t){function n(t,n,e,r){var a=_.resolve(t);return arguments.length<2?a:a.then(n,e,r)}function e(t){return new _(t)}function r(t){return function(){for(var n=0,e=arguments.length,r=new Array(e);e>n;++n)r[n]=arguments[n];return k(t,this,r)}}function a(t){for(var n=0,e=arguments.length-1,r=new Array(e);e>n;++n)r[n]=arguments[n+1];return k(t,this,r)}function i(){return new o}function o(){function t(t){r._handler.resolve(t)}function n(t){r._handler.reject(t)}function e(t){r._handler.notify(t)}var r=_._defer();this.promise=r,this.resolve=t,this.reject=n,this.notify=e,this.resolver={resolve:t,reject:n,notify:e}}function u(t){return t&&"function"==typeof t.then}function c(){return _.all(arguments)}function s(t){return n(t,_.all)}function l(t){return n(t,_.settle)}function f(t,e){return n(t,function(t){return _.map(t,e)})}function h(t,e){return n(t,function(t){return _.filter(t,e)})}var d=t("./lib/decorators/timed"),p=t("./lib/decorators/array"),g=t("./lib/decorators/flow"),v=t("./lib/decorators/fold"),m=t("./lib/decorators/inspect"),y=t("./lib/decorators/iterate"),M=t("./lib/decorators/progress"),b=t("./lib/decorators/with"),w=t("./lib/decorators/unhandledRejection"),x=t("./lib/TimeoutError"),_=[p,g,v,y,M,m,b,d,w].reduce(function(t,n){return n(t)},t("./lib/Promise")),k=t("./lib/apply")(_);return n.promise=e,n.resolve=_.resolve,n.reject=_.reject,n.lift=r,n.try=a,n.attempt=a,n.iterate=_.iterate,n.unfold=_.unfold,n.join=c,n.all=s,n.settle=l,n.any=r(_.any),n.some=r(_.some),n.race=r(_.race),n.map=f,n.filter=h,n.reduce=r(_.reduce),n.reduceRight=r(_.reduceRight),n.isPromiseLike=u,n.Promise=_,n.defer=i,n.TimeoutError=x,n})}("function"==typeof define&&define.amd?define:function(e){n.exports=e(t)})},{"./lib/Promise":6,"./lib/TimeoutError":8,"./lib/apply":9,"./lib/decorators/array":10,"./lib/decorators/flow":11,"./lib/decorators/fold":12,"./lib/decorators/inspect":13,"./lib/decorators/iterate":14,"./lib/decorators/progress":15,"./lib/decorators/timed":16,"./lib/decorators/unhandledRejection":17,"./lib/decorators/with":18}],24:[function(t,n,e){"use strict";n.exports=function(){var n=t("d3"),e=[/xtremeweatherforecast/i];return{contains:function(t){var n=t.split("/")[2]||"";return e.some(function(t){return t.test(n)})},deny:function(){return n.select("body").attr("style","font-size: 12em; color: red;").text("XX - contact @cambecc").selectAll("*").remove()}}}()},{d3:3}],25:[function(t,n,e){"use strict";var r=t("underscore"),a=t("../micro");n.exports={makeStrokeRenderer:function(t,n){return{renderTo:function(e,a){r.extend(e,n),e.beginPath(),a(t),e.stroke()}}},makeLayerRenderer:function(t){return{renderTo:function(n,e){a.clearContext(n),e.context(n),n.lineJoin="bevel",t.forEach(function(t){return t.renderTo(n,e)})}}}}},{"../micro":43,underscore:5}],26:[function(t,n,e){"use strict";function r(){return Date.now()+u.skew}function a(){return u.fixed}function i(t){var n=o.defer(),e=new XMLHttpRequest,r=Date.now();return e.onload=function(){var t=Date.now(),e=new Date(this.getResponseHeader("Date")).getTime()||NaN,a=e,i=t-r-(e-a),o=(a-r+(e-t))/2,u=Math.abs(o)>Math.max(1e4,10*i)?o:0;n.resolve({skew:u,"":i,"":o})},e.onerror=function(t){n.reject(t)},e.open("HEAD",t),e.setRequestHeader("Cache-Control","no-cache"),e.send(),n.promise}var o=t("when"),u={skew:0},c=o.resolve(u),s=n.exports={now:function(){return r()},calibration:function(t){if(void 0===t)return u;if("string"==typeof t.server)c=i(t.server).then(function(t){return s.now=r,u=t});else{var n=+new Date(t.fixed);n===n?(s.now=a,c=o.resolve(u={fixed:n})):(s.now=r,c=o.resolve(u={skew:+t.skew||0}))}return this},calibrated:function(){return c}}},{when:23}],27:[function(t,n,e){"use strict";n.exports=function(t){function n(e,r,a){var i,o,u=r.edges,c=u.length,s={type:"MultiPoint",coordinates:r.face},l=r.face.filter(function(t){return 90!==Math.abs(t[1])}),f=t.geo.bounds({type:"MultiPoint",coordinates:l}),h=!1,d=-1,p=f[1][0]-f[0][0],g=180===p||360===p?[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2]:t.geo.centroid(s);if(a)for(;++d<c&&u[d]!==a;);++d;for(var m=0;c>m;++m)o=u[(m+d)%c],Array.isArray(o)?(h||(e.point((i=t.geo.interpolate(o[0],g)(v))[0],i[1]),h=!0),e.point((i=t.geo.interpolate(o[1],g)(v))[0],i[1])):(h=!1,o!==a&&n(e,o,r))}function e(t,n){for(var e,r,a=t.length,i=null,o=0;a>o;++o){e=t[o];for(var u=n.length;--u>=0;)if(r=n[u],e[0]===r[0]&&e[1]===r[1]){if(i)return[i,e];i=e}}}function r(t,n){var e=o(t[1],t[0]),r=o(n[1],n[0]),a=c(e,r),s=u(e)/u(r);return i([1,0,t[0][0],0,1,t[0][1]],i([s,0,0,0,s,0],i([Math.cos(a),Math.sin(a),0,-Math.sin(a),Math.cos(a),0],[1,0,-n[0][0],0,1,-n[0][1]])))}function a(t){var n=1/(t[0]*t[4]-t[1]*t[3]);return[n*t[4],-n*t[1],n*(t[1]*t[5]-t[2]*t[4]),-n*t[3],n*t[0],n*(t[2]*t[3]-t[0]*t[5])]}function i(t,n){return[t[0]*n[0]+t[1]*n[3],t[0]*n[1]+t[1]*n[4],t[0]*n[2]+t[1]*n[5]+t[2],t[3]*n[0]+t[4]*n[3],t[3]*n[1]+t[4]*n[4],t[3]*n[2]+t[4]*n[5]+t[5]]}function o(t,n){return[t[0]-n[0],t[1]-n[1]]}function u(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function c(t,n){return Math.atan2(t[0]*n[1]-t[1]*n[0],t[0]*n[0]+t[1]*n[1])}function s(t,n){for(var e=0,r=t.length,a=0;r>e;++e)a+=t[e]*n[e];return a}function l(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function f(t){return[Math.atan2(t[1],t[0])*M,Math.asin(Math.max(-1,Math.min(1,t[2])))*M]}function h(t){var n=t[0]*y,e=t[1]*y,r=Math.cos(e);return[r*Math.cos(n),r*Math.sin(n),Math.sin(e)]}function d(t,n){return t&&n&&t[0]===n[0]&&t[1]===n[1]}function p(t){for(var n=t.length,e=[],r=t[n-1],a=0;n>a;++a)e.push([r,r=t[a]]);return e}function g(t){return t.project.invert||t.children&&t.children.some(g)}var v=1e-6,m=Math.PI,y=m/180,M=180/m;t.geo.polyhedron=function(o,u,c){function s(t,n){if(t.edges=p(t.face),n)if(n.face){var a=t.shared=e(t.face,n.face),o=r(a.map(n.project),a.map(t.project));t.transform=n.transform?i(n.transform,o):o;for(var u=n.edges,c=0,l=u.length;l>c;++c)d(a[0],u[c][1])&&d(a[1],u[c][0])&&(u[c]=t),d(a[0],u[c][0])&&d(a[1],u[c][1])&&(u[c]=t);for(var u=t.edges,c=0,l=u.length;l>c;++c)d(a[0],u[c][0])&&d(a[1],u[c][1])&&(u[c]=n),d(a[0],u[c][1])&&d(a[1],u[c][0])&&(u[c]=n)}else t.transform=n.transform;return t.children&&t.children.forEach(function(n){s(n,t)}),t}function l(t,n){var e,r=u(t,n),a=r.project([t*M,n*M]);return(e=r.transform)?[e[0]*a[0]+e[1]*a[1]+e[2],-(e[3]*a[0]+e[4]*a[1]+e[5])]:(a[1]=-a[1],a)}function f(t,n){var e=t.project.invert,r=t.transform,i=n;if(r&&(r=a(r),i=[r[0]*i[0]+r[1]*i[1]+r[2],r[3]*i[0]+r[4]*i[1]+r[5]]),e&&t===h(o=e(i)))return o;for(var o,u=t.children,c=0,s=u&&u.length;s>c;++c)if(o=f(u[c],n))return o}function h(t){return u(t[0]*y,t[1]*y)}c=null==c?-m/6:c,s(o,{transform:[Math.cos(c),Math.sin(c),0,-Math.sin(c),Math.cos(c),0]}),g(o)&&(l.invert=function(t,n){var e=f(o,[t,-n]);return e&&(e[0]*=y,e[1]*=y,e)});var v=t.geo.projection(l),b=v.stream;return v.stream=function(t){var e=v.rotate(),r=b(t),a=(v.rotate([0,0]),b(t));return v.rotate(e),r.sphere=function(){a.polygonStart(),a.lineStart(),n(a,o),a.lineEnd(),a.polygonEnd()},r},v},t.geo.polyhedron.butterfly=function(n){n=n||function(n){var e=t.geo.centroid({type:"MultiPoint",coordinates:n});return t.geo.gnomonic().scale(1).translate([0,0]).rotate([-e[0],-e[1]])};var e=t.geo.polyhedron.octahedron.map(function(t){return{face:t,project:n(t)}});return[-1,0,0,1,0,1,4,5].forEach(function(t,n){var r=e[t];r&&(r.children||(r.children=[])).push(e[n])}),t.geo.polyhedron(e[0],function(t,n){return e[-m/2>t?0>n?6:4:0>t?0>n?2:0:m/2>t?0>n?3:1:0>n?7:5]})},t.geo.polyhedron.waterman=function(n){function e(t,n){var e=Math.cos(n),r=[e*Math.cos(t),e*Math.sin(t),Math.sin(n)],a=-m/2>t?0>n?6:4:0>t?0>n?2:0:m/2>t?0>n?3:1:0>n?7:5,o=i[a];return u[s(o[0],r)<0?8+3*a:s(o[1],r)<0?8+3*a+1:s(o[2],r)<0?8+3*a+2:a]}n=n||function(n){var e=6===n.length?t.geo.centroid({type:"MultiPoint",coordinates:n}):n[0];return t.geo.gnomonic().scale(1).translate([0,0]).rotate([-e[0],-e[1]])};var r=t.geo.polyhedron.octahedron,a=r.map(function(t){for(var n,e=t.map(h),r=e.length,a=e[r-1],i=[],o=0;r>o;++o)n=e[o],i.push(f([.9486832980505138*a[0]+.31622776601683794*n[0],.9486832980505138*a[1]+.31622776601683794*n[1],.9486832980505138*a[2]+.31622776601683794*n[2]]),f([.9486832980505138*n[0]+.31622776601683794*a[0],.9486832980505138*n[1]+.31622776601683794*a[1],.9486832980505138*n[2]+.31622776601683794*a[2]])),a=n;return i}),i=[],o=[-1,0,0,1,0,1,4,5];a.forEach(function(t,n){for(var e=r[n],u=e.length,c=i[n]=[],s=0;u>s;++s)a.push([e[s],t[(2*s+2)%(2*u)],t[(2*s+1)%(2*u)]]),o.push(n),c.push(l(h(t[(2*s+2)%(2*u)]),h(t[(2*s+1)%(2*u)])))});var u=a.map(function(t){return{project:n(t),face:t}});return o.forEach(function(t,n){var e=u[t];e&&(e.children||(e.children=[])).push(u[n])}),t.geo.polyhedron(u[0],e).center([0,45])};var b=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]];t.geo.polyhedron.octahedron=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(t){return t.map(function(t){return b[t]})});var w=Math.atan(Math.SQRT1_2)*M,x=[[0,w],[90,w],[180,w],[-90,w],[0,-w],[90,-w],[180,-w],[-90,-w]];t.geo.polyhedron.cube=[[0,3,2,1],[0,1,5,4],[1,2,6,5],[2,3,7,6],[3,0,4,7],[4,5,6,7]].map(function(t){return t.map(function(t){return x[t]})})}},{}],28:[function(t,n,e){"use strict";n.exports=function(t){function n(t,n){return{type:"Feature",id:t.id,properties:t.properties,geometry:e(t.geometry,n)}}function e(n,r){if(!n)return null;if("GeometryCollection"===n.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(t){return e(t,r)})};if(!gn.hasOwnProperty(n.type))return null;var a=gn[n.type];return t.geo.stream(n,r(a)),a.result()}function r(){}function a(t){if((n=t.length)<4)return!1;for(var n,e=0,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return 0>=r}function i(t,n){for(var e=n[0],r=n[1],a=!1,i=0,o=t.length,u=o-1;o>i;u=i++){var c=t[i],s=c[0],l=c[1],f=t[u],h=f[0],d=f[1];l>r^d>r&&(h-s)*(r-l)/(d-l)+s>e&&(a=!a)}return a}function o(t){return t?t/Math.sin(t):1}function u(t){return t>0?1:0>t?-1:0}function c(t){return t>1?Mn:-1>t?-Mn:Math.asin(t)}function s(t){return t>1?0:-1>t?yn:Math.acos(t)}function l(t){return t>0?Math.sqrt(t):0}function f(t){function n(t,n){var e=Math.cos(t),a=Math.cos(n),i=Math.sin(n),o=a*e,u=-((1-o?Math.log(.5*(1+o))/(1-o):-.5)+r/(1+o));return[u*a*Math.sin(t),u*i]}var e=Math.tan(.5*t),r=2*Math.log(Math.cos(.5*t))/(e*e);return n.invert=function(n,e){var a,i=Math.sqrt(n*n+e*e),o=t*-.5,u=50;if(!i)return[0,0];do{var s=.5*o,l=Math.cos(s),f=Math.sin(s),h=Math.tan(s),d=Math.log(1/l);o-=a=(2/h*d-r*h-i)/(-d/(f*f)+1-r/(2*l*l))}while(Math.abs(a)>vn&&--u>0);var p=Math.sin(o);return[Math.atan2(n*p,i*Math.cos(o)),c(e*p/i)]},n}function h(){var t=Mn,n=kn(f),e=n(t);return e.radius=function(e){return arguments.length?n(t=e*yn/180):t/yn*180},e}function d(t,n){var e=Math.cos(n),r=o(s(e*Math.cos(t/=2)));return[2*e*Math.sin(t)*r,Math.sin(n)*r]}function p(t){function n(t,n){var u=Math.cos(n),c=Math.cos(t/=2);return[(1+u)*Math.sin(t),(a*n>-Math.atan2(c,i)-.001?0:10*-a)+o+Math.sin(n)*r-(1+u)*e*c]}var e=Math.sin(t),r=Math.cos(t),a=t>0?1:-1,i=Math.tan(a*t),o=(1+e-r)/2;return n.invert=function(t,n){var u=0,c=0,s=50;do{var l=Math.cos(u),f=Math.sin(u),h=Math.cos(c),d=Math.sin(c),p=1+h,g=p*f-t,v=o+d*r-p*e*l-n,m=.5*p*l,y=-f*d,M=.5*e*p*f,b=r*h+e*l*d,w=y*M-b*m,x=.5*(v*y-g*b)/w,_=(g*M-v*m)/w;u-=x,c-=_}while((Math.abs(x)>vn||Math.abs(_)>vn)&&--s>0);return a*c>-Math.atan2(Math.cos(u),i)-.001?[2*u,c]:null},n}function g(){var t=yn/9,n=t>0?1:-1,e=Math.tan(n*t),r=kn(p),a=r(t),i=a.stream;return a.parallel=function(a){return arguments.length?(e=Math.tan((n=(t=a*yn/180)>0?1:-1)*t),r(t)):t/yn*180},a.stream=function(r){var o=a.rotate(),u=i(r),c=(a.rotate([0,0]),i(r));return a.rotate(o),u.sphere=function(){c.polygonStart(),c.lineStart();for(var r=-180*n;180>n*r;r+=90*n)c.point(r,90*n);for(;n*(r-=t)>=-180;)c.point(r,n*-Math.atan2(Math.cos(r*wn/2),e)*xn);c.lineEnd(),c.polygonEnd()},u},a}function v(t){return t=Math.exp(2*t),(t-1)/(t+1)}function m(t){return.5*(Math.exp(t)-Math.exp(-t))}function y(t){return.5*(Math.exp(t)+Math.exp(-t))}function M(t){return Math.log(t+l(t*t+1))}function b(t){return Math.log(t+l(t*t-1))}function w(t,n){var e=Math.tan(n/2),r=l(1-e*e),a=1+r*Math.cos(t/=2),i=Math.sin(t)*r/a,o=e/a,u=i*i,c=o*o;return[4/3*i*(3+u-3*c),4/3*o*(3+3*u-c)]}function x(t,n){var e=Math.abs(n);return yn/4>e?[t,Math.log(Math.tan(yn/4+n/2))]:[t*Math.cos(e)*(2*Math.SQRT2-1/Math.sin(e)),u(n)*(2*Math.SQRT2*(e-yn/4)-Math.log(Math.tan(e/2)))]}function _(t){function n(t,n){var r=Tn(t,n);if(Math.abs(t)>Mn){var a=Math.atan2(r[1],r[0]),i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=e*Math.round((a-Mn)/e)+Mn,u=Math.atan2(Math.sin(a-=o),2-Math.cos(a));a=o+c(yn/i*Math.sin(u))-u,r[0]=i*Math.cos(a),r[1]=i*Math.sin(a)}return r}var e=2*yn/t;return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n);if(r>Mn){var a=Math.atan2(n,t),i=e*Math.round((a-Mn)/e)+Mn,o=a>i?-1:1,u=r*Math.cos(i-a),c=1/Math.tan(o*Math.acos((u-yn)/Math.sqrt(yn*(yn-2*u)+r*r)));a=i+2*Math.atan((c+o*Math.sqrt(c*c-3))/3),t=r*Math.cos(a),n=r*Math.sin(a)}return Tn.invert(t,n)},n}function k(){var t=5,n=kn(_),e=n(t),r=e.stream,a=.01,i=-Math.cos(a*wn),o=Math.sin(a*wn);return e.lobes=function(e){return arguments.length?n(t=+e):t},e.stream=function(n){var u=e.rotate(),s=r(n),l=(e.rotate([0,0]),r(n));return e.rotate(u),s.sphere=function(){l.polygonStart(),l.lineStart();for(var n=0,e=360/t,r=2*yn/t,u=90-180/t,s=Mn;t>n;++n,u-=e,s-=r)l.point(Math.atan2(o*Math.cos(s),i)*xn,c(o*Math.sin(s))*xn),-90>u?(l.point(-90,-180-u-a),l.point(-90,-180-u+a)):(l.point(90,u+a),l.point(90,u-a));l.lineEnd(),l.polygonEnd()},s},e}function E(t){return function(n){var e,r=t*Math.sin(n),a=30;do n-=e=(n+Math.sin(n)-r)/(1+Math.cos(n));while(Math.abs(e)>vn&&--a>0);return n/2}}function T(t,n,e){function r(e,r){return[t*e*Math.cos(r=a(r)),n*Math.sin(r)]}var a=E(e);return r.invert=function(r,a){var i=c(a/n);return[r/(t*Math.cos(i)),c((2*i+Math.sin(2*i))/e)]},r}function S(t,n){var e=2.00276,r=Sn(n);return[e*t/(1/Math.cos(n)+1.11072/Math.cos(r)),(n+Math.SQRT2*Math.sin(r))/e]}function A(t){var n=0,e=kn(t),r=e(n);return r.parallel=function(t){return arguments.length?e(n=t*yn/180):n/yn*180},r}function N(t,n){return[t*Math.cos(n),n]}function j(t){function n(n,r){var a=e+t-r,i=a?n*Math.cos(r)/a:a;return[a*Math.sin(i),e-a*Math.cos(i)]}if(!t)return N;var e=1/Math.tan(t);return n.invert=function(n,r){var a=Math.sqrt(n*n+(r=e-r)*r),i=e+t-a;return[a/Math.cos(i)*Math.atan2(n,r),i]},n}function R(t){function n(n,e){for(var r=Math.sin(e),a=Math.cos(e),i=new Array(3),s=0;3>s;++s){var l=t[s];if(i[s]=q(e-l[1],l[3],l[2],a,r,n-l[0]),!i[s][0])return l.point;i[s][1]=L(i[s][1]-l.v[1])}for(var f=c.slice(),s=0;3>s;++s){var h=2==s?0:s+1,d=P(t[s].v[0],i[s][0],i[h][0]);i[s][1]<0&&(d=-d),s?1==s?(d=o-d,f[0]-=i[s][0]*Math.cos(d),f[1]-=i[s][0]*Math.sin(d)):(d=u-d,f[0]+=i[s][0]*Math.cos(d),f[1]+=i[s][0]*Math.sin(d)):(f[0]+=i[s][0]*Math.cos(d),f[1]-=i[s][0]*Math.sin(d))}return f[0]/=3,f[1]/=3,f}t=t.map(function(t){return[t[0],t[1],Math.sin(t[1]),Math.cos(t[1])]});for(var e,r=t[2],a=0;3>a;++a,r=e)e=t[a],r.v=q(e[1]-r[1],r[3],r[2],e[3],e[2],e[0]-r[0]),r.point=[0,0];var i=P(t[0].v[0],t[2].v[0],t[1].v[0]),o=P(t[0].v[0],t[1].v[0],t[2].v[0]),u=yn-i;t[2].point[1]=0,t[0].point[0]=-(t[1].point[0]=.5*t[0].v[0]);var c=[t[2].point[0]=t[0].point[0]+t[2].v[0]*Math.cos(i),2*(t[0].point[1]=t[1].point[1]=t[2].v[0]*Math.sin(i))];return n}function C(){var n=[[0,0],[0,0],[0,0]],e=kn(R),r=e(n),a=r.rotate;return delete r.rotate,r.points=function(i){if(!arguments.length)return n;n=i;var o=t.geo.centroid({type:"MultiPoint",coordinates:n}),u=[-o[0],-o[1]];return a.call(r,u),e(n.map(t.geo.rotation(u)).map(F))},r.points([[-150,55],[-35,55],[-92.5,10]])}function q(t,n,e,r,a,i){var o,u=Math.cos(i);if(Math.abs(t)>1||Math.abs(i)>1)o=s(e*a+n*r*u);else{var l=Math.sin(.5*t),f=Math.sin(.5*i);o=2*c(Math.sqrt(l*l+n*r*f*f))}return Math.abs(o)>vn?[o,Math.atan2(r*Math.sin(i),n*a-e*r*u)]:[0,0]}function P(t,n,e){return s(.5*(t*t+n*n-e*e)/(t*n))}function L(t){return t-2*yn*Math.floor((t+yn)/(2*yn))}function F(t){return[t[0]*wn,t[1]*wn]}function D(t,n){var e=l(1-Math.sin(n));return[2/bn*t*e,bn*(1-e)]}function O(t){function n(t,n){return[t,(t?t/Math.sin(t):1)*(Math.sin(n)*Math.cos(t)-e*Math.cos(n))]}var e=Math.tan(t);return n.invert=e?function(t,n){t&&(n*=Math.sin(t)/t);var r=Math.cos(t);return[t,2*Math.atan2(Math.sqrt(r*r+e*e-n*n)-r,e-n)]}:function(t,n){return[t,c(t?n*Math.tan(t)/t:n)]},n}function z(t,n){var e=Math.sqrt(3);return[e*t*(2*Math.cos(2*n/3)-1)/bn,e*bn*Math.sin(n/3)]}function I(t){function n(t,n){return[t*e,Math.sin(n)/e]}var e=Math.cos(t);return n.invert=function(t,n){return[t/e,c(n*e)]},n}function U(t){function n(t,n){return[t*e,(1+e)*Math.tan(.5*n)]}var e=Math.cos(t);return n.invert=function(t,n){return[t/e,2*Math.atan(n/(1+e))]},n}function H(t,n){var e=Math.sqrt(8/(3*yn));return[e*t*(1-Math.abs(n)/yn),e*n]}function G(t,n){var e=Math.sqrt(4-3*Math.sin(Math.abs(n)));return[2/Math.sqrt(6*yn)*t*e,u(n)*Math.sqrt(2*yn/3)*(2-e)]}function B(t,n){var e=Math.sqrt(yn*(4+yn));return[2/e*t*(1+Math.sqrt(1-4*n*n/(yn*yn))),4/e*n]}function X(t,n){var e=(2+Mn)*Math.sin(n);n/=2;for(var r=0,a=1/0;10>r&&Math.abs(a)>vn;r++){var i=Math.cos(n);n-=a=(n+Math.sin(n)*(i+2)-e)/(2*i*(1+i))}return[2/Math.sqrt(yn*(4+yn))*t*(1+Math.cos(n)),2*Math.sqrt(yn/(4+yn))*Math.sin(n)]}function W(t,n){return[t*(1+Math.cos(n))/Math.sqrt(2+yn),2*n/Math.sqrt(2+yn)]}function Q(t,n){for(var e=(1+Mn)*Math.sin(n),r=0,a=1/0;10>r&&Math.abs(a)>vn;r++)n-=a=(n+Math.sin(n)-e)/(1+Math.cos(n));return e=Math.sqrt(2+yn),[t*(1+Math.cos(n))/e,2*n/e]}function $(t,n){var e=Math.sin(t/=2),r=Math.cos(t),a=Math.sqrt(Math.cos(n)),i=Math.cos(n/=2),o=Math.sin(n)/(i+Math.SQRT2*r*a),u=Math.sqrt(2/(1+o*o)),c=Math.sqrt((Math.SQRT2*i+(r+e)*a)/(Math.SQRT2*i+(r-e)*a));return[jn*(u*(c-1/c)-2*Math.log(c)),jn*(u*o*(c+1/c)-2*Math.atan(o))]}function V(t,n){var e=Math.tan(n/2);return[t*Rn*l(1-e*e),(1+Rn)*e]}function Y(t,n){var e=n/2,r=Math.cos(e);return[2*t/bn*Math.cos(n)*r*r,bn*Math.tan(e)]}function J(t,n){function e(n,e){var i=Cn(n,e),o=i[0],u=i[1],c=o*o+u*u;if(c>a){var s=Math.sqrt(c),l=Math.atan2(u,o),f=r*Math.round(l/r),h=l-f,d=t*Math.cos(h),p=(t*Math.sin(h)-h*Math.sin(d))/(Mn-d),g=K(h,p),v=(yn-t)/tt(g,d,yn);o=s;var m,y=50;do o-=m=(t+tt(g,d,o)*v-s)/(g(o)*v);while(Math.abs(m)>vn&&--y>0);u=h*Math.sin(o),Mn>o&&(u-=p*(o-Mn));var M=Math.sin(f),b=Math.cos(f);i[0]=o*b-u*M,i[1]=o*M+u*b}return i}var r=2*yn/n,a=t*t;return e.invert=function(n,e){var i=n*n+e*e;if(i>a){var o=Math.sqrt(i),u=Math.atan2(e,n),c=r*Math.round(u/r),s=u-c,n=o*Math.cos(s);e=o*Math.sin(s);for(var l=n-Mn,f=Math.sin(n),h=e/f,d=Mn>n?1/0:0,p=10;;){var g=t*Math.sin(h),v=t*Math.cos(h),m=Math.sin(v),y=Mn-v,M=(g-h*m)/y,b=K(h,M);if(Math.abs(d)<mn||!--p)break;h-=d=(h*f-M*l-e)/(f-2*l*(y*(v+h*g*Math.cos(v)-m)-g*(g-h*m))/(y*y))}o=t+tt(b,v,n)*(yn-t)/tt(b,v,yn),u=c+h,n=o*Math.cos(u),e=o*Math.sin(u)}return Cn.invert(n,e)},e}function K(t,n){return function(e){var r=t*Math.cos(e);return Mn>e&&(r-=n),Math.sqrt(1+r*r)}}function Z(){var t=6,n=30*wn,e=Math.cos(n),r=Math.sin(n),a=kn(J),i=a(n,t),o=i.stream,u=.01,c=-Math.cos(u*wn),s=Math.sin(u*wn);return i.radius=function(i){return arguments.length?(e=Math.cos(n=i*wn),r=Math.sin(n),a(n,t)):n*xn},i.lobes=function(e){return arguments.length?a(n,t=+e):t},i.stream=function(n){var a=i.rotate(),u=o(n),l=(i.rotate([0,0]),o(n));return i.rotate(a),u.sphere=function(){l.polygonStart(),l.lineStart();for(var n=0,a=2*yn/t,i=0;t>n;++n,i-=a)l.point(Math.atan2(s*Math.cos(i),c)*xn,Math.asin(s*Math.sin(i))*xn),l.point(Math.atan2(r*Math.cos(i-a/2),e)*xn,Math.asin(r*Math.sin(i-a/2))*xn);l.lineEnd(),l.polygonEnd()},u},i}function tt(t,n,e){for(var r=50,a=(e-n)/r,i=t(n)+t(e),o=1,u=n;r>o;++o)i+=2*t(u+=a);return.5*i*a}function nt(t,n,e,r,a,i,o,u){function c(c,s){if(!s)return[t*c/yn,0];var l=s*s,f=t+l*(n+l*(e+l*r)),h=s*(a-1+l*(i-u+l*o)),d=(f*f+h*h)/(2*h),p=c*Math.asin(f/d)/yn;return[d*Math.sin(p),s*(1+l*u)+d*(1-Math.cos(p))]}return arguments.length<8&&(u=0),c.invert=function(c,s){var f,h,d=yn*c/t,p=s,g=50;do{var v=p*p,m=t+v*(n+v*(e+v*r)),y=p*(a-1+v*(i-u+v*o)),M=m*m+y*y,b=2*y,w=M/b,x=w*w,_=Math.asin(m/w)/yn,k=d*_;if(xB2=m*m,dxBd=(2*n+v*(4*e+6*v*r))*p,dyBd=a+v*(3*i+5*v*o),dpd=2*(m*dxBd+y*(dyBd-1)),dqd=2*(dyBd-1),dmd=(dpd*b-M*dqd)/(b*b),cos=Math.cos(k),sin=Math.sin(k),mcos=w*cos,msin=w*sin,dd=d/yn*(1/l(1-xB2/x))*(dxBd*w-m*dmd)/x,fx=msin-c,fy=p*(1+v*u)+w-mcos-s,x=dmd*sin+mcos*dd,x=mcos*_,y=1+dmd-(dmd*cos-msin*dd),y=msin*_,denominator=x*y-y*x,!denominator)break;d-=f=(fy*x-fx*y)/denominator,p-=h=(fx*y-fy*x)/denominator}while((Math.abs(f)>vn||Math.abs(h)>vn)&&--g>0);return[d,p]},c}function et(t,n){var e=t*t,r=n*n;return[t*(1-.162388*r)*(.87-952426e-9*e*e),n*(1+r/12)]}function rt(t){function n(){var t=!1,n=kn(e),r=n(t);return r.quincuncial=function(e){return arguments.length?n(t=!!e):t},r}function e(n){var e=n?function(n,e){var a=Math.abs(n)<Mn,i=t(a?n:n>0?n-yn:n+yn,e),o=(i[0]-i[1])*Math.SQRT1_2,c=(i[0]+i[1])*Math.SQRT1_2;if(a)return[o,c];var s=r*Math.SQRT1_2,l=o>0^c>0?-1:1;return[l*o-u(c)*s,l*c-u(o)*s]}:function(n,e){var a=n>0?-.5:.5,i=t(n+a*yn,e);return i[0]-=a*r,i};return t.invert&&(e.invert=n?function(n,e){var a=(n+e)*Math.SQRT1_2,i=(e-n)*Math.SQRT1_2,o=Math.abs(a)<.5*r&&Math.abs(i)<.5*r;if(!o){var u=r*Math.SQRT1_2,c=a>0^i>0?-1:1,s=-c*(n+(i>0?1:-1)*u),l=-c*(e+(a>0?1:-1)*u);a=(-s-l)*Math.SQRT1_2,i=(s-l)*Math.SQRT1_2}var f=t.invert(a,i);return o||(f[0]+=a>0?yn:-yn),f}:function(n,e){var a=n>0?-.5:.5,i=t.invert(n+a*r,e),o=i[0]-a*yn;return-yn>o?o+=2*yn:o>yn&&(o-=2*yn),i[0]=o,i}),e}var r=t(Mn,0)[0]-t(-Mn,0)[0];return n.raw=e,n}function at(t,n){var e=u(t),r=u(n),a=Math.cos(n),i=Math.cos(t)*a,o=Math.sin(t)*a,s=Math.sin(r*n);t=Math.abs(Math.atan2(o,s)),n=c(i),Math.abs(t-Mn)>vn&&(t%=Mn);var l=it(t>yn/4?Mn-t:t,n);return t>yn/4&&(s=l[0],l[0]=-l[1],l[1]=-s),l[0]*=e,l[1]*=-r,l}function it(t,n){if(n===Mn)return[0,0];var e=Math.sin(n),r=e*e,a=r*r,i=1+a,o=1+3*a,u=1-a,s=c(1/Math.sqrt(i)),f=u+r*i*s,h=(1-e)/f,d=Math.sqrt(h),p=h*i,g=Math.sqrt(p),v=d*u;if(0===t)return[0,-(v+r*g)];var m=Math.cos(n),y=1/m,M=2*e*m,b=(-3*r+s*o)*M,w=(-f*m-(1-e)*b)/(f*f),x=.5*w/d,_=u*x-2*r*d*M,k=r*i*w+h*o*M,E=-y*M,T=-y*k,S=-2*y*_,A=4*t/yn;if(t>.222*yn||yn/4>n&&t>.175*yn){var N=(v+r*l(p*(1+a)-v*v))/(1+a);if(t>yn/4)return[N,N];var j=N,R=.5*N,C=50;N=.5*(R+j);do{var q=Math.sqrt(p-N*N),P=N*(S+E*q)+T*c(N/g)-A;if(!P)break;0>P?R=N:j=N,N=.5*(R+j)}while(Math.abs(j-R)>vn&&--C>0)}else{var L,N=vn,C=25;do{var F=N*N,q=l(p-F),D=S+E*q,P=N*D+T*c(N/g)-A,O=D+(T-E*F)/q;N-=L=q?P/O:0}while(Math.abs(L)>vn&&--C>0)}return[N,-v-r*l(p-N*N)]}function ot(t,n){for(var e=0,r=1,a=.5,i=50;;){var o=a*a,u=Math.sqrt(a),c=Math.asin(1/Math.sqrt(1+o)),s=1-o+a*(1+o)*c,l=(1-u)/s,f=Math.sqrt(l),h=l*(1+o),d=f*(1-o),p=h-t*t,g=Math.sqrt(p),v=n+d+a*g;if(Math.abs(r-e)<mn||0===--i||0===v)break;v>0?e=a:r=a,a=.5*(e+r)}if(!i)return null;var m=Math.asin(u),y=Math.cos(m),M=1/y,b=2*u*y,w=(-3*a+c*(1+3*o))*b,x=(-s*y-(1-u)*w)/(s*s),_=.5*x/f,k=(1-o)*_-2*a*f*b,E=-2*M*k,T=-M*b,S=-M*(a*(1+o)*x+l*(1+3*o)*b);return[yn/4*(t*(E+T*g)+S*Math.asin(t/Math.sqrt(h))),m]}function ut(t,n,e){if(!t){var r=ct(n,1-e);return[[0,r[0]/r[1]],[1/r[1],0],[r[2]/r[1],0]]}var a=ct(t,e);if(!n)return[[a[0],0],[a[1],0],[a[2],0]];var r=ct(n,1-e),i=r[1]*r[1]+e*a[0]*a[0]*r[0]*r[0];return[[a[0]*r[2]/i,a[1]*a[2]*r[0]*r[1]/i],[a[1]*r[1]/i,-a[0]*a[2]*r[0]*r[2]/i],[a[2]*r[1]*r[2]/i,-e*a[0]*a[1]*r[0]/i]]}function ct(t,n){var e,r,a,i,o;if(vn>n)return i=Math.sin(t),r=Math.cos(t),e=.25*n*(t-i*r),[i-e*r,r+e*i,1-.5*n*i*i,t-e];if(n>=1-vn)return e=.25*(1-n),r=y(t),i=v(t),a=1/r,o=r*m(t),[i+e*(o-t)/(r*r),a-e*i*a*(o-t),a+e*i*a*(o+t),2*Math.atan(Math.exp(t))-Mn+e*(o-t)/r];var u=[1,0,0,0,0,0,0,0,0],s=[Math.sqrt(n),0,0,0,0,0,0,0,0],f=0;for(r=Math.sqrt(1-n),o=1;Math.abs(s[f]/u[f])>vn&&8>f;)e=u[f++],s[f]=.5*(e-r),u[f]=.5*(e+r),r=l(e*r),o*=2;a=o*u[f]*t;do i=s[f]*Math.sin(r=a)/u[f],a=.5*(c(i)+a);while(--f);return[Math.sin(a),i=Math.cos(a),i/Math.cos(a-r),a]}function st(t,n,e){var r=Math.abs(t),a=Math.abs(n),i=m(a);if(r){var o=1/Math.sin(r),c=1/(Math.tan(r)*Math.tan(r)),s=-(c+e*i*i*o*o-1+e),f=(e-1)*c,h=.5*(-s+Math.sqrt(s*s-4*f));return[lt(Math.atan(1/Math.sqrt(h)),e)*u(t),lt(Math.atan(l((h/c-1)/e)),1-e)*u(n)]}return[0,lt(Math.atan(i),1-e)*u(n)]}function lt(t,n){if(!n)return t;if(1===n)return Math.log(Math.tan(t/2+yn/4));for(var e=1,r=Math.sqrt(1-n),a=Math.sqrt(n),i=0;Math.abs(a)>vn;i++){if(t%yn){var o=Math.atan(r*Math.tan(t)/e);0>o&&(o+=yn),t+=o+~~(t/yn)*yn}else t+=t;a=(e+r)/2,r=Math.sqrt(e*r),a=((e=a)-r)/2}return t/(Math.pow(2,i)*e)}function ft(t,n){var e=(Math.SQRT2-1)/(Math.SQRT2+1),r=Math.sqrt(1-e*e),a=lt(Mn,r*r),i=-1,o=Math.log(Math.tan(yn/4+Math.abs(n)/2)),u=Math.exp(i*o)/Math.sqrt(e),c=ht(u*Math.cos(i*t),u*Math.sin(i*t)),s=st(c[0],c[1],r*r);return[-s[1],(n>=0?1:-1)*(.5*a-s[0])]}function ht(t,n){var e=t*t,r=n+1,a=1-e-n*n;return[.5*((t>=0?Mn:-Mn)-Math.atan2(a,2*t)),-.25*Math.log(a*a+4*e)+.5*Math.log(r*r+e)]}function dt(t,n){var e=n[0]*n[0]+n[1]*n[1];return[(t[0]*n[0]+t[1]*n[1])/e,(t[1]*n[0]-t[0]*n[1])/e]}function pt(t){function n(t,n){var i=a(t,n);t=i[0],n=i[1];var o=Math.sin(n),u=Math.cos(n),c=Math.cos(t),l=s(e*o+r*u*c),f=Math.sin(l),h=Math.abs(f)>vn?l/f:1;return[h*r*Math.sin(t),(Math.abs(t)>Mn?h:-h)*(e*u-r*o*c)]}var e=Math.sin(t),r=Math.cos(t),a=gt(t);return a.invert=gt(-t),n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=-Math.sin(r),o=Math.cos(r),u=r*o,c=-n*i,s=r*e,f=l(u*u+c*c-s*s),h=Math.atan2(u*s+c*f,c*s-u*f),d=(r>Mn?-1:1)*Math.atan2(t*i,r*Math.cos(h)*o+n*Math.sin(h)*i);return a.invert(d,h)},n}function gt(t){var n=Math.sin(t),e=Math.cos(t);return function(t,r){var a=Math.cos(r),i=Math.cos(t)*a,o=Math.sin(t)*a,u=Math.sin(r);return[Math.atan2(o,i*e-u*n),c(u*e+i*n)]}}function vt(){var n=0,e=kn(pt),r=e(n),a=r.rotate,i=r.stream,o=t.geo.circle();return r.parallel=function(t){if(!arguments.length)return n/yn*180;var a=r.rotate();return e(n=t*yn/180).rotate(a)},r.rotate=function(t){return arguments.length?(a.call(r,[t[0],t[1]-n/yn*180]),o.origin([-t[0],-t[1]]),r):(t=a.call(r),t[1]+=n/yn*180,t)},r.stream=function(t){return t=i(t),t.sphere=function(){t.polygonStart();var n,e=.01,r=o.angle(90-e)().coordinates[0],a=r.length-1,i=-1;for(t.lineStart();++i<a;)t.point((n=r[i])[0],n[1]);for(t.lineEnd(),r=o.angle(90+e)().coordinates[0],a=r.length-1,t.lineStart();--i>=0;)t.point((n=r[i])[0],n[1]);t.lineEnd(),t.polygonEnd()},t},r}function mt(t,n){function e(e,r){var a=Dn(e/n,r);return a[0]*=t,a}return arguments.length<2&&(n=t),1===n?Dn:n===1/0?Mt:(e.invert=function(e,r){var a=Dn.invert(e/t,r);return a[0]*=n,a},e)}function yt(){var t=2,n=kn(mt),e=n(t);return e.coefficient=function(e){return arguments.length?n(t=+e):t},e}function Mt(t,n){return[t*Math.cos(n)/Math.cos(n/=2),2*Math.sin(n)]}function bt(t,n){for(var e,r=Math.sin(n)*(0>n?2.43763:2.67595),a=0;20>a&&(n-=e=(n+Math.sin(n)-r)/(1+Math.cos(n)),!(Math.abs(e)<vn));a++);return[.85*t*Math.cos(n*=.5),Math.sin(n)*(0>n?1.93052:1.75859)]}function wt(n){function e(e,f){var h,d=Math.abs(f);if(d>a){var p=Math.min(n-1,Math.max(0,Math.floor((e+yn)/l)));e+=yn*(n-1)/n-p*l,h=t.geo.collignon.raw(e,d),h[0]=h[0]*i/o-i*(n-1)/(2*n)+p*i/n,h[1]=u+4*(h[1]-c)*s/i,0>f&&(h[1]=-h[1])}else h=r(e,f);return h[0]/=2,h}var r=t.geo.cylindricalEqualArea.raw(0),a=On*yn/180,i=2*yn,o=t.geo.collignon.raw(yn,a)[0]-t.geo.collignon.raw(-yn,a)[0],u=r(0,a)[1],c=t.geo.collignon.raw(0,a)[1],s=t.geo.collignon.raw(0,Mn)[1]-c,l=2*yn/n;return e.invert=function(e,a){e*=2;var f=Math.abs(a);if(f>u){var h=Math.min(n-1,Math.max(0,Math.floor((e+yn)/l)));e=(e+yn*(n-1)/n-h*l)*o/i;var d=t.geo.collignon.raw.invert(e,.25*(f-u)*i/s+c);return d[0]-=yn*(n-1)/n-h*l,0>a&&(d[1]=-d[1]),d}return r.invert(e,a)},e}function xt(){function n(){var n=180/e;return{type:"Polygon",coordinates:[t.range(-180,180+n/2,n).map(function(t,n){return[t,1&n?90-1e-6:On]}).concat(t.range(180,-180-n/2,-n).map(function(t,n){return[t,1&n?-90+1e-6:-On]}))]}}var e=2,r=kn(wt),a=r(e),i=a.stream;return a.lobes=function(t){return arguments.length?r(e=+t):e},a.stream=function(e){var r=a.rotate(),o=i(e),u=(a.rotate([0,0]),i(e));return a.rotate(r),o.sphere=function(){t.geo.stream(n(),u)},o},a}function _t(t){function n(n,a){var c,s,h=1-Math.sin(a);if(h&&2>h){var d,p=Mn-a,g=25;do{var v=Math.sin(p),m=Math.cos(p),y=i+Math.atan2(v,r-m),M=1+f-2*r*m;p-=d=(p-l*i-r*v+M*y-.5*h*e)/(2*r*v*y)}while(Math.abs(d)>mn&&--g>0);c=o*Math.sqrt(M),s=n*y/yn}else c=o*(t+h),s=n*i/yn;return[c*Math.sin(s),u-c*Math.cos(s)]}var e,r=1+t,a=Math.sin(1/r),i=c(a),o=2*Math.sqrt(yn/(e=yn+4*i*r)),u=.5*o*(r+Math.sqrt(t*(2+t))),l=t*t,f=r*r;return n.invert=function(t,n){var a=t*t+(n-=u)*n,h=(1+f-a/(o*o))/(2*r),d=s(h),p=Math.sin(d),g=i+Math.atan2(p,r-h);return[c(t/Math.sqrt(a))*yn/g,c(1-2*(d-l*i-r*p+(1+f-2*r*h)*g)/e)]},n}function kt(){var t=1,n=kn(_t),e=n(t);return e.ratio=function(e){return arguments.length?n(t=+e):t},e}function Et(t,n){return n>-zn?(t=An(t,n),t[1]+=In,t):N(t,n)}function Tt(t,n){return Math.abs(n)>zn?(t=An(t,n),t[1]-=n>0?In:-In,t):N(t,n)}function St(t,n){return[3*t/(2*yn)*Math.sqrt(yn*yn/3-n*n),n]}function At(t){function n(n,e){if(Math.abs(Math.abs(e)-Mn)<vn)return[0,0>e?-2:2];var r=Math.sin(e),a=Math.pow((1+r)/(1-r),t/2),i=.5*(a+1/a)+Math.cos(n*=t);return[2*Math.sin(n)/i,(a-1/a)/i]}return n.invert=function(n,e){var r=Math.abs(e);if(Math.abs(r-2)<vn)return n?null:[0,u(e)*Mn];if(r>2)return null;n/=2,e/=2;var a=n*n,i=e*e,o=2*e/(1+a+i);return o=Math.pow((1+o)/(1-o),1/t),[Math.atan2(2*n,1-a-i)/t,c((o-1)/(o+1))]},n}function Nt(){var t=.5,n=kn(At),e=n(t);return e.spacing=function(e){return arguments.length?n(t=+e):t},e}function jt(t,n){return[t*(1+Math.sqrt(Math.cos(n)))/2,n/(Math.cos(n/2)*Math.cos(t/6))]}function Rt(t,n){var e=t*t,r=n*n;return[t*(.975534+r*(-.119161+e*-.0143059+r*-.0547009)),n*(1.00384+e*(.0802894+r*-.02855+199025e-9*e)+r*(.0998909+r*-.0491032))]}function Ct(t,n){return[Math.sin(t)/Math.cos(n),Math.tan(n)*Math.cos(t)]}function qt(t){function n(n,a){var i=a-t,o=Math.abs(i)<vn?n*e:Math.abs(o=yn/4+a/2)<vn||Math.abs(Math.abs(o)-Mn)<vn?0:n*i/Math.log(Math.tan(o)/r);return[o,i]}var e=Math.cos(t),r=Math.tan(yn/4+t/2);return n.invert=function(n,a){var i,o=a+t;return[Math.abs(a)<vn?n/e:Math.abs(i=yn/4+o/2)<vn||Math.abs(Math.abs(i)-Mn)<vn?0:n*Math.log(Math.tan(i)/r)/a,o]},n}function Pt(t,n){return[t,1.25*Math.log(Math.tan(yn/4+.4*n))]}function Lt(t){function n(n,r){for(var a,i=Math.cos(r),o=2/(1+i*Math.cos(n)),u=o*i*Math.sin(n),c=o*Math.sin(r),s=e,l=t[s],f=l[0],h=l[1];--s>=0;)l=t[s],f=l[0]+u*(a=f)-c*h,h=l[1]+u*h+c*a;return f=u*(a=f)-c*h,h=u*h+c*a,[f,h]}var e=t.length-1;return n.invert=function(n,r){var a=20,i=n,o=r;do{for(var u,s=e,l=t[s],f=l[0],h=l[1],d=0,p=0;--s>=0;)l=t[s],d=f+i*(u=d)-o*p,p=h+i*p+o*u,f=l[0]+i*(u=f)-o*h,h=l[1]+i*h+o*u;d=f+i*(u=d)-o*p,p=h+i*p+o*u,f=i*(u=f)-o*h-n,h=i*h+o*u-r;var g,v,m=d*d+p*p;i-=g=(f*d+h*p)/m,o-=v=(h*d-f*p)/m}while(Math.abs(g)+Math.abs(v)>vn*vn&&--a>0);if(a){var y=Math.sqrt(i*i+o*o),M=2*Math.atan(.5*y),b=Math.sin(M);return[Math.atan2(i*b,y*Math.cos(M)),y?c(o*b/y):0]}},n}function Ft(){var t=Un.miller,n=kn(Lt),e=n(t);return e.coefficients=function(e){return arguments.length?n(t="string"==typeof e?Un[e]:e):t},e}function Dt(t,n){var e=Math.sqrt(6),r=Math.sqrt(7),a=Math.asin(7*Math.sin(n)/(3*e));return[e*t*(2*Math.cos(2*a/3)-1)/r,9*Math.sin(a/3)/r]}function Ot(t,n){for(var e,r=(1+Math.SQRT1_2)*Math.sin(n),a=n,i=0;25>i&&(a-=e=(Math.sin(a/2)+Math.sin(a)-r)/(.5*Math.cos(a/2)+Math.cos(a)),!(Math.abs(e)<vn));i++);return[t*(1+2*Math.cos(a)/Math.cos(a/2))/(3*Math.SQRT2),2*Math.sqrt(3)*Math.sin(a/2)/Math.sqrt(2+Math.SQRT2)]}function zt(t,n){for(var e,r=Math.sqrt(6/(4+yn)),a=(1+yn/4)*Math.sin(n),i=n/2,o=0;25>o&&(i-=e=(i/2+Math.sin(i)-a)/(.5+Math.cos(i)),!(Math.abs(e)<vn));o++);return[r*(.5+Math.cos(i))*t/1.5,r*i]}function It(t,n){var e=n*n,r=e*e;return[t*(.8707-.131979*e+r*(-.013791+r*(.003971*e-.001529*r))),n*(1.007226+e*(.015085+r*(-.044475+.028874*e-.005916*r)))]}function Ut(t,n){return[t*(1+Math.cos(n))/2,2*(n-Math.tan(n/2))]}function Ht(t,n){var e=n*n;return[t,n*(Hn+e*e*(Gn+e*(Bn+Xn*e)))]}function Gt(t,n){if(Math.abs(n)<vn)return[t,0];var e=Math.tan(n),r=t*Math.sin(n);
return[Math.sin(r)/e,n+(1-Math.cos(r))/e]}function Bt(t){function n(n,r){var a=e?Math.tan(n*e/2)/e:n/2;if(!r)return[2*a,-t];var i=2*Math.atan(a*Math.sin(r)),o=1/Math.tan(r);return[Math.sin(i)*o,r+(1-Math.cos(i))*o-t]}var e=Math.sin(t);return n.invert=function(n,r){if(Math.abs(r+=t)<vn)return[e?2*Math.atan(e*n/2)/e:n,0];var a,i=n*n+r*r,o=0,u=10;do{var l=Math.tan(o),f=1/Math.cos(o),h=i-2*r*o+o*o;o-=a=(l*h+2*(o-r))/(2+h*f*f+2*(o-r)*l)}while(Math.abs(a)>vn&&--u>0);var d=n*(l=Math.tan(o)),p=Math.tan(Math.abs(r)<Math.abs(o+1/l)?.5*c(d):.5*s(d)+yn/4)/Math.sin(o);return[e?2*Math.atan(e*p)/e:2*p,o]},n}function Xt(t,n){var e,r=Math.min(18,36*Math.abs(n)/yn),a=Math.floor(r),i=r-a,o=(e=Kn[a])[0],u=e[1],c=(e=Kn[++a])[0],s=e[1],l=(e=Kn[Math.min(19,++a)])[0],f=e[1];return[t*(c+i*(l-o)/2+i*i*(l-2*c+o)/2),(n>0?Mn:-Mn)*(s+i*(f-u)/2+i*i*(f-2*s+u)/2)]}function Wt(t){function n(n,e){var r=Math.cos(e),a=(t-1)/(t-r*Math.cos(n));return[a*r*Math.sin(n),a*Math.sin(e)]}return n.invert=function(n,e){var r=n*n+e*e,a=Math.sqrt(r),i=(t-Math.sqrt(1-r*(t+1)/(t-1)))/((t-1)/a+a/(t-1));return[Math.atan2(n*i,a*Math.sqrt(1-i*i)),a?c(e*i/a):0]},n}function Qt(t,n){function e(n,e){var o=r(n,e),u=o[1],c=u*i/(t-1)+a;return[o[0]*a/c,u/c]}var r=Wt(t);if(!n)return r;var a=Math.cos(n),i=Math.sin(n);return e.invert=function(n,e){var o=(t-1)/(t-1-e*i);return r.invert(o*n,o*e*a)},e}function $t(){var t=1.4,n=0,e=kn(Qt),r=e(t,n);return r.distance=function(r){return arguments.length?e(t=+r,n):t},r.tilt=function(r){return arguments.length?e(t,n=r*yn/180):180*n/yn},r}function Vt(t,n){var e=Math.tan(n/2),r=Math.sin(yn/4*e);return[t*(.74482-.34588*r*r),1.70711*e]}function Yt(n){function e(t,e){var o=s(Math.cos(e)*Math.cos(t-r)),u=s(Math.cos(e)*Math.cos(t-a)),c=0>e?-1:1;return o*=o,u*=u,[(o-u)/(2*n),c*l(4*i*u-(i-o+u)*(i-o+u))/(2*n)]}if(!n)return t.geo.azimuthalEquidistant.raw;var r=-n/2,a=-r,i=n*n,o=Math.tan(a),u=.5/Math.sin(a);return e.invert=function(t,n){var e,i,c=n*n,l=Math.cos(Math.sqrt(c+(e=t+r)*e)),f=Math.cos(Math.sqrt(c+(e=t+a)*e));return[Math.atan2(i=l-f,e=(l+f)*o),(0>n?-1:1)*s(Math.sqrt(e*e+i*i)*u)]},e}function Jt(){var n=[[0,0],[0,0]],e=kn(Yt),r=e(0),a=r.rotate;return delete r.rotate,r.points=function(r){if(!arguments.length)return n;n=r;var i=t.geo.interpolate(r[0],r[1]),o=i(.5),u=t.geo.rotation([-o[0],-o[1]])(r[0]),s=.5*i.distance,l=-c(Math.sin(u[1]*wn)/Math.sin(s));return u[0]>0&&(l=yn-l),a.call(u,[-o[0],-o[1],-l*xn]),e(2*s)},r}function Kt(n){function e(n,e){var a=t.geo.gnomonic.raw(n,e);return a[0]*=r,a}var r=Math.cos(n);return e.invert=function(n,e){return t.geo.gnomonic.raw.invert(n/r,e)},e}function Zt(){var n=[[0,0],[0,0]],e=kn(Kt),r=e(0),a=r.rotate;return delete r.rotate,r.points=function(r){if(!arguments.length)return n;n=r;var i=t.geo.interpolate(r[0],r[1]),o=i(.5),u=t.geo.rotation([-o[0],-o[1]])(r[0]),s=.5*i.distance,l=-c(Math.sin(u[1]*wn)/Math.sin(s));return u[0]>0&&(l=yn-l),a.call(u,[-o[0],-o[1],-l*xn]),e(s)},r}function tn(t,n){if(Math.abs(n)<vn)return[t,0];var e=Math.abs(n/Mn),r=c(e);if(Math.abs(t)<vn||Math.abs(Math.abs(n)-Mn)<vn)return[0,u(n)*yn*Math.tan(r/2)];var a=Math.cos(r),i=Math.abs(yn/t-t/yn)/2,o=i*i,s=a/(e+a-1),l=s*(2/e-1),f=l*l,h=f+o,d=s-f,p=o+s;return[u(t)*yn*(i*d+Math.sqrt(o*d*d-h*(s*s-f)))/h,u(n)*yn*(l*p-i*Math.sqrt((o+1)*h-p*p))/h]}function nn(t,n){if(Math.abs(n)<vn)return[t,0];var e=Math.abs(n/Mn),r=c(e);if(Math.abs(t)<vn||Math.abs(Math.abs(n)-Mn)<vn)return[0,u(n)*yn*Math.tan(r/2)];var a=Math.cos(r),i=Math.abs(yn/t-t/yn)/2,o=i*i,s=a*(Math.sqrt(1+o)-i*a)/(1+o*e*e);return[u(t)*yn*s,u(n)*yn*l(1-s*(2*i+s))]}function en(t,n){if(Math.abs(n)<vn)return[t,0];var e=n/Mn,r=c(e);if(Math.abs(t)<vn||Math.abs(Math.abs(n)-Mn)<vn)return[0,yn*Math.tan(r/2)];var a=(yn/t-t/yn)/2,i=e/(1+Math.cos(r));return[yn*(u(t)*l(a*a+1-i*i)-a),yn*i]}function rn(t,n){if(!n)return[t,0];var e=Math.abs(n);if(!t||e===Mn)return[0,n];var r=e/Mn,a=r*r,i=(8*r-a*(a+2)-5)/(2*a*(r-1)),o=i*i,c=r*i,s=a+o+2*c,f=r+3*i,h=t/Mn,d=h+1/h,p=u(Math.abs(t)-Mn)*Math.sqrt(d*d-4),g=p*p,v=s*(a+o*g-1)+(1-a)*(a*(f*f+4*o)+12*c*o+4*o*o),m=(p*(s+o-1)+2*l(v))/(4*s+g);return[u(t)*Mn*m,u(n)*Mn*l(1+p*Math.abs(m)-m*m)]}function an(t,n){return[t*Math.sqrt(1-3*n*n/(yn*yn)),n]}function on(t,n){var e=.90631*Math.sin(n),r=Math.sqrt(1-e*e),a=Math.sqrt(2/(1+r*Math.cos(t/=3)));return[2.66723*r*a*Math.sin(t),1.24104*e*a]}function un(t,n){var e=Math.cos(n),r=Math.cos(t)*e,a=1-r,i=Math.cos(t=Math.atan2(Math.sin(t)*e,-Math.sin(n))),o=Math.sin(t);return e=l(1-r*r),[o*e-i*a,-i*e-o*a]}function cn(t,n){var e=d(t,n);return[(e[0]+t/Mn)/2,(e[1]+n)/2]}t.geo.project=function(t,n){var r=n.stream;if(!r)throw new Error("not yet supported");return(t&&sn.hasOwnProperty(t.type)?sn[t.type]:e)(t,r)};var sn={Feature:n,FeatureCollection:function(t,e){return{type:"FeatureCollection",features:t.features.map(function(t){return n(t,e)})}}},ln=[],fn=[],hn={point:function(t,n){ln.push([t,n])},result:function t(){var t=ln.length?ln.length<2?{type:"Point",coordinates:ln[0]}:{type:"MultiPoint",coordinates:ln}:null;return ln=[],t}},dn={lineStart:r,point:function(t,n){ln.push([t,n])},lineEnd:function(){ln.length&&(fn.push(ln),ln=[])},result:function t(){var t=fn.length?fn.length<2?{type:"LineString",coordinates:fn[0]}:{type:"MultiLineString",coordinates:fn}:null;return fn=[],t}},pn={polygonStart:r,lineStart:r,point:function(t,n){ln.push([t,n])},lineEnd:function(){var t=ln.length;if(t){do ln.push(ln[0].slice());while(++t<4);fn.push(ln),ln=[]}},polygonEnd:r,result:function(){if(!fn.length)return null;var t=[],n=[];return fn.forEach(function(e){a(e)?t.push([e]):n.push(e)}),n.forEach(function(n){var e=n[0];t.some(function(t){return i(t[0],e)?(t.push(n),!0):void 0})||t.push([n])}),fn=[],t.length?t.length>1?{type:"MultiPolygon",coordinates:t}:{type:"Polygon",coordinates:t[0]}:null}},gn={Point:hn,MultiPoint:hn,LineString:dn,MultiLineString:dn,Polygon:pn,MultiPolygon:pn,Sphere:pn},vn=1e-6,mn=vn*vn,yn=Math.PI,Mn=yn/2,bn=Math.sqrt(yn),wn=yn/180,xn=180/yn,_n=t.geo.projection,kn=t.geo.projectionMutator;t.geo.interrupt=function(n){function e(t,e){for(var r=0>e?-1:1,a=c[+(0>e)],i=0,o=a.length-1;o>i&&t>a[i][2][0];++i);var u=n(t-a[i][1][0],e);return u[0]+=n(a[i][1][0],r*e>r*a[i][0][1]?a[i][0][1]:e)[0],u}function r(){u=c.map(function(t){return t.map(function(t){var e,r=n(t[0][0],t[0][1])[0],a=n(t[2][0],t[2][1])[0],i=n(t[1][0],t[0][1])[1],o=n(t[1][0],t[1][1])[1];return i>o&&(e=i,i=o,o=e),[[r,i],[a,o]]})})}function a(){for(var n=1e-6,e=[],r=0,a=c[0].length;a>r;++r){var o=c[0][r],u=180*o[0][0]/yn,s=180*o[0][1]/yn,l=180*o[1][1]/yn,f=180*o[2][0]/yn,h=180*o[2][1]/yn;e.push(i([[u+n,s+n],[u+n,l-n],[f-n,l-n],[f-n,h+n]],30))}for(var r=c[1].length-1;r>=0;--r){var o=c[1][r],u=180*o[0][0]/yn,s=180*o[0][1]/yn,l=180*o[1][1]/yn,f=180*o[2][0]/yn,h=180*o[2][1]/yn;e.push(i([[f-n,h-n],[f-n,l+n],[u+n,l+n],[u+n,s-n]],30))}return{type:"Polygon",coordinates:[t.merge(e)]}}function i(t,n){for(var e,r,a,i=-1,o=t.length,u=t[0],c=[];++i<o;){e=t[i],r=(e[0]-u[0])/n,a=(e[1]-u[1])/n;for(var s=0;n>s;++s)c.push([u[0]+s*r,u[1]+s*a]);u=e}return c.push(e),c}function o(t,n){return Math.abs(t[0]-n[0])<vn&&Math.abs(t[1]-n[1])<vn}var u,c=[[[[-yn,0],[0,Mn],[yn,0]]],[[[-yn,0],[0,-Mn],[yn,0]]]];n.invert&&(e.invert=function(t,r){for(var a=u[+(0>r)],i=c[+(0>r)],s=0,l=a.length;l>s;++s){var f=a[s];if(f[0][0]<=t&&t<f[1][0]&&f[0][1]<=r&&r<f[1][1]){var h=n.invert(t-n(i[s][1][0],0)[0],r);return h[0]+=i[s][1][0],o(e(h[0],h[1]),[t,r])?h:null}}});var s=t.geo.projection(e),l=s.stream;return s.stream=function(n){var e=s.rotate(),r=l(n),i=(s.rotate([0,0]),l(n));return s.rotate(e),r.sphere=function(){t.geo.stream(a(),i)},r},s.lobes=function(t){return arguments.length?(c=t.map(function(t){return t.map(function(t){return[[t[0][0]*yn/180,t[0][1]*yn/180],[t[1][0]*yn/180,t[1][1]*yn/180],[t[2][0]*yn/180,t[2][1]*yn/180]]})}),r(),s):c.map(function(t){return t.map(function(t){return[[180*t[0][0]/yn,180*t[0][1]/yn],[180*t[1][0]/yn,180*t[1][1]/yn],[180*t[2][0]/yn,180*t[2][1]/yn]]})})},s},(t.geo.airy=h).raw=f,d.invert=function(t,n){if(!(t*t+4*n*n>yn*yn+vn)){var e=t,r=n,a=25;do{var i,o=Math.sin(e),u=Math.sin(e/2),c=Math.cos(e/2),l=Math.sin(r),f=Math.cos(r),h=Math.sin(2*r),d=l*l,p=f*f,g=u*u,v=1-p*c*c,m=v?s(f*c)*Math.sqrt(i=1/v):i=0,y=2*m*f*u-t,M=m*l-n,b=i*(p*g+m*f*c*d),w=i*(.5*o*h-2*m*l*u),x=.25*i*(h*u-m*l*p*o),_=i*(d*c+m*g*f),k=w*x-_*b;if(!k)break;var E=(M*w-y*_)/k,T=(y*x-M*b)/k;e-=E,r-=T}while((Math.abs(E)>vn||Math.abs(T)>vn)&&--a>0);return[e,r]}},(t.geo.aitoff=function(){return _n(d)}).raw=d,(t.geo.armadillo=g).raw=p,w.invert=function(t,n){if(t*=3/8,n*=3/8,!t&&Math.abs(n)>1)return null;var e=t*t,r=n*n,a=1+e+r,i=Math.sqrt(.5*(a-Math.sqrt(a*a-4*n*n))),o=c(i)/3,s=i?b(Math.abs(n/i))/3:M(Math.abs(t))/3,l=Math.cos(o),f=y(s),h=f*f-l*l;return[2*u(t)*Math.atan2(m(s)*l,.25-h),2*u(n)*Math.atan2(f*Math.sin(o),.25+h)]},(t.geo.august=function(){return _n(w)}).raw=w;var En=Math.log(1+Math.SQRT2);x.invert=function(t,n){if((r=Math.abs(n))<En)return[t,2*Math.atan(Math.exp(n))-Mn];var e,r,a=Math.sqrt(8),i=yn/4,o=25;do{var c=Math.cos(i/2),s=Math.tan(i/2);i-=e=(a*(i-yn/4)-Math.log(s)-r)/(a-.5*c*c/s)}while(Math.abs(e)>mn&&--o>0);return[t/(Math.cos(i)*(a-1/Math.sin(i))),u(n)*i]},(t.geo.baker=function(){return _n(x)}).raw=x;var Tn=t.geo.azimuthalEquidistant.raw;(t.geo.berghaus=k).raw=_;var Sn=E(yn),An=T(Math.SQRT2/Mn,Math.SQRT2,yn);(t.geo.mollweide=function(){return _n(An)}).raw=An,S.invert=function(t,n){var e,r,a=2.00276,i=a*n,o=0>n?-yn/4:yn/4,u=25;do r=i-Math.SQRT2*Math.sin(o),o-=e=(Math.sin(2*o)+2*o-yn*Math.sin(r))/(2*Math.cos(2*o)+2+yn*Math.cos(r)*Math.SQRT2*Math.cos(o));while(Math.abs(e)>vn&&--u>0);return r=i-Math.SQRT2*Math.sin(o),[t*(1/Math.cos(r)+1.11072/Math.cos(o))/a,r]},(t.geo.boggs=function(){return _n(S)}).raw=S,N.invert=function(t,n){return[t/Math.cos(n),n]},(t.geo.sinusoidal=function(){return _n(N)}).raw=N,(t.geo.bonne=function(){return A(j).parallel(45)}).raw=j;var Nn=T(1,4/yn,yn);(t.geo.bromley=function(){return _n(Nn)}).raw=Nn,(t.geo.chamberlin=C).raw=R,D.invert=function(t,n){var e=(e=n/bn-1)*e;return[e>0?t*Math.sqrt(yn/e)/2:0,c(1-e)]},(t.geo.collignon=function(){return _n(D)}).raw=D,(t.geo.craig=function(){return A(O)}).raw=O,z.invert=function(t,n){var e=Math.sqrt(3),r=3*c(n/(e*bn));return[bn*t/(e*(2*Math.cos(2*r/3)-1)),r]},(t.geo.craster=function(){return _n(z)}).raw=z,(t.geo.cylindricalEqualArea=function(){return A(I)}).raw=I,(t.geo.cylindricalStereographic=function(){return A(U)}).raw=U,H.invert=function(t,n){var e=Math.sqrt(8/(3*yn)),r=n/e;return[t/(e*(1-Math.abs(r)/yn)),r]},(t.geo.eckert1=function(){return _n(H)}).raw=H,G.invert=function(t,n){var e=2-Math.abs(n)/Math.sqrt(2*yn/3);return[t*Math.sqrt(6*yn)/(2*e),u(n)*c((4-e*e)/3)]},(t.geo.eckert2=function(){return _n(G)}).raw=G,B.invert=function(t,n){var e=Math.sqrt(yn*(4+yn))/2;return[t*e/(1+l(1-n*n*(4+yn)/(4*yn))),n*e/2]},(t.geo.eckert3=function(){return _n(B)}).raw=B,X.invert=function(t,n){var e=.5*n*Math.sqrt((4+yn)/yn),r=c(e),a=Math.cos(r);return[t/(2/Math.sqrt(yn*(4+yn))*(1+a)),c((r+e*(a+2))/(2+Mn))]},(t.geo.eckert4=function(){return _n(X)}).raw=X,W.invert=function(t,n){var e=Math.sqrt(2+yn),r=n*e/2;return[e*t/(1+Math.cos(r)),r]},(t.geo.eckert5=function(){return _n(W)}).raw=W,Q.invert=function(t,n){var e=1+Mn,r=Math.sqrt(e/2);return[2*t*r/(1+Math.cos(n*=r)),c((n+Math.sin(n))/e)]},(t.geo.eckert6=function(){return _n(Q)}).raw=Q,$.invert=function(n,e){var r=t.geo.august.raw.invert(n/1.2,1.065*e);if(!r)return null;var a=r[0],i=r[1],o=20;n/=jn,e/=jn;do{var u=a/2,c=i/2,s=Math.sin(u),l=Math.cos(u),f=Math.sin(c),h=Math.cos(c),d=Math.cos(i),p=Math.sqrt(d),g=f/(h+Math.SQRT2*l*p),v=g*g,m=Math.sqrt(2/(1+v)),y=Math.SQRT2*h+(l+s)*p,M=Math.SQRT2*h+(l-s)*p,b=y/M,w=Math.sqrt(b),x=w-1/w,_=w+1/w,k=m*x-2*Math.log(w)-n,E=m*g*_-2*Math.atan(g)-e,T=f&&Math.SQRT1_2*p*s*v/f,S=(Math.SQRT2*l*h+p)/(2*(h+Math.SQRT2*l*p)*(h+Math.SQRT2*l*p)*p),A=-.5*g*m*m*m,N=A*T,j=A*S,R=(R=2*h+Math.SQRT2*p*(l-s))*R*w,C=(Math.SQRT2*l*h*p+d)/R,q=-(Math.SQRT2*s*f)/(p*R),P=x*N-2*C/w+m*(C+C/b),L=x*j-2*q/w+m*(q+q/b),F=g*_*N-2*T/(1+v)+m*_*T+m*g*(C-C/b),D=g*_*j-2*S/(1+v)+m*_*S+m*g*(q-q/b),O=L*F-D*P;if(!O)break;var z=(E*L-k*D)/O,I=(k*F-E*P)/O;a-=z,i=Math.max(-Mn,Math.min(Mn,i-I))}while((Math.abs(z)>vn||Math.abs(I)>vn)&&--o>0);return Math.abs(Math.abs(i)-Mn)<vn?[0,i]:o&&[a,i]};var jn=3+2*Math.SQRT2;(t.geo.eisenlohr=function(){return _n($)}).raw=$,V.invert=function(t,n){var e=n/(1+Rn);return[t?t/(Rn*l(1-e*e)):0,2*Math.atan(e)]};var Rn=Math.cos(35*wn);(t.geo.fahey=function(){return _n(V)}).raw=V,Y.invert=function(t,n){var e=Math.atan(n/bn),r=Math.cos(e),a=2*e;return[t*bn*.5/(Math.cos(a)*r*r),a]},(t.geo.foucaut=function(){return _n(Y)}).raw=Y,t.geo.gilbert=function(n){function e(t){return n([.5*t[0],c(Math.tan(.5*t[1]*wn))*xn])}var r=t.geo.equirectangular().scale(xn).translate([0,0]);return n.invert&&(e.invert=function(t){return t=n.invert(t),t[0]*=2,t[1]=2*Math.atan(Math.sin(t[1]*wn))*xn,t}),e.stream=function(t){t=n.stream(t);var e=r.stream({point:function(n,e){t.point(.5*n,c(Math.tan(.5*-e*wn))*xn)},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}});return e.sphere=function(){t.sphere()},e.valid=!1,e},e};var Cn=t.geo.azimuthalEquidistant.raw;(t.geo.gingery=Z).raw=J;var qn=nt(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);(t.geo.ginzburg4=function(){return _n(qn)}).raw=qn;var Pn=nt(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);(t.geo.ginzburg5=function(){return _n(Pn)}).raw=Pn;var Ln=nt(5/6*yn,-.62636,-.0344,0,1.3493,-.05524,0,.045);(t.geo.ginzburg6=function(){return _n(Ln)}).raw=Ln,et.invert=function(t,n){var e,r=t,a=n,i=50;do{var o=a*a;a-=e=(a*(1+o/12)-n)/(1+o/4)}while(Math.abs(e)>vn&&--i>0);i=50,t/=1-.162388*o;do{var u=(u=r*r)*u;r-=e=(r*(.87-952426e-9*u)-t)/(.87-.00476213*u)}while(Math.abs(e)>vn&&--i>0);return[r,a]},(t.geo.ginzburg8=function(){return _n(et)}).raw=et;var Fn=nt(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);(t.geo.ginzburg9=function(){return _n(Fn)}).raw=Fn,at.invert=function(t,n){var e=u(t),r=u(n),a=-e*t,i=-r*n,o=1>i/a,s=ot(o?i:a,o?a:i),l=s[0],f=s[1];o&&(l=-Mn-l);var h=Math.cos(f),t=Math.cos(l)*h,n=Math.sin(l)*h,d=Math.sin(f);return[e*(Math.atan2(n,-d)+yn),r*c(t)]},t.geo.gringorten=rt(at),ft.invert=function(t,n){var e=(Math.SQRT2-1)/(Math.SQRT2+1),r=Math.sqrt(1-e*e),a=lt(Mn,r*r),i=-1,o=ut(.5*a-n,-t,r*r),u=dt(o[0],o[1]),c=Math.atan2(u[1],u[0])/i;return[c,2*Math.atan(Math.exp(.5/i*Math.log(e*u[0]*u[0]+e*u[1]*u[1])))-Mn]},t.geo.guyou=rt(ft),(t.geo.hammerRetroazimuthal=vt).raw=pt;var Dn=t.geo.azimuthalEqualArea.raw;Mt.invert=function(t,n){var e=2*c(n/2);return[t*Math.cos(e/2)/Math.cos(e),e]},(t.geo.hammer=yt).raw=mt,bt.invert=function(t,n){var e=Math.abs(e=n*(0>n?.5179951515653813:.5686373742600607))>1-vn?e>0?Mn:-Mn:c(e);return[1.1764705882352942*t/Math.cos(e),Math.abs(e=((e+=e)+Math.sin(e))*(0>n?.4102345310814193:.3736990601468637))>1-vn?e>0?Mn:-Mn:c(e)]},(t.geo.hatano=function(){return _n(bt)}).raw=bt;var On=41+48/36+37/3600;(t.geo.healpix=xt).raw=wt,(t.geo.hill=kt).raw=_t;var zn=.7109889596207567,In=.0528035274542;Et.invert=function(t,n){return n>-zn?An.invert(t,n-In):N.invert(t,n)},(t.geo.sinuMollweide=function(){return _n(Et).rotate([-20,-55])}).raw=Et,Tt.invert=function(t,n){return Math.abs(n)>zn?An.invert(t,n+(n>0?In:-In)):N.invert(t,n)},(t.geo.homolosine=function(){return _n(Tt)}).raw=Tt,St.invert=function(t,n){return[2/3*yn*t/Math.sqrt(yn*yn/3-n*n),n]},(t.geo.kavrayskiy7=function(){return _n(St)}).raw=St,(t.geo.lagrange=Nt).raw=At,jt.invert=function(t,n){var e=Math.abs(t),r=Math.abs(n),a=yn/Math.SQRT2,i=vn,o=Mn;a>r?o*=r/a:i+=6*s(a/r);for(var u=0;25>u;u++){var c=Math.sin(o),f=l(Math.cos(o)),h=Math.sin(o/2),d=Math.cos(o/2),p=Math.sin(i/6),g=Math.cos(i/6),v=.5*i*(1+f)-e,m=o/(d*g)-r,y=f?-.25*i*c/f:0,M=.5*(1+f),b=(1+.5*o*h/d)/(d*g),w=o/d*(p/6)/(g*g),x=y*w-b*M,_=(v*w-m*M)/x,k=(m*y-v*b)/x;if(o-=_,i-=k,Math.abs(_)<vn&&Math.abs(k)<vn)break}return[0>t?-i:i,0>n?-o:o]},(t.geo.larrivee=function(){return _n(jt)}).raw=jt,Rt.invert=function(t,n){var e=u(t)*yn,r=n/2,a=50;do{var i=e*e,o=r*r,c=e*r,s=e*(.975534+o*(-.119161+i*-.0143059+o*-.0547009))-t,l=r*(1.00384+i*(.0802894+o*-.02855+199025e-9*i)+o*(.0998909+o*-.0491032))-n,f=.975534-o*(.119161+3*i*.0143059+.0547009*o),h=-c*(.238322+.2188036*o+.0286118*i),d=c*(.1605788+7961e-7*i+-0.0571*o),p=1.00384+i*(.0802894+199025e-9*i)+o*(3*(.0998909-.02855*i)-.245516*o),g=h*d-p*f,v=(l*h-s*p)/g,m=(s*d-l*f)/g;e-=v,r-=m}while((Math.abs(v)>vn||Math.abs(m)>vn)&&--a>0);return a&&[e,r]},(t.geo.laskowski=function(){return _n(Rt)}).raw=Rt,Ct.invert=function(t,n){var e=t*t,r=n*n,a=r+1,i=t?Math.SQRT1_2*Math.sqrt((a-Math.sqrt(e*e+2*e*(r-1)+a*a))/e+1):1/Math.sqrt(a);return[c(t*i),u(n)*s(i)]},(t.geo.littrow=function(){return _n(Ct)}).raw=Ct,(t.geo.loximuthal=function(){return A(qt).parallel(40)}).raw=qt,Pt.invert=function(t,n){return[t,2.5*Math.atan(Math.exp(.8*n))-.625*yn]},(t.geo.miller=function(){return _n(Pt)}).raw=Pt;var Un={alaska:[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],gs48:[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],gs50:[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],miller:[[.9245,0],[0,0],[.01943,0]],lee:[[.721316,0],[0,0],[-.00881625,-.00617325]]};(t.geo.modifiedStereographic=Ft).raw=Lt,Dt.invert=function(t,n){var e=Math.sqrt(6),r=Math.sqrt(7),a=3*c(n*r/9);return[t*r/(e*(2*Math.cos(2*a/3)-1)),c(3*Math.sin(a)*e/7)]},(t.geo.mtFlatPolarParabolic=function(){return _n(Dt)}).raw=Dt,Ot.invert=function(t,n){var e=n*Math.sqrt(2+Math.SQRT2)/(2*Math.sqrt(3)),r=2*c(e);return[3*Math.SQRT2*t/(1+2*Math.cos(r)/Math.cos(r/2)),c((e+Math.sin(r))/(1+Math.SQRT1_2))]},(t.geo.mtFlatPolarQuartic=function(){return _n(Ot)}).raw=Ot,zt.invert=function(t,n){var e=Math.sqrt(6/(4+yn)),r=n/e;return Math.abs(Math.abs(r)-Mn)<vn&&(r=0>r?-Mn:Mn),[1.5*t/(e*(.5+Math.cos(r))),c((r/2+Math.sin(r))/(1+yn/4))]},(t.geo.mtFlatPolarSinusoidal=function(){return _n(zt)}).raw=zt,It.invert=function(t,n){var e,r=n,a=25;do{var i=r*r,o=i*i;r-=e=(r*(1.007226+i*(.015085+o*(-.044475+.028874*i-.005916*o)))-n)/(1.007226+i*(.045255+o*(-0.311325+.259866*i-.005916*11*o)))}while(Math.abs(e)>vn&&--a>0);return[t/(.8707+(i=r*r)*(-.131979+i*(-.013791+i*i*i*(.003971-.001529*i)))),r]},(t.geo.naturalEarth=function(){return _n(It)}).raw=It,Ut.invert=function(t,n){for(var e=n/2,r=0,a=1/0;10>r&&Math.abs(a)>vn;r++){var i=Math.cos(n/2);n-=a=(n-Math.tan(n/2)-e)/(1-.5/(i*i))}return[2*t/(1+Math.cos(n)),n]},(t.geo.nellHammer=function(){return _n(Ut)}).raw=Ut;var Hn=1.0148,Gn=.23185,Bn=-.14499,Xn=.02406,Wn=Hn,Qn=5*Gn,$n=7*Bn,Vn=9*Xn,Yn=1.790857183;Ht.invert=function(t,n){n>Yn?n=Yn:-Yn>n&&(n=-Yn);var e,r=n;do{var a=r*r;r-=e=(r*(Hn+a*a*(Gn+a*(Bn+Xn*a)))-n)/(Wn+a*a*(Qn+a*($n+Vn*a)))}while(Math.abs(e)>vn);return[t,r]},(t.geo.patterson=function(){return _n(Ht)}).raw=Ht;var Jn=rt(ft);(t.geo.peirceQuincuncial=function(){return Jn().quincuncial(!0).rotate([-90,-90,45]).clipAngle(180-1e-6)}).raw=Jn.raw,Gt.invert=function(t,n){if(Math.abs(n)<vn)return[t,0];var e,r=t*t+n*n,a=.5*n,i=10;do{var o=Math.tan(a),l=1/Math.cos(a),f=r-2*n*a+a*a;a-=e=(o*f+2*(a-n))/(2+f*l*l+2*(a-n)*o)}while(Math.abs(e)>vn&&--i>0);return o=Math.tan(a),[(Math.abs(n)<Math.abs(a+1/o)?c(t*o):u(t)*(s(Math.abs(t*o))+Mn))/Math.sin(a),a]},(t.geo.polyconic=function(){return _n(Gt)}).raw=Gt,(t.geo.rectangularPolyconic=function(){return A(Bt)}).raw=Bt;var Kn=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];Kn.forEach(function(t){t[1]*=1.0144}),Xt.invert=function(t,n){var e=n/Mn,r=90*e,a=Math.min(18,Math.abs(r/5)),i=Math.max(0,Math.floor(a));do{var o=Kn[i][1],u=Kn[i+1][1],c=Kn[Math.min(19,i+2)][1],s=c-o,l=c-2*u+o,f=2*(Math.abs(e)-u)/s,h=l/s,d=f*(1-h*f*(1-2*h*f));if(d>=0||1===i){r=(n>=0?5:-5)*(d+a);var p,g=50;do a=Math.min(18,Math.abs(r)/5),i=Math.floor(a),d=a-i,o=Kn[i][1],u=Kn[i+1][1],c=Kn[Math.min(19,i+2)][1],r-=(p=(n>=0?Mn:-Mn)*(u+d*(c-o)/2+d*d*(c-2*u+o)/2)-n)*xn;while(Math.abs(p)>mn&&--g>0);break}}while(--i>=0);var v=Kn[i][0],m=Kn[i+1][0],y=Kn[Math.min(19,i+2)][0];return[t/(m+d*(y-v)/2+d*d*(y-2*m+v)/2),r*wn]},(t.geo.robinson=function(){return _n(Xt)}).raw=Xt,(t.geo.satellite=$t).raw=Qt,Vt.invert=function(t,n){var e=n/1.70711,r=Math.sin(yn/4*e);return[t/(.74482-.34588*r*r),2*Math.atan(e)]},(t.geo.times=function(){return _n(Vt)}).raw=Vt,(t.geo.twoPointEquidistant=Jt).raw=Yt,(t.geo.twoPointAzimuthal=Zt).raw=Kt,tn.invert=function(t,n){if(Math.abs(n)<vn)return[t,0];if(Math.abs(t)<vn)return[0,Mn*Math.sin(2*Math.atan(n/yn))];var e=(t/=yn)*t,r=(n/=yn)*n,a=e+r,i=a*a,o=-Math.abs(n)*(1+a),c=o-2*r+e,l=-2*o+1+2*r+i,f=r/l+(2*c*c*c/(l*l*l)-9*o*c/(l*l))/27,h=(o-c*c/(3*l))/l,d=2*Math.sqrt(-h/3),p=s(3*f/(h*d))/3;return[yn*(a-1+Math.sqrt(1+2*(e-r)+i))/(2*t),u(n)*yn*(-d*Math.cos(p+yn/3)-c/(3*l))]},(t.geo.vanDerGrinten=function(){return _n(tn)}).raw=tn,nn.invert=function(t,n){if(!t)return[0,Mn*Math.sin(2*Math.atan(n/yn))];var e=Math.abs(t/yn),r=(1-e*e-(n/=yn)*n)/(2*e),a=r*r,i=Math.sqrt(a+1);return[u(t)*yn*(i-r),u(n)*Mn*Math.sin(2*Math.atan2(Math.sqrt((1-2*r*e)*(r+i)-e),Math.sqrt(i+r+e)))]},(t.geo.vanDerGrinten2=function(){return _n(nn)}).raw=nn,en.invert=function(t,n){if(!n)return[t,0];var e=n/yn,r=(yn*yn*(1-e*e)-t*t)/(2*yn*t);return[t?yn*(u(t)*Math.sqrt(r*r+1)-r):0,Mn*Math.sin(2*Math.atan(e))]},(t.geo.vanDerGrinten3=function(){return _n(en)}).raw=en,rn.invert=function(t,n){if(!t||!n)return[t,n];n/=yn;var e=u(t)*t/Mn,r=(e*e-1+4*n*n)/Math.abs(e),a=r*r,i=2*n,o=50;do{var c=i*i,s=(8*i-c*(c+2)-5)/(2*c*(i-1)),l=(3*i-c*i-10)/(2*c*i),f=s*s,h=i*s,d=i+s,p=d*d,g=i+3*s,v=p*(c+f*a-1)+(1-c)*(c*(g*g+4*f)+f*(12*h+4*f)),m=-2*d*(4*h*f+(1-4*c+3*c*c)*(1+l)+f*(-6+14*c-a+(-8+8*c-2*a)*l)+h*(-8+12*c+(-10+10*c-a)*l)),y=Math.sqrt(v),M=r*(p+f-1)+2*y-e*(4*p+a),b=r*(2*s*l+2*d*(1+l))+m/y-8*d*(r*(-1+f+p)+2*y)*(1+l)/(a+4*p);i-==M/b}while(>vn&&--o>0);return[u(t)*(Math.sqrt(r*r+4)+r)*yn/4,Mn*i]},(t.geo.vanDerGrinten4=function(){return _n(rn)}).raw=rn;var Zn=function(){var t=4*yn+3*Math.sqrt(3),n=2*Math.sqrt(2*yn*Math.sqrt(3)/t);return T(n*Math.sqrt(3)/yn,n,t/6)}();(t.geo.wagner4=function(){return _n(Zn)}).raw=Zn,an.invert=function(t,n){return[t/Math.sqrt(1-3*n*n/(yn*yn)),n]},(t.geo.wagner6=function(){return _n(an)}).raw=an,on.invert=function(t,n){var e=t/2.66723,r=n/1.24104,a=Math.sqrt(e*e+r*r),i=2*c(a/2);return[3*Math.atan2(t*Math.tan(i),2.66723*a),a&&c(n*Math.sin(i)/(1.24104*.90631*a))]},(t.geo.wagner7=function(){return _n(on)}).raw=on,un.invert=function(t,n){var e=-.5*(t*t+n*n),r=Math.sqrt(-e*(2+e)),a=n*e+t*r,i=t*e-n*r,o=Math.sqrt(i*i+a*a);return[Math.atan2(r*a,o*(1+e)),o?-c(r*i/o):0]},(t.geo.wiechel=function(){return _n(un)}).raw=un,cn.invert=function(t,n){var e=t,r=n,a=25;do{var i,o=Math.cos(r),u=Math.sin(r),c=Math.sin(2*r),l=u*u,f=o*o,h=Math.sin(e),d=Math.cos(e/2),p=Math.sin(e/2),g=p*p,v=1-f*d*d,m=v?s(o*d)*Math.sqrt(i=1/v):i=0,y=.5*(2*m*o*p+e/Mn)-t,M=.5*(m*u+r)-n,b=.5*i*(f*g+m*o*d*l)+.5/Mn,w=i*(h*c/4-m*u*p),x=.125*i*(c*p-m*u*f*h),_=.5*i*(l*d+m*g*o)+.5,k=w*x-_*b,E=(M*w-y*_)/k,T=(y*x-M*b)/k;e-=E,r-=T}while((Math.abs(E)>vn||Math.abs(T)>vn)&&--a>0);return[e,r]},(t.geo.winkel3=function(){return _n(cn)}).raw=cn}},{}],29:[function(t,n,e){"use strict";!function(){var t=n.exports={};t.decodeUTF8=function(t){for(var n=[],e=0;e<t.length;){var r=t[e++];switch(r>>4){case 12:case 13:r=(31&r)<<6|63&t[e++];break;case 14:r=(15&r)<<12|(63&t[e++])<<6|63&t[e++]}n.push(r)}return String.fromCharCode.apply(null,n)},t.varpackDecode=function(t,n){for(var e=0,r=0;e<n.length;){var a=n[e++];if(128>a)a=a<<25>>25;else switch(a>>4){case 8:case 9:case 10:case 11:a=a<<26>>18|n[e++];break;case 12:case 13:a=a<<27>>11|n[e++]<<8|n[e++];break;case 14:a=a<<28>>4|n[e++]<<16|n[e++]<<8|n[e++];break;case 15:if(255===a){for(var i=1+n[e++];i>0;i--)t[r++]=NaN;continue}a=n[e++]<<24|n[e++]<<16|n[e++]<<8|n[e++]}t[r++]=a}return t},t.undeltaPlane=function(t,n,e,r){var a,i,o,u,c,s,l;for(o=0;r>o;o++){for(s=o*n*e,a=1;n>a;a++)u=s+a,l=t[u-1],t[u]+=l===l?l:0;for(i=1;e>i;i++)for(c=s+i*n,l=t[c-n],t[c]+=l===l?l:0,a=1;n>a;a++){u=c+a;var f=t[u-1],h=t[u-n],d=t[u-n-1];l=f+h-d,t[u]+=l===l?l:f===f?f:h===h?h:d===d?d:0}}return t},t.dequantize=function(t,n){for(var e=Math.pow(10,n),r=0;r<t.length;r++){var a=t[r];t[r]=a===a?a/e:7e37}return t},t.decodePpak=function(n,e,r,a,i){var o=new Float32Array(e*r*a);return t.varpackDecode(o,n),t.undeltaPlane(o,e,r,a),t.dequantize(o,i),o},t.decodePpakBlock=function(n,e,r){var a=new DataView(n,e,r);return t.decodePpak(new Uint8Array(n,e+16,r-16),a.getInt32(0),a.getInt32(4),a.getInt32(8),a.getFloat32(12))},t.decodeEpak=function(n,e){var r=!!(e||{}).headerOnly,a=0,i=new DataView(n),o=t.decodeUTF8(new Uint8Array(n,a,4));if(a+=4,"head"!==o)throw new Error("expected 'head' but found '"+o+"'");var u=i.getInt32(a);a+=4;var c=JSON.parse(t.decodeUTF8(new Uint8Array(n,a,u)));a+=u;for(var s,l,f=[];"tail"!==(l=t.decodeUTF8(new Uint8Array(n,a,4)))&&!r;){switch(a+=4,u=i.getInt32(a),a+=4,l){case"ppak":s=t.decodePpakBlock(n,a,u);break;default:throw new Error("unknown block type: "+l)}f.push(s),a+=u}return{header:c,blocks:f}}}()},{}],30:[function(t,n,e){"use strict";function r(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}n.exports=function n(e){function a(t){return X.newAgent(t).on({reject:gt.error,fail:gt.error})}function i(){function t(t,n){return{type:"click",startMouse:t,startScale:n,manipulator:i.manipulator(t,n)}}function n(){o=o||t(I.mouse(this),i.projection.scale())}function e(){var n=I.mouse(this),e=X.coalesce(I.event.scale,i.projection.scale());if(o=o||t(n,1),"click"===o.type||"spurious"===o.type){var r=X.distance(n,o.startMouse);if(e===o.startScale&&et>r)return void(o.type=r>0?"click":"spurious");d.trigger("moveStart"),o.type="drag"}(e!=o.startScale||G.isNaN(n[0]))&&(o.type="zoom"),o.manipulator.move("zoom"===o.type?null:n,e),d.trigger("move")}function r(){null!==o&&(o.manipulator.end(),"click"===o.type?(Date.now()-c.time>500||X.distance(c.mouse,o.startMouse)>=et)&&(d.trigger("click",o.startMouse,i.projection.invert(o.startMouse)||[]),c={time:Date.now(),mouse:o.startMouse}):"spurious"!==o.type&&s(),o=null)}function a(){var t=arguments[2]||{};i&&"moveEnd"!==t.source&&(d.trigger("moveStart"),i.orientation(vt.get("orientation"),pt),l.scale(i.projection.scale()),d.trigger("moveEnd"))}var i,o=null,c={time:0,mouse:[0,0]},s=G.debounce(function(){(!o||"drag"!==o.type&&"zoom"!==o.type)&&(vt.save({orientation:i.orientation()},{source:"moveEnd"}),d.trigger("moveEnd"))},rt),l=I.behavior.zoom().on("zoomstart",n).on("zoom",e).on("zoomend",r),f=I.behavior.drag().on("dragstart",n).on("drag",e).on("dragend",r),h=I.select("#display");X.isFixedMode()?h.on("click",function(){n.call(this),r.call(this)}):h.call(X.isEmbeddedInIFrame()&&!X.isKioskMode()?f:l),I.select("#show-location").on("click",function(){navigator.geolocation&&(gt.status("Finding current position..."),navigator.geolocation.getCurrentPosition(function(t){gt.status(""),u(t.coords.longitude,t.coords.latitude)},gt.error))});var d=G.extend({globe:function(t){return t&&(i=t,l.scaleExtent(i.scaleExtent()),a()),t?this:i},cancelMove:function(){r()}},B.Events);return d.listenTo(vt,"change:orientation",a)}function o(t){var n=Mt.value();if(n){var e=n.locate(t);e&&(n.projection.rotate(e),vt.save({orientation:n.orientation()}))}}function u(t,n){var e=+t,r=+n,a=[e,r];return e!==e||r!==r?void R():(j(null,a),void o(a))}function c(t){var n=this.cancel;gt.status("Downloading...");var e=[];return e.push(X.loadJson(t)),"tara"===X.siteInstance()&&(e.push(X.loadJson($.gaia("/data/tara/tara-plan.json"))),e.push(X.loadJson($.gaia("/data/tara/tara-track.json")))),H.all(e).spread(function(t,e,r){if(n.requested)return null;J.time("building meshes");var a=t.objects,i=U.feature(t,X.isMobile()?a.coastline_tiny:a.coastline_110m),o=U.feature(t,X.isMobile()?a.coastline_110m:a.coastline_50m),u=U.feature(t,X.isMobile()?a.lakes_tiny:a.lakes_110m),c=U.feature(t,X.isMobile()?a.lakes_110m:a.lakes_50m),s=U.feature(t,X.isMobile()?a.rivers_tiny:a.rivers_110m),l=U.feature(t,X.isMobile()?a.rivers_110m:a.rivers_50m);return J.timeEnd("building meshes"),{coastLo:i,coastHi:o,lakesLo:u,lakesHi:c,riversLo:s,riversHi:l,tara:{plan:e,track:r}}})}function s(t){var n=Q[t];return n?n(pt):H.reject("Unknown projection: "+t)}function l(t){gt.status("Downloading..."),J.time("build grids");var n=this.cancel;return At++,H.all($.productsFor(vt.attributes)).then(function(e){var r=H.map(e,function(t){return t.load(n)});return H.all(r).then(function(n){return{primaryGrid:n[0],overlayGrid:n[1]||n[0],isNewPrimaryGrid:!!t}}).otherwise(function(n){return gt.error(n),{primaryGrid:e[0],overlayGrid:e[1]||e[0],isNewPrimaryGrid:!!t}})}).ensure(function(){At--,J.timeEnd("build grids")})}function f(t){if(At>0)return void J.debug("Download in progress--ignoring nav request.");var n=bt.value().overlayGrid.navigate(t);n&&vt.save(X.dateToConfig(n))}function h(t,n,e){var r=t.append("g");r.append("path").attr("class","tara-route tara-plan").datum(n.plan);var a=n.track.geometries;a=a.filter(function(t,n){return n>a.length-10||n%2==0});var i={type:"LineString",coordinates:G.pluck(a,"coordinates")};r.append("path").attr("class","tara-route tara-track-border").datum(i),r.append("path").attr("class","tara-route tara-track").datum(i);var u={type:"Point",coordinates:G.last(i.coordinates),size:4};(""===e||",,"===e.substr(0,2))&&o(u.coordinates),r.append("path").attr("class","tara-loc").datum(u);var c=G.last(a),s={date:c.date,heading:+X.coalesce(c.heading,NaN),speed:3.6*+X.coalesce(c.speed,NaN),air_temp:+X.coalesce(c.air_temp,NaN),water_temp:+X.coalesce(c.water_temp,NaN),pressure:+X.coalesce(c.pressure,NaN)},l={date:W.print(W.localParts(s.date),"{yyyy}-{MM}-{dd} {hh}:{mm}"),heading:isNaN(s.heading)?"N/A":s.heading.toFixed(0),speed:isNaN(s.speed)?"N/A":s.speed.toFixed(1),air_temp:isNaN(s.air_temp)?"N/A":s.air_temp.toFixed(1),water_temp:isNaN(s.water_temp)?"N/A":s.water_temp.toFixed(1),pressure:isNaN(s.pressure)?"N/A":s.pressure.toFixed(0)},f=I.select("#tara-stats");f.selectAll("*").remove(),f.append("p").text("Tara stats:"),f.append("p").classed("stat",!0).text(l.heading+" @ "+l.speed+" km/h"),f.append("p").classed("stat",!0).text(l.air_temp+" C (air)"),f.append("p").classed("stat",!0).text(l.water_temp+" C (water)"),f.append("p").classed("stat",!0).text(l.pressure+" hPa"),f.append("p").text(l.date),f.selectAll(".stat").attr("style","padding-left: 1em"),f.classed("invisible",!1)}function d(t,n){function e(t){var n=t?_:x;n.renderTo(i,s),k.renderTo(o,s),s.context(null)}function r(){u.selectAll("path").attr("d",s),e(!1),wt.trigger("redraw"),f=G.throttle(r,l,{leading:!1})}if(!t||!n)return null;gt.status("Rendering Globe..."),J.time("rendering map");var a=G.clone(B.Events);wt._previous&&wt._previous.stopListening(),wt._previous=a;var i=I.select("#map").node().getContext("2d"),o=I.select("#foreground").node().getContext("2d"),u=I.select("#annotation"),c=vt.get("orientation");X.removeChildren(u.node()),n.orientation(c,pt);var s=I.geo.path().projection(n.projection).pointRadius(function(t){return t.size||7});"tara"===X.siteInstance()&&h(u,t.tara,c),N();var l=5,f=G.throttle(r,l,{leading:!1}),d=1.25,p=n.backgroundRenderer(),g=n.graticuleRenderer(),v=Y.makeStrokeRenderer(t.coastLo,{strokeStyle:"#ffffff",lineWidth:d}),m=Y.makeStrokeRenderer(t.lakesLo,{strokeStyle:"#ffffff",lineWidth:d}),y=Y.makeStrokeRenderer(t.riversLo,{strokeStyle:"#808080",lineWidth:d}),M=Y.makeStrokeRenderer(t.coastHi,{strokeStyle:"#ffffff",lineWidth:d}),b=Y.makeStrokeRenderer(t.lakesHi,{strokeStyle:"#ffffff",lineWidth:d}),w=Y.makeStrokeRenderer(t.riversHi,{strokeStyle:"#808080",lineWidth:d}),x=Y.makeLayerRenderer([p,g,v,m,y]),_=Y.makeLayerRenderer([p,g,M,b,w]),k=Y.makeLayerRenderer([n.foregroundRenderer()]);return a.listenTo(mt,{
moveStart:function(){wt.trigger("start"),H(!0).then(function(){return wt.submit("moving")})},move:function(){f()},moveEnd:function(){u.selectAll("path").attr("d",s),e(!0),wt.trigger("render"),H(!0).then(function(){return wt.submit("ready")})}}),H(!0).then(function(){mt.globe(n)}).otherwise(gt.error),J.timeEnd("rendering map"),"ready"}function p(t,n){if(G.isFunction(t.set))t.set(n);else for(var e=0;e<n.length;e++)t[e]=n[e]}function g(t){if(!t)return null;J.time("render mask");var n=pt.width,e=pt.height,r=I.select(document.createElement("canvas")).attr("width",n).attr("height",e).node(),a=t.defineMask(r.getContext("2d"));a.fillStyle="rgba(255, 0, 0, 1)",a.fill();var i=a.createImageData(n,e),o=i.data;return p(o,a.getImageData(0,0,n,e).data),J.timeEnd("render mask"),{imageData:i,isVisible:function(t,e){var r=4*(e*n+t);return o[r+3]>0},set:function(t,e,r){var a=4*(e*n+t);return o[a]=r[0],o[a+1]=r[1],o[a+2]=r[2],o[a+3]=r[3],this}}}function v(t,n,e){var r=e.x,a={};return a.move=function(n,e,a,i){var o=Math.round(e);if(o>=0&&o<t.length){var u=t[o],c=3*(Math.round(n)-r);if(u&&c>=0&&c<u.length)return a[i]=n,a[i+1]=e,a[i+2]=u[c],a[i+3]=u[c+1],void(a[i+4]=u[c+2])}a[i]=n,a[i+1]=e,a[i+2]=7e37,a[i+3]=7e37,a[i+4]=7e37},a.isDefined=function(n,e){var a=Math.round(e);if(a>=0&&a<t.length){var i=t[a],o=3*(Math.round(n)-r);if(i&&o>=0&&o<i.length)return i[o]<7e37}return!1},a.isInsideBoundary=function(t,n){var e=new Float32Array(5);return a.move(t,n,e,0),e[4]<7e37},a.overlay=n.imageData,a}function m(t,n,e,r,a,i,o){var u=o[0]*i,c=o[1]*i,s=X.distortion(t,n,e,r,a);return o[0]=s[0]*u+s[2]*c,o[1]=s[1]*u+s[3]*c,o}function y(t,n){function e(t){for(var n=t===y.yMax,e=new Float32Array(3*y.width),r=y.x,o=0;r<=y.xMax;r+=T,o+=3*T){var c=r===y.xMax,f=ft;if(i.isVisible(r,t)){w[0]=r,w[1]=t;var h=p(w),g=dt;if(h){var v=h[0],x=h[1];if(v===v){f=s(h);var S=f[2];7e37>S?(f=m(d,v,x,r,t,M,f),S=f[2]):f=ht,a||(_&&(S=X.scalarize(l(h))),7e37>S&&(g=k.rgba(S),g[3]=u.alpha.animated))}}i.set(r,t,g),E||(c||(i.set(r+1,t,g),n||i.set(r+1,t+1,g)),n||i.set(r,t+1,g))}e[o]=f[0],e[o+1]=f[1],e[o+2]=f[2],E||c||(e[o+3]=f[0],e[o+4]=f[1],e[o+5]=f[2])}b[t]=e,E||(b[t+1]=e)}if(!t||!n||!wt.value())return null;var r=_t.value(),a=r&&r.draw("interp"),i=g(t),o=n.primaryGrid,u=n.overlayGrid;if(!o.field||!u.field)return null;var c="bilinear",s=o.field()[c],l=u.field()[c];J.time("interpolating field");var f=H.defer(),h=this.cancel,d=t.optimizedProjection(),p=d.invert.bind(d),y=t.bounds(pt),M=o.particles.velocityScale,b=[],w=[],x=y.y,_=o!==u,k=u.scale,E=vt.get("hd"),T=E?1:2;return gt.status(""),gt.progress(0),function t(){try{if(!h.requested)for(var n=Date.now();x<=y.yMax;)if(e(x),x+=T,Date.now()-n>tt)return gt.progress(Math.round((x-y.y)/(y.yMax-y.y)*100)),void setTimeout(t,nt);f.resolve(v(b,i,y))}catch(t){f.reject(t)}gt.progress(100),J.timeEnd("interpolating field")}(),f.promise}function M(t,n,e){function r(t){var e=M+Math.random()*w,r=b+Math.random()*x;n.move(e,r,g,t)}function a(t){for(var n=0;10>n;n++)if(r(t),g[t+2]<7e37)return}function i(){for(var t=0;t<y.length;t++)y[t]=0;for(var e=0,a=0;h>e;e+=1,a+=5){++v[e]>=d&&(v[e]=0,r(a));var i=g[a],o=g[a+1],u=g[a+2],c=g[a+3],s=i+u*A,l=o+c*A,p=g[a+4];if(p===p&&n.isDefined(s,l)){g[a]=s,g[a+1]=l;var M=Math.sqrt(u*u+c*c)/2.5,b=u/M,w=c/M,x=f.indexFor(p*T[v[e]]),_=4*y[x]++,k=m[x];k[_]=i-w,k[_+1]=o+b,k[_+2]=i+w,k[_+3]=o-b}else v[e]=d}}function o(){for(var t=0;t<y.length;t++)y[t]=0;for(var e=0,a=0;h>e;e+=1,a+=5){++v[e]>=d&&(v[e]=0,r(a));var i=g[a],o=g[a+1],u=i+g[a+2],c=o+g[a+3],s=g[a+4];if(u===u){n.move(u,c,g,a);var l=g[a+2];if(7e37>l){var p=f.indexFor(s),M=4*y[p]++,b=m[p];b[M]=i,b[M+1]=o,b[M+2]=u,b[M+3]=c}else v[e]=d}else v[e]=d}}function u(){_.globalCompositeOperation="destination-in",_.fillRect(l.x,l.y,l.width,l.height),_.globalCompositeOperation="source-over";for(var t=0;t<m.length;t++){var n=m[t],e=4*y[t];if(e>0){_.beginPath(),_.strokeStyle=f[t];for(var r=0;e>r;r+=4)_.moveTo(n[r],n[r+1]),_.lineTo(n[r+2],n[r+3]);_.stroke()}}}function c(){return s.requested?!1:(p(),u(),setTimeout(c,ct),!0)}if(!(t&&n&&e&&vt.get("animate")))return!1;e.isNewPrimaryGrid&&X.clearCanvas(I.select("#animation").node());var s=this.cancel,l=t.bounds(pt),f=X.windIntensityColorScale(at,e.primaryGrid.particles.maxIntensity),h=Math.round(l.width*ot);X.isMobile()&&(h=Math.floor(h*ut)),J.debug("particle count: %s",h);var d,p,g=new Float32Array(5*h),v=new Int32Array(h),m=f.map(function(){return new Float32Array(4*h)}),y=new Int32Array(m.length),M=l.x,b=l.y,w=l.width,x=l.height,_=I.select("#animation").node().getContext("2d");e.primaryGrid.particles.waves?(d=40,p=i,_.fillStyle="rgba(0, 0, 0, 0.90)"):(d=100,p=o,_.fillStyle=X.isFF()?"rgba(0, 0, 0, 0.95)":"rgba(0, 0, 0, 0.97)"),_.lineWidth=it;for(var k=0,E=0;h>k;k+=1,E+=5)v[k]=G.random(0,d),a(E);for(var T=new Float32Array(d),S=0;S<T.length;S++)T[S]=Math.sin(-Z/2+S/7)/2+.5;var A=t.projection.scale();return A=600/A*Math.pow(Math.log(A)/Math.log(600),2.5),c()}function b(t,n,e){if(n&&e&&vt.get("showGridPoints")){t.fillStyle="rgba(255, 255, 255, 0.75)";var r=pt.width,a=pt.height,i=e.projection.stream({point:function(n,e){n>=0&&r>n&&e>=0&&a>e&&t.fillRect(Math.round(n),Math.round(e),1,1)}}),o=this.cancel,u=n.grid(),c=n.field(),s=c.valueAt,l=0;!function t(){if(!o.requested){var n=Date.now()+tt/4;l=u.forEach(function(t,e,r){var a=X.scalarize(s(r));return 7e37>a&&(t=X.floorMod(180+t,360)-180,i.point(t,e)),Date.now()>n},l),l===l&&setTimeout(t,nt)}}()}}function w(t,n){for(var e=3;e<t.length;e+=4)0!==t[e]&&(t[e]=n)}function x(t,n,e){if(t&&wt.value()){var r=I.select("#overlay").node().getContext("2d"),a=(bt.value()||{}).overlayGrid;X.clearContext(r),X.clearCanvas(I.select("#scale").node()),n&&("off"!==n&&(e||w(t.overlay.data,a.alpha.single),r.putImageData(t.overlay,0,0)),Tt.submit(b,r,a,Mt.value())),a&&!function(){for(var t=I.select("#scale"),n=t.node(),e=n.getContext("2d"),r=n.width-1,i=a.scale,o=i.colors,u=o.length/4-1,c=0;c<n.width;c++){var s=4*Math.round(c/r*u);e.fillStyle="rgb("+o[s]+","+o[s+1]+","+o[s+2]+")",e.fillRect(c,0,1,n.height)}t.on("mousemove",function(){var n=Math.floor(I.mouse(this)[0]);if(0>n||n>r)return t.attr("title",null);var e=Math.round(n/r*u),o=i.valueFor(e),c="wind"===a.type?"#location-wind-units":"#location-value-units",s=T(c,a).value();t.attr("title",X.formatScalar(o,s)+" "+(s.tooltip||s.label))})}()}}function _(t){if(t)return t.overlayGrid.date();var n=vt.get("date");return"current"===n?null:G.clone(n)}function k(t){var n=_(t),e=I.select("#data-date").classed("local"),r="";return n&&(r=W.print((e?W.localParts:W.parts)(W.date(n)),"{yyyy}-{MM}-{dd} {hh}:{mm}")),I.select("#data-date").text(r+" "+(e?"Local":"UTC")),I.select("#toggle-zone").text(" "+(e?"UTC":"Local")),n}function E(t){var n=k(t),e="",r="";if(t){var a=X.siteLangCode(),i=t.primaryGrid.descriptionHTML(a),o=t.overlayGrid.descriptionHTML(a);e=o.name+o.qualifier,t.primaryGrid!==t.overlayGrid&&(e=(i.qualifier===o.qualifier?i.name:i.name+i.qualifier)+" + "+e),r=t.overlayGrid.sourceHTML||""}I.select("#data-layer").html(e),I.select("#data-center").html(r),K.productChange&&K.productChange(n.getTime(),e,r)}function T(t,n){var e=n.units,r=e.length,a=+(I.select(t).attr("data-index")||0)%r;return{value:function(){return e[a]},next:function(){I.select(t).attr("data-index",a=(a+1)%r)}}}function S(t,n){var e=T("#location-wind-units",n),r=e.value();I.select("#location-wind").text(X.formatVector(t,r)),I.select("#location-wind-units").html(r.label).on("click",function(){e.next(),S(t,n)})}function A(t,n){var e=T("#location-value-units",n),r=e.value();I.select("#location-value").text(X.formatScalar(t,r)),I.select("#location-value-units").html(r.label).on("click",function(){e.next(),A(t,n)})}function N(){I.selectAll(".location").text(""),I.select("#location-close").classed("invisible",!0);var t=vt.get("loc")||[],n=+t[0],e=+t[1];if(n!==n||e!==e)return I.select(".location-mark").remove(),void(K.showLocationDetails&&K.showLocationDetails("","{}"));var r=bt.value(),a=xt.value(),i=Mt.value();if(r&&a&&i){var o,u=r.primaryGrid,c=r.overlayGrid,s={};I.select("#location-coord").text(o=X.formatCoordinates(n,e)),I.select("#location-close").classed("invisible",!1);var l=u.interpolate([n,e]);l[0]<7e37&&(S(l,u),s[u.type]=G.object(u.units.map(function(t){return[t.label,X.formatVector(l,t)]})));var f=c!==u?X.scalarize(c.interpolate([n,e])):7e37;7e37>f&&(A(f,c),s[c.type]=G.object(c.units.map(function(t){return[t.label,X.formatScalar(f,t)]})));var h=I.geo.path().projection(i.projection).pointRadius(7),d=I.select(".location-mark");d.node()||(d=I.select("#annotation").append("path").attr("class","location-mark")),d.datum({type:"Point",coordinates:[n,e]}).attr("d",h),K.showLocationDetails&&K.showLocationDetails(o,JSON.stringify(s))}}function j(t,n){var e=+n[0],r=+n[1],a=xt.value();t&&a&&!a.isInsideBoundary(t[0],t[1])||e===e&&r===r&&vt.save({loc:[e,r]})}function R(){vt.save({loc:null})}function C(t){kt.value()&&kt.submit(!1),t&&X.clearCanvas(I.select("#animation").node())}function q(t,n){vt.on("change",function(e){var r=e.attributes,a=!1;n.forEach(function(t){a|=G.isEqual(G.pick(r,G.keys(t)),t)}),I.select(t).classed("highlighted",a)})}function P(t,n,e){e=e||[n],I.select(t).on("click",function(){I.select(t).classed("disabled")||vt.save(n)}),q(t,e)}function L(t){G.isFunction(window.ga)&&window.ga("send","event","sponsor",t)}function F(){var t=window.devicePixelRatio||1;I.selectAll(".fill-screen").attr("width",pt.width).attr("height",pt.height),I.selectAll(".max-screen").style("width",pt.width+"px").style("height",pt.height+"px").attr("width",pt.width*t).attr("height",pt.height*t).each(function(){this.getContext("2d").scale(t,t)})}function D(){function e(){I.selectAll("a[lang]").attr("href",function(){var t=I.select(this),n=t.attr("data-link");return n?n+window.location.hash:t.attr("href")})}function r(){wt.submit(d,yt.value(),Mt.value())}function a(){xt.submit(y,Mt.value(),bt.value())}function i(){xt.cancel(),Tt.cancel()}function o(){var n=Date.now(),e=t("./gl/glCheck"),r=e.pass?"ok":JSON.stringify(e);if(J.debug("check gl ("+(Date.now()-n)+"ms): "+r),G.isFunction(window.ga)&&window.ga("send","event","gl",r),e.pass){var a=I.select("#fastoverlay").node(),i=t("./gl/fastoverlay")(a,vt,Mt,bt,wt,kt);_t.submit(i)}}function u(){var t=vt.attributes,n=t.surface+"-"+t.level;return"wind"===t.param?G.indexOf(v,n):-1}function h(){return I.select("#settings-wrap").classed("invisible")?I.select("#location-close").classed("invisible")?I.select("#menu").classed("invisible")?I.select("#sponsor").classed("invisible")?void 0:(n.click("sponsor-hide"),!0):(n.click("show-menu"),!0):(n.click("location-close"),!0):(n.click("settings-hide"),!0)}gt.status("Initializing..."),I.select("#sponsor-link").attr("target",X.isEmbeddedInIFrame()&&"tara"!==X.siteInstance()?"_new":null).on("click",G.partial(L,"click")).on("contextmenu",G.partial(L,"right-click")),I.select("#sponsor-hide").on("click",function(){I.select("#sponsor").classed("invisible",!0)}),I.select("#notice-hide").on("click",function(){I.select("#notice").classed("invisible",!0)}),I.select("#settings-show").select(".text-button").on("click",function(){I.select("#settings-wrap").classed("invisible",!1),I.select("#menu").classed("invisible")||n.click("show-menu")}),I.select("#settings-hide").on("click",function(){I.select("#settings-wrap").classed("invisible",!0)}),!function(){var n=I.select("html").attr("lang");I.select("#settings").selectAll("a[lang='"+n+"']").classed("highlighted",!0);var e=t("./lang").best(window.navigator);e!==n&&I.select("#settings-show").select("a[lang='"+e+"']").classed("invisible",!1)}(),F();var p=I.select("#scale-label").node();I.select("#scale").attr("width",Math.round(.95*(I.select("#menu").node().offsetWidth-p.offsetWidth))).attr("height",Math.round(p.offsetHeight/2)),I.select("#show-menu").on("click",function(){if(X.isEmbeddedInIFrame()&&!X.isKioskMode()&&"tara"!==X.siteInstance())window.open("https://earth.nullschool.net/"+window.location.hash,"_blank");else{var t=I.select("#menu").classed("invisible");I.select("#menu").classed("invisible",!t),t&&G.isFunction(window.ga)&&window.ga("send","event","menu","open")}}),"ontouchstart"in document.documentElement?I.select(document).on("touchstart",function(){}):I.select(document.documentElement).classed("no-touch",!0),e(),I.select(window).on("hashchange",function(){J.debug("hashchange"),e(),vt.fetch({trigger:"hashchange"})}),vt.on("change",function(){gt.reset(),St.submit(function(){var t=[],n=[];I.selectAll(".highlighted").each(function(){t.push(this.id)}),I.selectAll(".disabled").each(function(){n.push(this.id)}),K.buttonStateChange&&K.buttonStateChange(JSON.stringify(t),JSON.stringify(n))})});var g=!0;vt.on("change",function(t){if(!G.isFunction(window.ga)||g)return g=!1;var n=t.changedAttributes(),e=G.clone(t.attributes);G.has(n,"projection")&&window.ga("send","event","projection",e.projection),G.has(n,"overlayType")&&window.ga("send","event","overlay",e.overlayType),(G.has(n,"param")||G.has(n,"surface")||G.has(n,"level"))&&window.ga("send","event","layer",[e.param,e.surface,e.level].join("-"))}),yt.listenTo(vt,"change:topology",function(t,n){yt.submit(c,n)}),Mt.listenTo(vt,"change:projection",function(t,n){Mt.submit(s,n)}),bt.listenTo(vt,"change",function(){var t=G.keys(vt.changedAttributes()),n=!1,e=!1;G.intersection(t,["date","param","surface","level","hd"]).length>0&&(n=!0,e=!0);var r=vt.get("overlayType")||"default";if(G.indexOf(t,"overlayType")>=0&&"off"!==r){var a=bt.value()||{},i=a.primaryGrid,o=a.overlayGrid;o?o.type===r||"default"===r&&i===o||(n=!0):n=!0}n&&bt.submit(l,e)}),bt.on("update",function(t){E(t)}),I.select("#toggle-zone").on("click",function(){I.select("#data-date").classed("local",!I.select("#data-date").classed("local")),k(bt.cancel.requested?null:bt.value())}),wt.listenTo(yt,"update",r),wt.listenTo(Mt,"update",r),xt.listenTo(bt,"update",a),xt.listenTo(wt,"render",a),xt.listenTo(wt,"start",i),xt.listenTo(wt,"redraw",i),kt.listenTo(xt,"update",function(t){kt.submit(M,Mt.value(),t,bt.value())}),kt.listenTo(wt,"start",G.partial(C,!0)),kt.listenTo(bt,"submit",G.partial(C,!1)),kt.listenTo(xt,"submit",G.partial(C,!1)),Et.listenTo(xt,"update",function(){Et.submit(x,xt.value(),vt.get("overlayType"),vt.get("animate"))}),Et.listenTo(wt,"start",function(){X.clearCanvas(I.select("#overlay").node()),Et.submit(x,xt.value(),null,null)}),Et.listenTo(vt,"change",function(){var t=G.keys(vt.changedAttributes());G.intersection(t,["overlayType","showGridPoints","animate"]).length>0&&Et.submit(x,xt.value(),vt.get("overlayType"),vt.get("animate"))}),vt.on("change:animate",function(t,n){n?a():C(!0)}),mt.on("click",j),I.select("#location-close").on("click",R),xt.on("update",N),vt.on("change:loc",N),vt.on("change:param",function(t,n){switch(I.selectAll(".ocean-mode").classed("invisible","ocean"!==n),I.selectAll(".wind-mode").classed("invisible","wind"!==n).selectAll(".text-button").classed("disabled","wind"!==n),I.selectAll(".chem-mode").classed("invisible","chem"!==n),I.selectAll(".particulates-mode").classed("invisible","particulates"!==n),n){case"chem":case"particulates":case"wind":I.select("#nav-backward-more").attr("title","-1 Day"),I.select("#nav-backward").attr("title","-3 Hours"),I.select("#nav-forward").attr("title","+3 Hours"),I.select("#nav-forward-more").attr("title","+1 Day");break;case"ocean":I.select("#nav-backward-more").attr("title","-1 Month"),I.select("#nav-backward").attr("title","-5 Days"),I.select("#nav-forward").attr("title","+5 Days"),I.select("#nav-forward-more").attr("title","+1 Month")}}),I.select("#air-mode").on("click",function(){"wind"!==vt.get("param")&&vt.save({param:"wind",surface:"surface",level:"level",overlayType:"default"})}),vt.on("change:param",function(t,n){I.select("#air-mode").classed("highlighted","wind"===n)}),I.select("#ocean-mode").on("click",function(){if("ocean"!==vt.get("param")){var t={param:"ocean",surface:"primary",level:"waves",overlayType:"significant_wave_height"},n=G.clone(vt.attributes);"current"===n.date?vt.save(t):H.all($.productsFor(G.extend(n,t))).spread(function(n){n.date()&&vt.save(G.extend(t,X.dateToConfig(n.date())))}).otherwise(gt.error)}}),vt.on("change:param",function(t,n){I.select("#ocean-mode").classed("highlighted","ocean"===n)}),I.select("#chem-mode").on("click",function(){"chem"!==vt.get("param")&&vt.save({param:"chem",surface:"surface",level:"level",overlayType:"cosc"})}),vt.on("change:param",function(t,n){I.select("#chem-mode").classed("highlighted","chem"===n)}),I.select("#particulates-mode").on("click",function(){"particulates"!==vt.get("param")&&vt.save({param:"particulates",surface:"surface",level:"level",overlayType:"duexttau"})}),vt.on("change:param",function(t,n){I.select("#particulates-mode").classed("highlighted","particulates"===n)}),vt.on("change:overlayType",function(t,n){I.selectAll(".surface").classed("disabled",function(){return"wind"!==vt.get("param")?!0:"surface-level"===this.getAttribute("id")?"wind_power_density"===n:"misery_index"===n})}),vt.on("change:surface",function(t,n){I.select("#wind_power_density").classed("disabled","surface"===n)}),I.select("#nav-backward-more").on("click",G.partial(f,-10)),I.select("#nav-forward-more").on("click",G.partial(f,10)),I.select("#nav-backward").on("click",G.partial(f,-1)),I.select("#nav-forward").on("click",G.partial(f,1)),I.select("#nav-now").on("click",function(){vt.save({date:"current"})}),I.select("#option-show-grid").on("click",function(){vt.save({showGridPoints:!vt.get("showGridPoints")})}),vt.on("change:showGridPoints",function(t,n){I.select("#option-show-grid").classed("highlighted",n)}),I.select("#animate-start").on("click",function(){vt.save({animate:!vt.get("animate")})}),vt.on("change:animate",function(t,n){I.select("#animate-start").classed("highlighted",n)}),I.select("#hd").on("click",function(){vt.save({hd:!vt.get("hd")})}),vt.on("change:hd",function(t,n){I.select("#hd").classed("highlighted",n)}),I.selectAll(".surface").each(function(){var t=this.id,n=t.split("-");P("#"+t,{param:"wind",surface:n[0],level:n[1]})}),P("#animate-currents",{param:"ocean",surface:"surface",level:"currents",animate:!0,overlayType:"default"},[{param:"ocean",surface:"surface",level:"currents"}]),P("#animate-waves",{param:"ocean",surface:"primary",level:"waves",animate:!0,overlayType:"default"},[{param:"ocean",surface:"primary",level:"waves"}]),$.overlayTypes().forEach(function(t){var n={overlayType:t},e=[n];"misery_index"===t?G.extend(n,{surface:"surface",level:"level"}):"currents"===t?e.push({param:"ocean",surface:"surface",level:"currents",overlayType:"default"}):"primary_waves"===t&&e.push({param:"ocean",surface:"primary",level:"waves",overlayType:"default"}),P("#"+t,n,e)}),P("#wind",{param:"wind",overlayType:"default"}),P("#no-overlay",{overlayType:"off"}),G.keys(Q).forEach(function(t){P("#"+t,{projection:t,orientation:""},[{projection:t}])}),I.select(window).on("orientationchange",function(){window.scrollTo(0,0),pt=X.view(),F(),Mt.submit(s,vt.get("projection"));var t=_t.value();t&&t.changeDisplaySize(pt)}),X.isKioskMode()?I.selectAll(".kiosk").classed("invisible",!0):setTimeout(function(){I.select("#menu-ham").transition().style("opacity","0").remove()},15e3),o();var v=["surface-level","isobaric-1000hPa","isobaric-850hPa","isobaric-700hPa","isobaric-500hPa","isobaric-250hPa","isobaric-70hPa","isobaric-10hPa"];I.select("body").on("keydown",function(){var t=I.event,n=V.key(t);if(!(t.defaultPrevented||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)){switch(n){case"Escape":if(!h())return;break;default:return}t.preventDefault()}}),I.select("body").on("keypress",function(){var t=I.event,e=V.key(t);if(!(t.defaultPrevented||t.altKey||t.ctrlKey||t.metaKey)){switch(e){case"e":n.click("show-menu");break;case"I":n.click(v[v.length-1]);break;case"i":n.click(v[u()+1]);break;case"m":n.click(v[u()-1]);break;case"M":n.click(v[0]);break;case"J":n.click("nav-backward-more");break;case"j":n.click("nav-backward");break;case"k":n.click("nav-forward");break;case"K":n.click("nav-forward-more");break;case"n":n.click("nav-now");break;case"p":n.click("animate-start");break;case"g":n.click("option-show-grid");break;case"Z":n.click("hd");break;default:return}t.preventDefault()}})}function O(){vt.fetch()}function z(){return(bt.value()||{}).overlayGrid}var I=t("d3"),U=t("topojson"),H=t("when"),G=t("underscore"),B=t("backbone"),X=t("./micro"),W=t("./utc"),Q=t("./globes"),$=t("./products")(e),V=t("./keyboard"),Y=t("./canvas/twod"),J=e.log,K=e.bridge;J.debug("start...");var Z=Math.PI,tt=150,nt=10,et=6,rt=750,at=10,it=X.isFF()?1.4:1,ot=7,ut=.75,ct=40,st="",lt="",ft=[7e37,7e37,7e37],ht=[7e37,7e37,0],dt=[0,0,0,0],pt=X.view(),gt=function(){var t=I.select("#status"),n=I.select("#progress"),e=st.length,r=X.bindup(K,"showMessage")||function(n){t.text(n)},a=X.bindup(K,"showProgress")||function(t){if(t>=0&&100>t){var r=Math.ceil(t/100*e),a=lt.substr(0,r)+st.substr(0,e-r);return n.classed("invisible",!1).text(a)}return n.classed("invisible",!0).text("")};return{status:function(n){return t.classed("bad")?t:r(n,!1)},error:function(n,e){var a=n.status?n.status+" "+n.message:n.message?n.message:n;switch(n.status){case-1:a="Server Down";break;case 404:a="No Data"}e&&J.error("context",e+""),J.error("error",n),n.stack&&J.error("stack",n.stack),t.classed("bad",!0),r(a,!0)},reset:function(){t.classed("bad",!1),r("",!1)},progress:a}}(),vt=X.buildConfiguration(Q,$.overlayTypes()),mt=i(),yt=a("mesh"),Mt=a("globe"),bt=a("grid"),wt=a("renderer"),xt=a("field"),_t=a("fastoverlay"),kt=a("animator"),Et=a("overlay"),Tt=a("overlayGrid"),St=a("button"),At=0;H(!0).then(D).then(O).otherwise(gt.error),G.extend(n,{url:function(){return window.location.href.toString()},scale:{valueAt:function(t){var n=z(),e={};if(n){var r={},a=n.scale.bounds,i=X.spread(t/100,a[0],a[1]);n.units.forEach(function(t){r[t.label]=X.formatScalar(i,t)}),e[n.type]=r}return JSON.stringify(e)},palette:function(){var t=z();return JSON.stringify(t?r({},t.type,X.toArray(t.scale.colors)):{})}},navToDate:function(t){var n=z(),e=new Date(t);return!n||G.isNaN(e.getUTCFullYear())?0:(e=n.navigateTo(W.parts(e)))?(G.defer(function(){vt.save(X.dateToConfig(e))}),W.date(e).getTime()):0},click:function(t){G.defer(function(){var n=I.select("#"+t).node();return null!==n?n.dispatchEvent(X.newClickEvent()):void 0})},locate:function(t,n){G.defer(u,t,n)},orient:function(t){G.defer(function(){var n=Mt.value();return void 0===t?n.projection.rotate():(n.projection.rotate(t),void vt.save({orientation:n.orientation()}))})},stop:function(){G.defer(function(){vt.save({animate:!1})})},cancelMove:function(){mt.cancelMove()}})}},{"./canvas/twod":25,"./gl/fastoverlay":31,"./gl/glCheck":32,"./globes":34,"./keyboard":39,"./lang":40,"./micro":43,"./products":63,"./utc":65,backbone:1,d3:3,topojson:4,underscore:5,when:23}],31:[function(t,n,e){"use strict";var r=t("d3"),a=t("underscore"),i=t("./glu"),o=t("./../micro"),u=o.view(),c="precision highp float;\nprecision highp sampler2D;\n\nconst float TAU = 6.283185307179586;\nconst float PI = 3.141592653589793;\n",s="\nuniform float u_Detail;\n\nvoid main() {\n    vec2 coord = invert(gl_FragCoord.xy / u_Detail);\n    vec2 st = grid(coord);\n    float v = lookup(st);\n    lowp vec4 color = colorize(v);\n    gl_FragColor = color;\n}\n";n.exports=function(t,n,e,l,f,h){function d(t){var n=c+t.join("")+s,e=E.makeShader(k.FRAGMENT_SHADER,n),r=E.makeProgram([T,e]);E.attribs(r).set(i.unitPlaneAttributes()),j=t,R=r,C=E.uniforms(r,S),k.useProgram(r)}function p(t,n){if(n){var e=n.def;if(t.hash===e.hash)return E.updateTexture2DParams(n.texture,t,e)?{def:a.omit(t,"data"),texture:n.texture}:n;if(t.width===e.width&&t.height===e.height&&t.format===e.format&&t.type===e.type)return E.updateTexture2D(n.texture,t),{def:a.omit(t,"data"),texture:n.texture};k.deleteTexture(n.texture)}var r=E.makeTexture2D(t);return{def:a.omit(t,"data"),texture:r}}function g(t){return Object.keys(t).map(function(n){return S[n]=p(t[n],S[n])})}function v(t){t.forEach(function(t){var n=t.texture;A[N]!==n&&(A[N]=n,k.activeTexture(k.TEXTURE0+N),k.bindTexture(k.TEXTURE_2D,n)),t.unit=N++})}function m(){var t=e.value(),n=(l.value()||{}).overlayGrid||{},r=[t&&t.optimizedProjection(),n.grid&&n.grid(),n.field&&n.field().bilinear,n.scale];return r.map(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.webgl&&t.webgl(E)})}function y(t){var n=Math.round(u.width*t),e=Math.round(u.height*t);(q!==n||P!==e)&&(_.attr("width",n).attr("height",e),k.viewport(0,0,n,e),q=n,P=e)}function M(){k.clear(k.COLOR_BUFFER_BIT),x&&x.clearRect(0,0,q,P)}var b=!0,w=b?i.createCanvas():t,x=b?t.getContext("2d"):void 0,_=r.selectAll([t,w]).style("width",u.width+"px").style("height",u.height+"px"),k=i.getWebGL(w),E=i.attach(k);k.getExtension("OES_texture_float"),k.getExtension("OES_texture_float_linear"),k.disable(k.DEPTH_TEST),k.clearColor(0,0,0,0);var T=E.makeShader(k.VERTEX_SHADER,i.planeVertexShader()),S={},A=a.range(8).map(function(){return null}),N=1,j=[],R=null,C=null,q=-1,P=-1,L={draw:function(){var t=n.get("hd")?1:.5;y(t),M();var e=f.value(),r=(l.value()||{}).overlayGrid,i=n.get("overlayType"),u=n.get("animate"),c=m();if("off"===i||!e||c.some(function(t){return void 0===t}))return!1;var s=a.flatten(c.map(function(t){return t.shaderSource()}));for(o.arraysEq(j,s)||d(s),N=1,c.forEach(function(t){return v(g(t.textures()))});N<A.length;)A[N++]=null;return c.forEach(function(t){return C.set(t.uniforms())}),C.set({u_Detail:t,u_Alpha:(u?r.alpha.animated:r.alpha.single)/255}),k.drawArrays(k.TRIANGLES,0,6),b&&x.drawImage(w,0,0),!0},changeDisplaySize:function(t){_.style("width",t.width+"px").style("height",t.height+"px"),u=t}};return n.on("change:overlayType",L.draw),n.on("change:hd",L.draw),e.on("update",L.draw),l.on("update",L.draw),f.on("redraw",L.draw),f.on("render",L.draw),h.on("update",L.draw),L}},{"./../micro":43,"./glu":33,d3:3,underscore:5}],32:[function(t,n,e){"use strict";var r=t("./../micro"),a=t("./glu");n.exports=function(){var t={pass:!1};try{var n=a.getWebGL(a.createCanvas());if(!n)return t.hasContext=!1,t;var e=a.attach(n);if(t.floatTex=!!n.getExtension("OES_texture_float"),t.floatTexLinear=!!n.getExtension("OES_texture_float_linear"),!t.floatTex)return t;var i=e.makeShader(n.VERTEX_SHADER,a.planeVertexShader()),o=e.makeProgram([i,e.makeShader(n.FRAGMENT_SHADER,"precision highp float;\nprecision highp sampler2D;\n\nconst float WIDTH = 3.0;\n\n                           //     0.5          1.5            2.5         : x coord\n                           //     0.166        0.5            0.833       : normalized x coord\nuniform sampler2D u_Tex0;  // [(0,0,0,1), (10,10,10,  1), (20,20,20,  1)] : LUMINANCE, NEAREST\nuniform sampler2D u_Tex1;  // [(0,0,0,0), (10,10,10,-10), (20,20,20,-20)] : LUMINANCE_ALPHA, LINEAR\n\nvoid main() {\n    vec2 st = (floor(gl_FragCoord.xy) + 0.20) / WIDTH;  // x = 0.2, 1.2, 2.2  =>  x = 0.066, 0.4, 0.733\n    vec4 c0 = texture2D(u_Tex0, st);\n    vec4 c1 = texture2D(u_Tex1, st);\n    gl_FragColor = vec4(c0.r, c1.r, c1.a * -1.0, float(c0.r == 7e37)) / 255.0;\n}\n")]),u=3,c=1,s=e.makeTexture2D({format:n.LUMINANCE,type:n.FLOAT,width:u,height:c,data:new Float32Array([0,10,20])}),l=e.makeTexture2D({format:n.LUMINANCE_ALPHA,type:n.FLOAT,width:u,height:c,data:new Float32Array([0,0,10,-10,20,-20]),TEXTURE_MIN_FILTER:t.floatTexLinear?n.LINEAR:n.NEAREST,TEXTURE_MAG_FILTER:t.floatTexLinear?n.LINEAR:n.NEAREST}),f=e.makeTexture2D({format:n.RGBA,type:n.UNSIGNED_BYTE,width:u,height:c,data:null}),h={a:{texture:s,unit:0},b:{texture:l,unit:1}};n.activeTexture(n.TEXTURE0+h.a.unit),n.bindTexture(n.TEXTURE_2D,s),n.activeTexture(n.TEXTURE0+h.b.unit),n.bindTexture(n.TEXTURE_2D,l),e.makeFramebufferTexture2D(f),n.viewport(0,0,u,c),n.useProgram(o),e.attribs(o).set(a.unitPlaneAttributes()),e.uniforms(o,h).set({u_Tex0:"a",u_Tex1:"b"}),n.drawArrays(n.TRIANGLES,0,6);var d=new Uint8Array(u*c*4);if(n.readPixels(0,0,u,c,n.RGBA,n.UNSIGNED_BYTE,d),r.arraysEq(d,[0,0,0,0,10,7,7,0,20,17,17,0]))t.floatTexLinear=!0;else{if(!r.arraysEq(d,[0,0,0,0,10,10,10,0,20,20,20,0]))return t.floatTexLinear=t.floatTex=!1,t;t.floatTexLinear=!1}if(e.updateTexture2D(s,{format:n.LUMINANCE,type:n.FLOAT,width:u,height:c,data:new Float32Array([7e37,100,200])}),n.activeTexture(n.TEXTURE0+h.a.unit),n.bindTexture(n.TEXTURE_2D,s),n.drawArrays(n.TRIANGLES,0,6),n.readPixels(0,0,u,c,n.RGBA,n.UNSIGNED_BYTE,d),100!==d[4]||200!==d[8])return t.texSubImage2D=!1,t;if(1!==d[3])return t.missingVal=!1,t;var p=e.makeProgram([i,e.makeShader(n.FRAGMENT_SHADER,"precision highp float;\n\nvoid main() {\n    float asin_err = abs(asin(0.894) - 1.1061944) * 100.0;\n    gl_FragColor = vec4(asin_err);\n}\n")]);if(n.useProgram(p),e.attribs(p).set(a.unitPlaneAttributes()),n.drawArrays(n.TRIANGLES,0,6),n.readPixels(0,0,u,c,n.RGBA,n.UNSIGNED_BYTE,d),0!==d[0])return t.asin=d[0],t;t.maxTexSize=+n.getParameter(n.MAX_TEXTURE_SIZE)||-1;var g=n.getShaderPrecisionFormat?n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT):{};if(t.precision=+(g||{}).precision||-1,t.maxTexSize<4096||t.precision<23)return t;t.err=n.getError(),t.pass=!t.err}catch(n){t.err=n.toString()}return t}()},{"./../micro":43,"./glu":33}],33:[function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function a(t){throw new Error(t)}var i=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),o=t("underscore"),u=t("./../micro"),c=t("./../log")();n.exports=function(){function t(){r(this,t)}return i(t,null,[{key:"createCanvas",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=document.createElement("canvas");return e.width=t,e.height=n,e}},{key:"getWebGL",value:function(t,n){var e=void 0;try{e=t.getContext("webgl",n)}catch(t){}if(!e)try{e=t.getContext("experimental-webgl",n)}catch(t){}return e}},{key:"planeVertexShader",value:function(){return"precision highp float;\n\nattribute vec2 a_Position;\nattribute vec2 a_TexCoord;\n\nvarying vec2 v_TexCoord;\n\nvoid main() {\n    gl_Position = vec4(a_Position, 0.0, 1.0);\n    v_TexCoord = a_TexCoord;\n}\n"}},{key:"unitPlaneAttributes",value:function(){return{a_Position:new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),a_TexCoord:new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1])}}},{key:"attach",value:function(t){var n={PACK_ALIGNMENT:1,UNPACK_ALIGNMENT:1,UNPACK_FLIP_Y_WEBGL:!1,UNPACK_PREMULTIPLY_ALPHA_WEBGL:!1,UNPACK_COLORSPACE_CONVERSION_WEBGL:t.BROWSER_DEFAULT_WEBGL},e=Object.keys(n),s={TEXTURE_MIN_FILTER:t.NEAREST,TEXTURE_MAG_FILTER:t.NEAREST,TEXTURE_WRAP_S:t.CLAMP_TO_EDGE,TEXTURE_WRAP_T:t.CLAMP_TO_EDGE},l=Object.keys(s);return new(function(){function f(){r(this,f)}return i(f,[{key:"makeShader",value:function(n,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,i=t.createShader(n);if(t.shaderSource(i,e),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){var o=t.getShaderInfoLog(i);return t.deleteShader(i),r(o),null}return i}},{key:"makeProgram",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,r=t.createProgram();if(n.forEach(function(n){return t.attachShader(r,n)}),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS)){var i=t.getProgramInfoLog(r);return t.deleteProgram(r),e(i),null}return r}},{key:"makeFramebufferTexture2D",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var i=t.checkFramebufferStatus(t.FRAMEBUFFER);return i!==t.FRAMEBUFFER_COMPLETE?(t.deleteFramebuffer(r),e("framebuffer: "+i),null):r}},{key:"uniforms",value:function(n,e){function a(n,r){var a=s[n]||{},i=a.location;switch(a.type){case t.FLOAT:return u.isArrayLike(r)?t.uniform1fv(i,r):t.uniform1f(i,r);
case t.FLOAT_VEC2:return t.uniform2fv(i,r);case t.FLOAT_VEC3:return t.uniform3fv(i,r);case t.FLOAT_VEC4:return t.uniform4fv(i,r);case t.INT:return u.isArrayLike(r)?t.uniform1iv(i,r):t.uniform1i(i,r);case t.INT_VEC2:return t.uniform2iv(i,r);case t.INT_VEC3:return t.uniform3iv(i,r);case t.INT_VEC4:return t.uniform4iv(i,r);case t.SAMPLER_2D:var o=e[r];return o?void t.uniform1i(i,o.unit):void c.warn("uniform '"+n+"' refers to unknown texture '"+r+"'");default:c.warn("uniform '"+n+"' is '"+a.type+"'")}}var s={},l=t.getProgramParameter(n,t.ACTIVE_UNIFORMS);return o.range(l).map(function(e){return t.getActiveUniform(n,e)}).filter(function(t){return!!t}).forEach(function(e){var r=t.getUniformLocation(n,e.name);s[e.name]={name:e.name,type:e.type,size:e.size,location:r}}),new(function(){function t(){r(this,t)}return i(t,[{key:"set",value:function(t){return Object.keys(t).forEach(function(n){return a(n,t[n])}),this}}]),t}())}},{key:"attribs",value:function(n){function e(n,e){var r=a[n]||{},i=r.location;switch(t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.enableVertexAttribArray(i),r.type){case t.FLOAT_VEC2:return t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0);default:c.warn("attribute '"+n+"' is '"+r.type+"'")}}var a={},u=t.getProgramParameter(n,t.ACTIVE_ATTRIBUTES);return o.range(u).map(function(e){return t.getActiveAttrib(n,e)}).filter(function(t){return!!t}).forEach(function(e){var r=t.getAttribLocation(n,e.name);a[e.name]={name:e.name,type:e.type,size:e.size,location:r}}),new(function(){function t(){r(this,t)}return i(t,[{key:"set",value:function(t){return Object.keys(t).forEach(function(n){return e(n,t[n])}),this}}]),t}())}},{key:"makeTexture2D",value:function(r){var a=t.createTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,a);var i=o.extend({},n,s,r),u=i.format,c=i.type,f=i.width,h=i.height,d=i.data;return e.forEach(function(n){return t.pixelStorei(t[n],i[n])}),t.texImage2D(t.TEXTURE_2D,0,u,f,h,0,u,c,d),l.forEach(function(n){return t.texParameteri(t.TEXTURE_2D,t[n],i[n])}),t.bindTexture(t.TEXTURE_2D,null),a}},{key:"updateTexture2D",value:function(r,a){t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,r);var i=o.extend({},n,s,a),u=i.format,c=i.type,f=i.width,h=i.height,d=i.data;return e.forEach(function(n){return t.pixelStorei(t[n],i[n])}),t.texSubImage2D(t.TEXTURE_2D,0,0,0,f,h,u,c,d),l.forEach(function(n){return t.texParameteri(t.TEXTURE_2D,t[n],i[n])}),t.bindTexture(t.TEXTURE_2D,null),r}},{key:"updateTexture2DParams",value:function(n,e,r){for(var a=!1,i=0;i<l.length;i++){var o=l[i],u=s[o],c=e[o]||u,f=r[o]||u;c!==f&&(a||(a=!0,t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,n)),t.texParameteri(t.TEXTURE_2D,t[o],c))}return a&&t.bindTexture(t.TEXTURE_2D,null),a}},{key:"context",get:function(){return t}}]),f}())}}]),t}()},{"./../log":41,"./../micro":43,underscore:5}],34:[function(t,n,e){"use strict";var r=function(){function t(t,n){var e=[],r=!0,a=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done)&&(e.push(o.value),!n||e.length!==n);r=!0);}catch(t){a=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(){function e(){var t=h.floorMod((new Date).getTimezoneOffset()/4,360);return[t,0]}function a(t,n){return f.isFinite(t)||t===1/0||t===-(1/0)?t:n}function i(t,n){var e=t[0],r=t[1],i=Math.max(Math.floor(a(e[0],0)),0),o=Math.max(Math.floor(a(e[1],0)),0),u=Math.min(Math.ceil(a(r[0],n.width)),n.width-1),c=Math.min(Math.ceil(a(r[1],n.height)),n.height-1);return{x:i,y:o,xMax:u,yMax:c,width:u-i+1,height:c-o+1}}function o(t,n,e){var r=l.geo.path().projection(t).bounds({type:"Sphere"}),a=(r[1][0]-r[0][0])/t.scale(),i=(r[1][1]-r[0][1])/t.scale(),o=.9*Math.min(n.width/a,n.height/i);return e||(e=[n.width/2,n.height/2]),t.scale(o).translate(e)}function u(){return{projection:null,newProjection:function(t){throw new Error("method must be overridden")},optimizedProjection:function(){return this.projection},bounds:function(t){return i(l.geo.path().projection(this.projection).bounds({type:"Sphere"}),t)},fit:function(t){return h.isEmbeddedInIFrame()&&"tara"===h.siteInstance()?700:this.newProjection(t).scale()},center:function(t){return[t.width/2,t.height/2]},scaleExtent:function(){return[25,3e3]},orientation:function(t,n){var e=this.projection,r=e.rotate();if(n){var a=f.isString(t)?t.split(","):[],i=+a[0],o=+a[1],u=+a[2],c=this.scaleExtent();return e.rotate(f.isFinite(i)&&f.isFinite(o)?[-i,-o,r[2]]:this.newProjection(n).rotate()),e.scale(f.isFinite(u)?h.clamp(u,c[0],c[1]):this.fit(n)),e.translate(this.center(n)),this}return[(-r[0]).toFixed(2),(-r[1]).toFixed(2),Math.round(e.scale())].join(",")},manipulator:function(t,n){var e=this.projection,r=60/n,a=[e.rotate()[0]/r,-e.rotate()[1]/r],i=e.precision();return e.precision(10*i),{move:function(n,i){if(n){var o=n[0]-t[0]+a[0],u=n[1]-t[1]+a[1];e.rotate([o*r,-u*r,e.rotate()[2]])}e.scale(i)},end:function(){e.precision(i)}}},locate:function(t){return null},defineMask:function(t){return l.geo.path().projection(this.projection).context(t)({type:"Sphere"}),t},backgroundRenderer:function(){return{renderTo:function(t,n){t.fillStyle="#303030",t.beginPath(),n({type:"Sphere"}),t.fill()}}},graticuleRenderer:function(){var t=l.geo.graticule()(),n=l.geo.graticule().minorStep([0,90]).majorStep([0,90])(),e=p.makeStrokeRenderer(t,{strokeStyle:"#505050",lineWidth:1}),r=p.makeStrokeRenderer(n,{strokeStyle:"#808080",lineWidth:1});return{renderTo:function(t,n){e.renderTo(t,n),r.renderTo(t,n)}}},foregroundRenderer:function(){return{renderTo:function(t,n){t.strokeStyle="#000005",t.lineWidth=4,t.beginPath(),n({type:"Sphere"}),t.stroke()}}}}}function c(t,n){var e=f.extend(u(),t);return e.projection=e.newProjection(n),e}var s=n.exports={},l=t("d3"),f=t("underscore"),h=t("./micro"),d=t("./projection/orthographic"),p=t("./canvas/twod.js"),g=Math.PI,v=2*g;s.atlantis=function(t){return c({newProjection:function(t){return o(l.geo.mollweide().rotate([30,-45,90]).precision(.1),t)}},t)},s.azimuthal_equidistant=function(t){return c({newProjection:function(t){return o(l.geo.azimuthalEquidistant().precision(.1).rotate([0,-90]).clipAngle(179.999),t)}},t)},s.conic_equidistant=function(t){return c({newProjection:function(t){return o(l.geo.conicEquidistant().rotate(e()).precision(.1),t,[t.width/2,t.height/2+.065*t.height])},center:function(t){return[t.width/2,t.height/2+.065*t.height]}},t)},s.equirectangular=function(t){return c({newProjection:function(t){return o(l.geo.equirectangular().rotate(e()).precision(.1),t)}},t)},s.orthographic=function(t){return c({newProjection:function(t){return o(l.geo.orthographic().rotate(e()).precision(.1).clipAngle(90),t)},optimizedProjection:function(){return d.fromD3(this.projection)},backgroundRenderer:function(){return{renderTo:function(t,n){var e=n.projection(),a=e.translate(),i=r(a,2),o=i[0],u=i[1],c=e.scale(),s=t.createRadialGradient(o,u,0,o,u,c);s.addColorStop(.69,"#303030"),s.addColorStop(.91,"#202020"),s.addColorStop(.96,"#000005"),t.fillStyle=s,t.fillRect(o-c,u-c,2*c,2*c)}}},foregroundRenderer:function(){return{renderTo:function(t,n){var e=n.projection(),a=e.translate(),i=r(a,2),o=i[0],u=i[1],c=e.scale();t.fillStyle="#000005",t.beginPath(),t.arc(o,u,c-2,0,v,!0),t.arc(o,u,c+4,0,v,!0),t.fill("evenodd")}}},locate:function(t){return[-t[0],-t[1],this.projection.rotate()[2]]}},t)},s.patterson=function(t){return c({newProjection:function(t){return o(l.geo.patterson().precision(.1),t)}},t)},s.stereographic=function(t){return c({newProjection:function(t){return o(l.geo.stereographic().rotate([-43,-20]).precision(1).clipAngle(179.9999).clipExtent([[0,0],[t.width,t.height]]),t)},foregroundRenderer:function(){return{renderTo:function(t,n){}}}},t)},s.waterman=function(t){return c({newProjection:function(t){return o(l.geo.polyhedron.waterman().rotate([20,0]).precision(.1),t)},foregroundRenderer:function(){return{renderTo:function(t,n){var e=t.canvas,r=e.width,a=e.height;t.fillStyle=t.strokeStyle="#000005",t.lineWidth=4,t.beginPath(),n({type:"Sphere"}),t.stroke(),t.moveTo(0,0),t.lineTo(r,0),t.lineTo(r,a),t.lineTo(0,a),t.lineTo(0,0),t.fill("evenodd")}}}},t)},s.winkel3=function(t){return c({newProjection:function(t){return o(l.geo.winkel3().precision(.1),t)}},t)}}()},{"./canvas/twod.js":25,"./micro":43,"./projection/orthographic":64,d3:3,underscore:5}],35:[function(t,n,e){"use strict";var r=t("../micro"),a=Math.PI,i=2*a,o=i/360;n.exports=function(t,n){function e(){return{width:l,height:f}}function a(){return S}function i(t,n){for(var e=n||0;h>e;e++){var r=e%l,a=Math.floor(e/l),i=g+r*d,o=v+a*p;if(t(i,o,e))return e+1}return NaN}function u(t){var n=t[0],e=t[1];if(n===n&&e===e){var a=r.floorMod(n-g,360)/d,i=(e-v)/p,o=Math.round(a),u=Math.round(i);if(u>=0&&f>u&&o>=0&&(l>o||o===l&&S)){var c=u*l+o;return o===l?c-l:c}}return NaN}function c(t){var n=t[0],e=t[1];if(n===n&&e===e){var a=r.floorMod(n-g,360)/d,i=(e-v)/p,o=Math.floor(a),u=Math.floor(i),c=o+1,s=u+1,h=a-o,m=i-u;if(u>=0&&f>s&&o>=0&&(l>c||c===l&&S)){var y=u*l+o,M=y+1,b=y+l,w=b+1;return c===l&&(M-=l,w-=l),[y,M,b,w,h,m]}}return[NaN,NaN,NaN,NaN,NaN,NaN]}function s(){return{shaderSource:function(){return"\nuniform vec2 u_Low;\nuniform vec2 u_Size;\n\nvec2 grid(in vec2 coord) {\n    vec2 tex = (coord - u_Low) / u_Size;\n    float s = tex.s;\n    float t = tex.t;\n\n    if (t < 0.0 || 1.0 < t) discard;  // lat out of bounds, so nothing to draw\n\n    return vec2(fract(s), t);  // UNDONE: fract used here only because lon is circular.\n}\n"},textures:function(){return{}},uniforms:function(){return{u_Low:E,u_Size:T}}}}var l=Math.floor(t.size),f=Math.floor(n.size),h=l*f,d=r.decimalize(t.delta),p=r.decimalize(n.delta),g=r.decimalize(t.start),v=r.decimalize(n.start),m=g+d*(l-1),y=v+p*(f-1),M=(g-d/2)*o,b=(m+d/2)*o,w=b-M,x=(v-p/2)*o,_=(y+p/2)*o,k=_-x,E=[M,x],T=[w,k],S=Math.floor(l*d)>=360;return{dimensions:e,isCylindrical:a,forEach:i,closest:u,closest4:c,webgl:s}}},{"../micro":43}],36:[function(t,n,e){"use strict";function r(t,n){function e(e){var r=t.closest4(e),a=r[0];if(a===a){var i=r[1],o=r[2],u=r[3],c=r[4],s=r[5],l=1-c,f=1-s,h=n[a],d=n[i],p=n[o],g=n[u];if(7e37>h){if(7e37>d&&7e37>p&&7e37>g){var v=l*f,m=c*f,y=l*s,M=c*s;return h*v+d*m+p*y+g*M}if(7e37>g&&7e37>d&&c>=s)return d+l*(h-d)+s*(g-d);if(7e37>p&&7e37>g&&s>c)return p+c*(g-p)+f*(h-p);if(7e37>p&&7e37>d&&f>=c)return h+c*(d-h)+s*(p-h)}else if(7e37>g&&7e37>p&&7e37>d&&c>f)return g+l*(p-g)+f*(d-g)}return 7e37}var r=i.arrayHashCode(n,1e3);return e.webgl=function(e){var a=e.context,i=u.floatTexLinear&&!t.isCylindrical(),c=o(e,t.dimensions()),s=t.dimensions(),l=s.width,f=s.height,h=[l,f];return{shaderSource:function(){return[c.scalarSource(),i?c.shaderSourceTexture2D():c.shaderSourceBilinearWrap()]},textures:function(){return{weather_data:c.scalarTexture(n,{hash:r,TEXTURE_MIN_FILTER:i?a.LINEAR:a.NEAREST,TEXTURE_MAG_FILTER:i?a.LINEAR:a.NEAREST})}},uniforms:function(){var t={u_Data:"weather_data"};return i||(t.u_TextureSize=h),t}}},e}function a(t,n){function e(t,n,e,r,a,i,o,u){var c=e+t*(o-e)+n*(a-e),s=r+t*(u-r)+n*(i-r);return[c,s,Math.sqrt(c*c+s*s)]}function r(r){var a=t.closest4(r),i=2*a[0];if(i===i){var o=2*a[1],u=2*a[2],c=2*a[3],s=a[4],l=a[5],f=1-s,h=1-l,d=n[i],p=n[i+1],g=n[o],v=n[o+1],m=n[u],y=n[u+1],M=n[c],b=n[c+1];if(7e37>p){if(7e37>v&&7e37>y&&7e37>b){var w=f*h,x=s*h,_=f*l,k=s*l,E=d*w+g*x+m*_+M*k,T=p*w+v*x+y*_+b*k;return[E,T,Math.sqrt(E*E+T*T)]}if(7e37>b&&7e37>v&&s>=l)return e(f,l,g,v,M,b,d,p);if(7e37>y&&7e37>b&&l>s)return e(s,h,m,y,d,p,M,b);if(7e37>y&&7e37>v&&h>=s)return e(s,l,d,p,m,y,g,v)}else if(7e37>b&&7e37>y&&7e37>v&&s>h)return e(f,h,M,b,g,v,m,y)}return[7e37,7e37,7e37]}var a=i.arrayHashCode(n,1e3);return r.webgl=function(e){var r=e.context,i=u.floatTexLinear&&!t.isCylindrical(),c=o(e,t.dimensions()),s=t.dimensions(),l=s.width,f=s.height,h=[l,f];return{shaderSource:function(){return[c.vectorSource(),i?c.shaderSourceTexture2D():c.shaderSourceBilinearWrap()]},textures:function(){return{weather_data:c.vectorTexture(n,{hash:a,TEXTURE_MIN_FILTER:i?r.LINEAR:r.NEAREST,TEXTURE_MAG_FILTER:i?r.LINEAR:r.NEAREST})}},uniforms:function(){var t={u_Data:"weather_data"};return i||(t.u_TextureSize=h),t}}},r}var i=t("../micro"),o=t("./lookup"),u=t("../gl/glCheck");n.exports={scalar:r,vector:a}},{"../gl/glCheck":32,"../micro":43,"./lookup":37}],37:[function(t,n,e){"use strict";var r=t("underscore");n.exports=function(t,n){var e=t.context,a=n.width,i=n.height;return{shaderSourceTexture2D:function(){return"\nuniform sampler2D u_Data;\n\nfloat lookup(in vec2 st) {\n    vec4 h = texture2D(u_Data, st);\n    return scalarize(h);\n}\n"},shaderSourceBilinearWrap:function(){return"\nuniform sampler2D u_Data;\nuniform vec2 u_TextureSize;\n\nfloat lookup(in vec2 st) {\n    // adapted from http://www.iquilezles.org/www/articles/hwinterpolation/hwinterpolation.htm\n    vec2 uv = st * u_TextureSize - 0.5;\n    vec2 iuv = floor(uv);\n    vec2 fuv = fract(uv);\n    vec2 ruv = 1.0 - fuv;\n\n    // UNDONE: fract usable below only for cylindrical grids\n    vec4 a = texture2D(u_Data, fract((iuv + vec2(0.5, 0.5)) / u_TextureSize));  // LL\n    vec4 b = texture2D(u_Data, fract((iuv + vec2(1.5, 0.5)) / u_TextureSize));  // LR\n    vec4 c = texture2D(u_Data, fract((iuv + vec2(0.5, 1.5)) / u_TextureSize));  // UL\n    vec4 d = texture2D(u_Data, fract((iuv + vec2(1.5, 1.5)) / u_TextureSize));  // UR\n    vec4 h;\n\n    int tag = int(dot(step(7e37, vec4(a.x, b.x, c.x, d.x)), vec4(1.0, 2.0, 4.0, 8.0)));\n    if (tag == 0) {\n        // a b c d\n        h = mix(mix(a, b, fuv.x), mix(c, d, fuv.x), fuv.y);\n    } else if (tag == 1 && ruv.y < fuv.x) {\n        // d b c\n        h = d + ruv.x * (c - d) + ruv.y * (b - d);\n    } else if (tag == 2 && fuv.x < fuv.y) {\n        // c a d\n        h = c + fuv.x * (d - c) + ruv.y * (a - c);\n    } else if (tag == 4 && fuv.x >= fuv.y) {\n        // b a d\n        h = b + ruv.x * (a - b) + fuv.y * (d - b);\n    } else if (tag == 8 && fuv.x <= ruv.y) {\n        // a b c\n        h = a + fuv.x * (b - a) + fuv.y * (c - a);\n    } else {\n        // not enough points to interpolate\n        h = vec4(7e37);\n    }\n\n    return scalarize(h);\n}\n"},scalarSource:function(){return"\nfloat scalarize(in vec4 h) {\n    return h.x;\n}\n"},vectorSource:function(){return"\nfloat scalarize(in vec4 h) {\n    return length(h.xw);  // UNDONE: sqrt(7e37^2) ok?\n}\n"},scalarTexture:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.extend({format:e.LUMINANCE,type:e.FLOAT,width:a,height:i,data:t},n)},vectorTexture:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.extend({format:e.LUMINANCE_ALPHA,type:e.FLOAT,width:a,height:i,data:t},n)}}}},{underscore:5}],38:[function(t,n,e){"use strict";function r(t,n){function e(e){var r=t.closest(e);return r===r?n[r]:7e37}var r=i.arrayHashCode(n,1e3);return e.webgl=function(e){var a=e.context,i=o(e,t.dimensions());return{shaderSource:function(){return[i.scalarSource(),i.shaderSourceTexture2D()]},textures:function(){return{weather_data:i.scalarTexture(n,{hash:r,TEXTURE_MIN_FILTER:a.NEAREST,TEXTURE_MAG_FILTER:a.NEAREST})}},uniforms:function(){return{u_Data:"weather_data"}}}},e}function a(t,n){function e(e){var r=2*t.closest(e);if(r===r){var a=n[r],i=n[r+1];if(7e37>a&&7e37>i)return[a,i,Math.sqrt(a*a+i*i)]}return[7e37,7e37,7e37]}var r=i.arrayHashCode(n,1e3);return e.webgl=function(e){var a=e.context,i=o(e,t.dimensions());return{shaderSource:function(){return[i.vectorSource(),i.shaderSourceTexture2D()]},textures:function(){return{weather_data:i.vectorTexture(n,{hash:r,TEXTURE_MIN_FILTER:a.NEAREST,TEXTURE_MAG_FILTER:a.NEAREST})}},uniforms:function(){return{u_Data:"weather_data"}}}},e}var i=t("../micro"),o=t("./lookup");n.exports={scalar:r,vector:a}},{"../micro":43,"./lookup":37}],39:[function(t,n,e){"use strict";function r(t,n,e,r){if(n){switch(n){case"Esc":return"Escape"}return n}switch(e){case 27:return"Escape"}return"keypress"===t&&r?r:"NYI"}n.exports={key:function t(n){var e=n.type,t=n.key,a=+n.which,i=String.fromCharCode(a);return r(e,t,a,i)}}},{}],40:[function(t,n,e){"use strict";var r=n.exports={};r.preferred=function(t){return t.languages||[t.language||t.userLanguage||"en"]},r.parse=function(t){for(var n={language:"",script:"",region:""},e=(t||"").toLowerCase().split("-"),r=0;r<e.length;r++){var a=e[r];if(1===a.length)break;0===r?n.language=a:/^[a-z]{4}$/.test(a)?n.script=a.substring(0,1).toUpperCase()+a.substring(1):/^([a-z]{2}|\d{3})$/.test(a)&&(n.region=a.toUpperCase())}return n},r.match=function(t){switch(t.language){case"en":return"en";case"cs":return"cs";case"fr":return"fr";case"ja":return"ja";case"pt":return"pt";case"ru":return"ru";case"zh":switch(t.script){case"Hant":return"zh-TW";case"Hans":return"zh-CN"}switch(t.region){case"HK":case"MO":case"TW":return"zh-TW";case"SG":case"CN":return"zh-CN"}}return""},r.best=function(t){for(var n=r.preferred(t),e=0;e<n.length;e++){var a=r.parse(n[e]),i=r.match(a);if(i)return i}return""}},{}],41:[function(t,n,e){(function(t){"use strict";n.exports=function(n){function e(t,n){return"function"==typeof n?n.bind(t):function(){}}return n=n||t.console||{},{debug:e(n,n.log),info:e(n,n.info),warn:e(n,n.warn),error:e(n,n.error),time:e(n,n.time),timeEnd:e(n,n.timeEnd)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],42:[function(t,n,e){(function(n){"use strict";!function(){window.addEventListener("touchmove",function(){});var e=t("underscore"),r=t("d3");t("./d3-geo-projection")(r),t("./d3-geo-polyhedron")(r);var a=t("./micro"),i=t("./blacklist"),o=n.earth=t("./earth");return n.main=function(n){n=n||{};var r=t("./log")(n.console),i={log:r,bridge:n};a.isDevMode()&&r.debug("dev mode enabled"),e.defer(o,i)},a.isEmbeddedInIFrame()&&e.isFunction(window.ga)&&window.ga("send","event","iframe",document.referrer.split("/")[2]||document.referrer),a.isEmbeddedInIFrame()&&i.contains(document.referrer)?i.deny():void(a.isAppMode()?r.select("#details").classed("invisible",!0):n.main())}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./blacklist":24,"./d3-geo-polyhedron":27,"./d3-geo-projection":28,"./earth":30,"./log":41,"./micro":43,d3:3,underscore:5}],43:[function(t,n,e){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function e(){return o.isMobile()?"/data/earth-topo-mobile.json?v3":"/data/earth-topo.json?v3"}function a(t,n,e,r){return e?e.status?n.reject({status:e.status,message:e.statusText,resource:t,error:e}):n.reject({status:-1,message:"Cannot load resource: "+t+": "+e,resource:t,error:e}):n.resolve(r)}function i(t,n){for(var e=new Int32Array([t.byteLength]),r=Math.max(t.length/n,1),a=0;a<t.length;a+=r)e[0]=31*e[0]+t[Math.floor(a)];return e[0]}var o=n.exports={},u=t("d3"),c=t("underscore"),s=t("backbone"),l=t("when"),f=t("./decoder"),h=t("./utc"),d=Math.PI,p=2*d,g=p/360,v=36e-6,m="current/wind/surface/level/orthographic";o.MISSING=7e37,o.isDevMode=function(){return 8081===+window.location.port},o.siteLangCode=function(){return u.select("html").attr("lang")||"en"},o.siteInstance=function(){var t=window.location.hostname.match(/(.*)\.nullschool\.net$/)||[],n=t[1]||"earth";return"earth"===n?"":n},o.isTruthy=function(t){return!!t},o.isValue=function(t){return null!==t&&void 0!==t},o.coalesce=function(t,n){return o.isValue(t)?t:n},o.decimalize=function(t){return c.isString(t)&&t.indexOf("/")>=0&&(t=t.split("/")),o.isArrayLike(t)&&2===t.length?t[0]/t[1]:+t},o.scalarize=function(t){return o.isArrayLike(t)?t[2]:t},o.floorMod=function(t,n){var e=t-n*Math.floor(t/n);return e===n?0:e},o.distance=function(t,n){var e=n[0]-t[0],r=n[1]-t[1];return Math.sqrt(e*e+r*r)},o.clamp=function(t,n,e){return Math.max(n,Math.min(t,e))},o.proportion=function(t,n,e){return(o.clamp(t,n,e)-n)/(e-n)},o.spread=function(t,n,e){return t*(e-n)+n},o.capitalize=function(t){return 0===t.length?t:t.charAt(0).toUpperCase()+t.substr(1)},o.isFF=function(){return/firefox/i.test(navigator.userAgent)},o.isMobile=function(){return/android|blackberry|iemobile|ipad|iphone|ipod|opera mini|webos/i.test(navigator.userAgent)},o.isEmbeddedInIFrame=function(){return self!=top},o.bindup=function(t,n){return o.isValue(t)&&t[n]?t[n].bind(t):null},o.view=function(){var t=window,n=document&&document.documentElement,e=document&&document.getElementsByTagName("body")[0],r=t.innerWidth||n.clientWidth||e.clientWidth,a=t.innerHeight||n.clientHeight||e.clientHeight;return{width:Math.ceil(r),height:Math.ceil(a)}},o.removeChildren=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},o.newClickEvent=function(){try{return new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0})}catch(n){var t=document.createEvent("MouseEvents");return t.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),t}},o.clearContext=function(t){var n=t.canvas;t.clearRect(0,0,n.width,n.height)},o.clearCanvas=function(t){var n=t.getContext("2d");n.clearRect(0,0,t.width,t.height)},o.windIntensityColorScale=function(t,n){for(var e=[],r=85;255>=r;r+=t)e.push("rgb("+r+","+r+","+r+")");return e.indexFor=function(t){return Math.floor(Math.min(t,n)/n*(e.length-1))},e},o.formatCoordinates=function(t,n){return Math.abs(n).toFixed(2)+" "+(n>=0?"N":"S")+", "+Math.abs(t).toFixed(2)+" "+(t>=0?"E":"W")},o.formatScalar=function(t,n){return n.conversion(t).toFixed(n.precision)},o.formatVector=function(t,n){var e=Math.atan2(-t[0],-t[1])/p*360,r=5*Math.round((e+360)%360/5);return r.toFixed(0)+" @ "+o.formatScalar(t[2],n)},o.loadJson=function(t){var n=l.defer();return u.json(t,a.bind(null,t,n)),n.promise},o.loadJsonOnce=c.memoize(o.loadJson),o.loadEpak=function(t){var n=l.defer();return u.xhr(t).responseType("arraybuffer").response(function(t){return f.decodeEpak(t.response)}).get(a.bind(null,t,n)),n.promise},o.distortion=function(t,n,e,r,a){var i=0>n?v:-v,o=0>e?v:-v,u=t([n+i,e]),c=t([n,e+o]),s=Math.cos(e*g),l=i*s;return[(u[0]-r)/l,(u[1]-a)/l,(c[0]-r)/o,(c[1]-a)/o]},o.newAgent=function(t,n){function e(){return function t(){return t.requested=!0,o}}function r(t,n){function e(n){return t.requested?null:c.isFunction(s)?s.apply(o,n):s}function r(n){t.requested||(a=n,o.trigger("update",n,o))}function i(n){t.requested||o.trigger("reject",n,o)}function u(t){o.trigger("fail",t,o)}try{var s=n[0];l.all(c.rest(n)).then(e).then(r,i).catch(u).done(),o.trigger("submit",o)}catch(t){u(t)}}var a=n,i=c.debounce(r,0),o={value:function(){return a},cancel:e(),submit:function(t,n,r,a){return this.cancel(),i(this.cancel=e(),arguments),this},toString:function(){return t}};return c.extend(o,s.Events)},o.parse=function(t,n,r,a){var i,u={},s=/^(current|(\d{4})\/(\d{1,2})\/(\d{1,2})\/(\d{3,4})Z)\/(\w+)\/(\w+)\/(\w+)([\/].+)?/.exec(t);if(s){var l="current"===s[1]?"current":{year:+s[2],month:+s[3],day:+s[4]};if("current"!==l){var f=(3===s[5].length?"0":"")+s[5];l.hour=+f.substr(0,2),l.minute=+f.substr(2)}u={date:l,param:s[6],surface:s[7],level:s[8],projection:"orthographic",orientation:"",topology:e(),overlayType:"default",showGridPoints:!1,animate:!0,loc:null,argoFloat:null,hd:a.hd||!1},o.coalesce(s[9],"").split("/").forEach(function(t){if(i=/^(\w+)(=([\d\-.,]*))?$/.exec(t)){if(c.has(n,i[1]))u.projection=i[1],u.orientation=o.coalesce(i[3],"");else if("loc"===i[1]){var e=c.isString(i[3])?i[3].split(","):[],a=+e[0],s=+e[1];a===a&&s===s&&(u.loc=[a,s])}}else if(i=/^overlay=(\w+)$/.exec(t))(r.has(i[1])||"default"===i[1])&&(u.overlayType=i[1]);else if(i=/^grid=(\w+)$/.exec(t))"on"===i[1]&&(u.showGridPoints=!0);else if(i=/^anim=(\w+)$/.exec(t))"off"===i[1]&&(u.animate=!1);else if(i=/^argo=(\w+)$/.exec(t))switch(i[1]){case"planned":case"recent":case"active":case"dead":u.argoFloat=i[1]}})}return u};var y=s.Model.extend({id:0,_ignoreNextHashChangeEvent:!1,_projectionNames:null,_overlayTypes:null,toHash:function(){var t=this.attributes,n="current"===t.date?"current":h.print(t.date,"{yyyy}/{MM}/{dd}/{hh}{mm}Z"),e=[t.projection,t.orientation].filter(o.isTruthy).join("="),r=t.loc?"loc="+t.loc.map(function(t){return t.toFixed(3)}).join(","):"",a=o.isValue(t.overlayType)&&"default"!==t.overlayType?"overlay="+t.overlayType:"",i=t.showGridPoints?"grid=on":"",u=t.animate?"":"anim=off",c=t.argoFloat?"argo="+t.argoFloat:"";return[n,t.param,t.surface,t.level,u,a,i,c,e,r].filter(o.isTruthy).join("/")},sync:function(t,n,e){switch(t){case"read":if("hashchange"===e.trigger&&n._ignoreNextHashChangeEvent)return void(n._ignoreNextHashChangeEvent=!1);n.set(o.parse(window.location.hash.substr(1)||m,n._projectionNames,n._overlayTypes,n.attributes));break;case"update":case"create":var r="#"+n.toHash();window.location.hash!==r&&(n._ignoreNextHashChangeEvent=!0,window.location.hash=r)}}});o.buildConfiguration=function(t,n){var e=new y;return e._projectionNames=t,e._overlayTypes=n,e},o.parseQueryString=function(t){return c.object(t.split(/[?&]/).filter(o.isTruthy).map(function(t){return t.split("=").map(decodeURIComponent).concat([null])}))},o.dateToConfig=function(t){return{date:h.normalize(t)}},o.isAppMode=function(){return c.has(o.parseQueryString(window.location.search),"app")},o.isKioskMode=function(){return c.has(o.parseQueryString(window.location.search),"kiosk")},o.isFixedMode=function(){return c.has(o.parseQueryString(window.location.search),"fixed")},o.arraysEq=function(t,n){for(var e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return t.length===n.length},o.merge=function(t,n){for(var e=new Float32Array(2*t.length),r=0;r<t.length;r++){var a=2*r;e[a]=t[r],e[a+1]=n[r]}return e},o.toArray=function(t){return Array.prototype.slice.call(t)},o.arrayHashCode=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,e=void 0;switch(t.byteLength%4){case 0:e=new Int32Array(t.buffer);break;case 2:e=new Int16Array(t.buffer);break;default:e=new Int8Array(t.buffer)}return i(e,n)},o.isArrayLike=function(t){return Array.isArray(t)||"object"===("undefined"==typeof t?"undefined":r(t))&&!!t&&"length"in t}}()},{"./decoder":29,"./utc":65,backbone:1,d3:3,underscore:5,when:23}],44:[function(t,n,e){"use strict";n.exports=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,e=t("./palette"),r=[0,5e3],a=[[0,[5,48,97]],[500,[33,102,172]],[1e3,[67,147,195]],[1500,[146,197,222]],[2e3,[209,229,240]],[2500,[247,247,247]],[3e3,[253,219,199]],[3500,[244,165,130]],[4e3,[214,96,77]],[4500,[178,24,43]],[5e3,[103,0,31]]];return e.buildScaleFromSegments(r,a,n)}},{"./palette":50}],45:[function(t,n,e){"use strict";n.exports=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,e=t("./palette"),r=[3578e-7,377e-6],a=[{color:[0,0,0],mode:"lch",p:r[0]},{color:[100,0,0],mode:"lch",p:365e-6},{color:[164,36,0],mode:"lch",p:3675e-7},{color:[255,220,140],mode:"lch",p:371e-6},{color:[255,255,255],mode:"lch",p:r[1]}],i=e.scalesFrom(a);return i=e.smooth(i,2,[37e-5,372e-6]),e.buildScaleFromChromaScales(r,i,n)}},{"./palette":50}],46:[function(t,n,e){"use strict";n.exports=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=t("./palette"),a=[320+n,430+n],i=[{color:[0,0,0],mode:"lch",p:a[0]},{color:[100,0,0],mode:"lch",p:360+n},{color:[164,36,0],mode:"lch",p:365+n},{color:[255,220,140],mode:"lch",p:380+n},{color:[255,255,255],mode:"lch",p:410+n},{color:[0,210,255],mode:"lch",p:a[1]}],o=i[3].p,u=i[4].p,c=i[1].p,s=r.scalesFrom(i);return s=r.smooth(s,0,[c-2,c+2]),s=r.smooth(s,3,[o-2,o+2]),s=r.smooth(s,5,[u-2,u+2]),r.buildScaleFromChromaScales(a,s,e)}},{"./palette":50}],47:[function(t,n,e){"use strict";n.exports=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,e=t("./palette"),r=[40,2500],a=[{color:[0,38,40],mode:"lab",p:r[0]},{color:[255,255,224],mode:"lch",p:400},{color:[0,0,154],mode:"lab",p:1800},{color:[0,0,0],mode:"lab",p:r[1]}],i=e.scalesFrom(a);return i=e.smooth(i,0,[360,440]),i=e.smooth(i,2,[1700,1900]),e.buildScaleFromChromaScales(r,i,n)}},{"./palette":50}],48:[function(t,n,e){"use strict";n.exports=function(){var n=t("./palette"),e=t("./kindlmann"),r=[1e-4,3];return n.buildScale(r,e,Math.log,Math.exp)}},{"./kindlmann":49,"./palette":50}],49:[function(t,n,e){"use strict";n.exports=function(t){for(var n=new Uint8Array(t.length/3*4),e=0,r=0;e<t.length;e+=3,r+=4)n[r]=t[e],n[r+1]=t[e+1],n[r+2]=t[e+2],n[r+3]=255;return n}([4,4,4,10,3,8,13,4,11,16,5,14,18,5,16,21,6,18,22,7,19,24,8,21,26,8,22,27,9,24,28,10,25,30,11,26,31,12,27,32,12,28,33,13,29,35,14,31,36,14,32,37,15,32,38,15,33,39,16,34,40,17,35,41,17,36,42,18,38,43,19,38,44,19,39,46,20,41,46,20,45,46,21,50,45,21,55,45,21,60,45,22,64,45,23,67,45,23,71,45,24,75,45,24,77,45,25,81,45,25,84,44,26,87,44,27,90,45,27,92,45,28,95,44,29,98,44,29,100,44,30,103,44,31,106,44,31,109,44,32,110,44,33,113,44,34,116,43,34,118,42,35,121,40,38,120,38,40,119,36,42,120,34,44,120,33,46,120,32,47,120,31,49,121,30,50,122,30,51,123,29,52,123,29,53,125,28,55,125,28,56,126,27,57,127,28,58,128,28,59,129,27,60,129,27,61,131,27,62,132,27,63,133,28,64,134,27,65,135,27,66,136,27,68,137,27,69,138,25,71,136,22,73,134,21,74,133,20,76,131,17,78,129,16,79,128,15,81,126,14,82,125,10,84,123,10,85,122,9,87,120,8,88,119,7,89,118,6,91,117,4,92,115,4,94,114,4,95,114,3,96,112,1,98,111,1,99,110,0,100,109,0,101,108,0,103,107,0,104,106,0,105,105,0,107,104,0,108,101,0,110,100,0,111,99,0,112,98,0,114,96,0,115,95,0,116,93,0,118,92,0,119,90,0,120,89,0,121,88,0,123,86,0,124,85,0,125,83,0,127,82,0,128,80,0,129,79,0,131,77,0,132,75,0,133,73,0,134,72,0,136,70,0,137,68,0,138,66,0,139,65,0,141,64,0,142,63,0,143,61,0,145,60,0,146,60,0,147,58,0,149,57,0,150,56,0,151,55,0,153,53,0,154,52,0,155,51,0,157,50,0,158,48,0,159,47,0,160,45,0,162,44,0,163,42,0,164,41,0,165,39,0,167,36,0,168,34,0,169,31,0,170,23,0,169,8,9,170,0,20,171,0,29,172,0,35,173,0,40,174,0,45,175,0,48,176,0,52,177,0,55,178,0,59,179,0,61,180,0,64,181,0,66,182,0,68,183,0,71,184,0,73,185,0,76,186,0,78,187,0,79,188,0,81,189,0,83,190,0,85,191,0,87,192,0,92,193,0,99,193,0,106,193,0,114,193,0,119,194,0,125,194,0,130,194,0,135,195,0,140,195,0,145,195,0,149,196,0,153,196,0,157,197,0,161,197,0,165,197,0,169,198,0,172,198,0,176,199,0,180,199,0,184,199,0,186,200,0,190,201,0,193,201,0,197,201,0,200,202,0,201,201,24,203,202,51,206,202,65,207,203,77,209,203,87,212,203,95,213,204,103,215,205,109,218,205,116,219,206,121,221,207,127,223,207,132,226,207,138,227,208,143,229,209,147,231,209,151,232,210,155,235,211,159,237,211,164,238,212,168,240,212,172,243,213,175,243,214,179,245,214,183,248,215,186,248,216,189,248,218,193,247,219,195,247,220,198,247,222,201,248,223,204,247,224,206,247,226,209,247,227,211,247,229,214,247,230,216,247,231,218,247,232,220,248,234,224,247,235,225,247,236,229,247,238,231,247,239,232,248,240,235,248,242,237,247,243,239,248,244,241,248,246,244,248,247,246,248,248,248,249,249,249,251,251,251,252,252,252,253,253,253,254,254,254,255,255,255])},{}],50:[function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}();!function(){function e(t,n){var e=t[0],r=t[1],a=t[2],i=n[0]-e,o=n[1]-r,u=n[2]-a;return function(t,n){return[Math.floor(e+t*i),Math.floor(r+t*o),Math.floor(a+t*u),n]}}var i=n.exports={},o=Math.PI,u=2*o,c=t("../micro"),s=t("chroma-js");i.sinebowColor=function(t,n){var e=t*u*5/6;e*=.75;var r=Math.sin(e),a=Math.cos(e),i=Math.floor(255*Math.max(0,-a)),o=Math.floor(255*Math.max(r,0)),c=Math.floor(255*Math.max(a,0,-r));return[i,o,c,n]};var l=.45,f=e(i.sinebowColor(1,0),[255,255,255]);i.extendedSinebowColor=function(t,n){
return l>=t?i.sinebowColor(t/l,n):f((t-l)/(1-l),n)},i.segmentedColorScale=function(t){for(var n=[],r=[],a=[],i=0;i<t.length-1;i++)n.push(t[i+1][0]),r.push(e(t[i][1],t[i+1][1])),a.push([t[i][0],t[i+1][0]]);return function(t,e){var i=void 0;for(i=0;i<n.length-1&&!(t<=n[i]);i++);var o=a[i];return r[i](c.proportion(t,o[0],o[1]),e)}},i.scalesFrom=function(t){for(var n=[],e=0;e<t.length-1;e++){var r=t[e],a=t[e+1];n.push(s.scale([s(r.color),s(a.color)]).domain([r.p,a.p]).mode(r.mode))}return n},i.smooth=function(t,n,e){var r=t[n],a=t[n+1],i=r.domain()[0],o=a.domain()[1],u=r.domain()[1],c=e[0],l=e[1],f=s.scale([r(i),r(c)]).domain([i,c]).mode(r.mode()),h=s.scale(s.bezier([r(c),r(u),a(l)])).domain([c,l]).mode(r.mode()),d=s.scale([a(l),a(o)]).domain([l,o]).mode(a.mode());return[].concat(t.slice(0,n),[f,h,d],t.slice(n+2))},i.fillRange=function(t,n,e,r){for(var a=n[0],i=n[1],o=(i-a)/(t.length/4-1),u=e[0],s=e[1],l=Math.round((u-a)/o),f=Math.round((s-a)/o),h=l;f+1>h;h++){var d=r(a+h*o),p=4*h;t[p]=d[0],t[p+1]=d[1],t[p+2]=d[2],t[p+3]=c.coalesce(d[3],255)}},i.quantize=function(t,n,e){var r=new Uint8Array(4*e);return n.forEach(function(n){i.fillRange(r,t,n.domain(),function(t){return n(t).rgba().map(Math.round)})}),r},i.buildScaleFromChromaScales=function(t,n,e){var r=i.quantize(t,n,e);return i.buildScale(t,r)},i.buildScaleFromSegments=function(t,n,e){var r=i.segmentedColorScale(n),a=new Uint8Array(4*e);return i.fillRange(a,t,t,r),i.buildScale(t,a)},i.buildScale=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){return t},o=e(t[0]),u=e(t[1]),s=n.length/4-1,l=s/(u-o),f=c.arrayHashCode(n,1e3),h=(u-o)/(2*s),d=o-h,p=u+h,g=[d,p-d];return new(function(){function u(){r(this,u)}return a(u,[{key:"indexOf",value:function(t){var n=Math.round((e(t)-o)*l);return c.clamp(n,0,s)}},{key:"valueFor",value:function(t){return i(t/l+o)}},{key:"rgba",value:function(t){var e=4*this.indexOf(t);return[n[e],n[e+1],n[e+2],n[e+3]]}},{key:"webgl",value:function(t){var r=t.context;return{shaderSource:function(){var t=e===Math.log?"\nfloat fmap(in float v) {\n    return log(v);\n}\n":"\nfloat fmap(in float v) {\n    return v;\n}\n";return[t,"\nuniform vec2 u_Range;  // [min, size]\nuniform lowp sampler2D u_Palette;\nuniform lowp float u_Alpha;\n\nlowp vec4 colorize(in float v) {\n    vec2 st = vec2((fmap(v) - u_Range.x) / u_Range.y, 0.5);\n    lowp vec4 color = texture2D(u_Palette, st);\n    lowp float alpha = (1.0 - step(7e37, v)) * u_Alpha;\n    return vec4(color.rgb * alpha, alpha);  // premultiply alpha\n}\n"]},textures:function(){return{color_scale:{format:r.RGBA,type:r.UNSIGNED_BYTE,width:n.length/4,height:1,data:n,hash:f}}},uniforms:function(){return{u_Range:g,u_Palette:"color_scale",u_Alpha:1}}}}},{key:"colors",get:function(){return n}},{key:"bounds",get:function(){return t}}]),u}())}}()},{"../micro":43,"chroma-js":2}],51:[function(t,n,e){"use strict";n.exports=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,e=t("./palette"),r=t("chroma-js"),a=[0,150],i=[{color:r("#719aa9").darker(30),mode:"lch",p:a[0]},{color:"aliceblue",mode:"lch",p:2},{color:r("navy").brighter(10),mode:"lch",p:15},{color:"gold",mode:"lch",p:100},{color:"white",mode:"lch",p:a[1]}],o=e.scalesFrom(i);return o=e.smooth(o,0,[1,3]),o=e.smooth(o,2,[13,17]),e.buildScaleFromChromaScales(a,o,n)}},{"./palette":50,"chroma-js":2}],52:[function(t,n,e){"use strict";n.exports=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400,e=t("./palette"),r=[1e-13,8.88e-7],a=r.map(Math.log),i=[{color:[134,134,107],mode:"lch",p:a[0]},{color:[144,144,117],mode:"lch",p:Math.log(1e-12)},{color:[255,255,224],mode:"lch",p:Math.log(7e-11)},{color:[0,0,128],mode:"lab",p:Math.log(1.9e-7)},{color:[23,20,18],mode:"lab",p:a[1]}],o=e.scalesFrom(i);o=e.smooth(o,1,[Math.log(5e-11),Math.log(9e-11)]),o=e.smooth(o,3,[Math.log(1e-7),Math.log(3e-7)]);var u=e.quantize(a,o,n);return e.buildScale(r,u,Math.log,Math.exp)}},{"./palette":50}],53:[function(t,n,e){"use strict";n.exports=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,e=t("./palette"),r=t("chroma-js"),a=[.002,2.5],i=a.map(Math.log),o=r.scale(r.cubehelix()).domain(i),u=e.quantize(i,[o],n);return e.buildScale(a,u,Math.log,Math.exp)}},{"./palette":50,"chroma-js":2}],54:[function(t,n,e){"use strict";n.exports=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,e=t("./palette"),r=[193,328],a=[[193,[37,4,42]],[206,[41,10,130]],[219,[81,40,40]],[233.15,[192,37,149]],[255.372,[70,215,215]],[273.15,[21,84,187]],[275.15,[24,132,14]],[291,[247,251,59]],[298,[235,167,21]],[311,[230,71,39]],[328,[88,27,67]]];return e.buildScaleFromSegments(r,a,n)}},{"./palette":50}],55:[function(t,n,e){"use strict";n.exports=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,e=t("./palette"),r=[0,100],a=new Uint8Array(4*n);return e.fillRange(a,[0,1],[0,1],e.extendedSinebowColor),e.buildScale(r,a)}},{"./palette":50}],56:[function(t,n,e){"use strict";var r=t("../micro"),a=t("../utc"),i=t("../grid/rectangular"),o=t("../interpolate/nearest"),u=t("../interpolate/bilinear"),c=t("./util"),s=t("./strings");n.exports=function(t){Array.isArray(t)&&(t=c.munge(t,["u","v"],["time","level","lat","lon"]));var n=t,e=n.header,l=e.variables,f=l.U||l.u||l["u-component_of_wind_isobaric"]||l["u-component_of_wind_height_above_ground"],h=l.V||l.v||l["v-component_of_wind_isobaric"]||l["v-component_of_wind_height_above_ground"],d=l[f.dimensions[0]],p=l[f.dimensions[2]],g=l[f.dimensions[3]],v=r.merge(n.blocks[f.data.block],n.blocks[h.data.block]),m=i(g.sequence,p.sequence),y=u.vector(m,v);return{sourceHTML:s.gfs,date:function(){return a.parts(d.data[0])},grid:function(){return m},field:function(){return{valueAt:function(t){var n=2*t,e=v[n],r=v[n+1];return[e,r,Math.sqrt(e*e+r*r)]},nearest:o.vector(m,v),bilinear:u.vector(m,v)}},interpolate:function(t){return y(t)}}}},{"../grid/rectangular":35,"../interpolate/bilinear":36,"../interpolate/nearest":38,"../micro":43,"../utc":65,"./strings":60,"./util":61}],57:[function(t,n,e){"use strict";var r=t("underscore"),a=t("./gfs-wind"),i=t("./scalarProduct"),o=t("./strings");n.exports=function(t,n){function e(t,n){var e=t[2];return.5*n*e*e*e}function u(t){return e(h(t),g(t))}function c(t){return e(d(t),v(t))}function s(t){return e(p(t),m(t))}var l=a(t),f=i(n,/air_density/,o.gfs,["air_density"]),h=l.field().valueAt,d=l.field().nearest,p=l.field().bilinear,g=f.field().valueAt,v=f.field().nearest,m=f.field().bilinear;return r.extend(f,{field:function(){return{valueAt:u,nearest:c,bilinear:s}},interpolate:function(t){return s(t)}})}},{"./gfs-wind":56,"./scalarProduct":59,"./strings":60,underscore:5}],58:[function(t,n,e){"use strict";var r=t("../micro"),a=t("../utc"),i=t("../grid/rectangular"),o=t("../interpolate/nearest"),u=t("../interpolate/bilinear"),c=t("./strings");n.exports=function(t){var n=t,e=n.header,s=e.variables,l=s.u,f=s.v,h=s[l.dimensions[0]],d=s[l.dimensions[2]],p=s[l.dimensions[3]],g=r.merge(n.blocks[l.data.block],n.blocks[f.data.block]),v=i(p.sequence,d.sequence),m=u.vector(v,g);return{sourceHTML:c.oscar,date:function(){return a.parts(h.data[0])},grid:function(){return v},field:function(){return{valueAt:function(t){var n=2*t,e=g[n],r=g[n+1];return[e,r,Math.sqrt(e*e+r*r)]},nearest:o.vector(v,g),bilinear:u.vector(v,g)}},interpolate:function(t){return m(t)}}}},{"../grid/rectangular":35,"../interpolate/bilinear":36,"../interpolate/nearest":38,"../micro":43,"../utc":65,"./strings":60}],59:[function(t,n,e){"use strict";var r=t("underscore"),a=t("./util"),i=t("../utc"),o=t("../grid/rectangular"),u=t("../interpolate/nearest"),c=t("../interpolate/bilinear");n.exports=function(t,n,e,s,l){Array.isArray(t)&&(t=a.munge(t,s)),t.blocks||(t=a.blockify(t,n));var f=t,h=f.header,d=h.variables,p=r.find(r.keys(d),function(t){return n.test(t)}),g=d[p],v=g.dimensions,m=d[v[0]],y=d[r.last(v,2)[0]],M=d[r.last(v,2)[1]],b=f.blocks[g.data.block];r.isFunction(l)&&l(b);var w=o(M.sequence,y.sequence),x={valueAt:function(t){return b[t]},nearest:u.scalar(w,b),bilinear:c.scalar(w,b)};return{sourceHTML:e,date:function(){return i.parts(m.data[0])},grid:function(){return w},field:function(){return x},interpolate:function(t){return x.bilinear(t)}}}},{"../grid/rectangular":35,"../interpolate/bilinear":36,"../interpolate/nearest":38,"../utc":65,"./util":61,underscore:5}],60:[function(t,n,e){"use strict";var r=t("../micro"),a=r.isKioskMode()?"":" [<a href='about.html#co2' class='internal-link'>important note</a>]";n.exports={geos:"GEOS-5 / GMAO / NASA",geosCO2:"GEOS-5 / GMAO / NASA"+a,gfs:"GFS / NCEP / US National Weather Service",oscar:"OSCAR / Earth & Space Research",rtgsst:"RTG-SST / NCEP / US National Weather Service",ww3:"WAVEWATCH III / NCEP / NWS"}},{"../micro":43}],61:[function(t,n,e){"use strict";var r=n.exports={},a=t("underscore"),i=t("../utc");r.munge=function(t,n,e){var r=t[0].header,a=i.add(i.parts(r.refTime),{hour:r.forecastTime}),o={time:{data:[i.printISO(a)]},lat:{sequence:{start:r.la1,delta:-r.dy,size:r.ny}},lon:{sequence:{start:r.lo1,delta:r.dx,size:r.nx}}},u=[];return n.forEach(function(n,r){o[n]={dimensions:e||["time","lat","lon"],data:{block:r}},u[r]=t[r].data}),{header:{variables:o},blocks:u}},r.blockify=function(t,n){var e=t.variables,r=[];return a.keys(e).forEach(function(t){if(n.test(t)){var a=e[t];r.push(a.data),a.data={block:r.length-1}}}),{header:t,blocks:r}}},{"../utc":65,underscore:5}],62:[function(t,n,e){"use strict";var r=Math.PI,a=2*r,i=a/360,o=t("../utc"),u=t("../grid/rectangular"),c=t("../interpolate/nearest"),s=t("../interpolate/bilinear"),l=t("./strings");n.exports=function(t){for(var n=t,e=n.header,r=e.variables,a=r.Primary_wave_direction_surface,f=r.Primary_wave_mean_period_surface,h=r[a.dimensions[0]],d=r[a.dimensions[1]],p=r[a.dimensions[2]],g=n.blocks[a.data.block],v=n.blocks[f.data.block],m=new Float32Array(2*g.length),y=0;y<g.length;y++){var M=2*y,b=g[y]*i,w=v[y];7e37>b&&7e37>w?(m[M]=-w*Math.sin(b),m[M+1]=-w*Math.cos(b)):m[M]=m[M+1]=7e37}var x=u(p.sequence,d.sequence),_=s.vector(x,m);return{sourceHTML:l.ww3,date:function(){return o.parts(h.data[0])},grid:function(){return x},field:function(){return{valueAt:function(t){var n=2*t,e=m[n],r=m[n+1];return[e,r,Math.sqrt(e*e+r*r)]},nearest:c.vector(x,m),bilinear:s.vector(x,m)}},interpolate:function(t){return _(t)}}}},{"../grid/rectangular":35,"../interpolate/bilinear":36,"../interpolate/nearest":38,"../utc":65,"./strings":60}],63:[function(t,n,e){"use strict";n.exports=function(n){function e(t){var n=S.isDevMode()?"":"https://gaia.nullschool.net",e=n+t,r=S.siteInstance();return r?e+"?"+r:e}function r(t){return"https://earth.nullschool.net"+t}function a(t){return T.extend({descriptionHTML:"",paths:[],date:function(){return null},navigate:function(t){return o(this.date(),t)},navigateTo:function(t){return i(t)},load:function(t){function n(t){return/\.epak([\/?#]|$)/.test(t)?S.loadEpak(t):S.loadJson(t)}var e=this;return E.map(this.paths,n).then(function(n){return t.requested?null:T.extend(e,e.builder.apply(e,n))})},alpha:{single:160,animated:112}},t)}function i(t,n){var e="current"===t?T.pick(A.parts(N.now()),"year","month","day","hour"):T.clone(t);return e.hour=3*Math.floor(e.hour/3),e.minute=0,n&&(e=A.normalize(A.add(e,n))),e}function o(t,n){var e=3*(n>1?8:-1>n?-8:n);return A.add(t,{hour:e})}function u(t,n){if("current"===t.date)return{dir:"current",stamp:"current",date:i(t.date,n)};var e=i(t.date,n);return{dir:A.print(e,"{yyyy}/{MM}/{dd}"),stamp:A.print(e,"{hh}{mm}"),date:e}}function c(t,n,e,r){var a=u(t),i=A.date(a.date),o=i>=new Date("2014/11/24")?".epak":".json",c="0.5";i<new Date("2015/03/11")||S.isEmbeddedInIFrame()&&!S.isKioskMode()?c="1.0":i>new Date("2016/06/22")&&t.hd&&(c="0.25");var s=[a.stamp,n,e,r,"gfs",c].filter(S.isValue).join("-")+o;return L(a.dir+"/"+s,i)}function s(t,n,e){var r=u(t,e),a=A.date(r.date),i=[r.stamp,n,"geos.epak"].join("-");return P(r.dir+"/"+i,a)}function l(t,n,e,r){var a=u(t),i=A.date(a.date),o=[a.stamp,n,e,r,"wave","30m"].filter(S.isValue).join("-")+".epak";return O(a.dir+"/"+o,i)}function f(t,n,e){if(e=+e||0,"current"===n)return t[t.length-1+e];var r=A.print(n,"{yyyy}{MM}{dd}"),a=T.sortedIndex(t,r);return a=0===(t[a]||"").indexOf(r)?a:a-1,t[a+e]}function h(t,n){var e=f(t,n);return e?A.parse(e,/(\d{4})(\d\d)(\d\d)/):null}function d(t,n,e){var r=f(t,n,e>1?6:-1>e?-6:e);return r?A.parse(r,/(\d{4})(\d\d)(\d\d)/):null}function p(t,n){var e=f(t,n.date);return e?F(e):null}function g(){return S.loadJsonOnce(F("oscar-catalog.json"))}function v(t){var n;if("current"===t){var e=T.pick(A.parts(N.now()),"year","month","day");n=A.add(e,{day:-1})}else n=T.clone(t);return n}function m(t,n){var e=n>1?5:-1>n?-5:n;return A.add(t,{day:e})}function y(t,n,e,r){var a=A.date(v(t.date)),i="current"===t.date?"current":A.print(t.date,"{yyyy}/{MM}"),o="current"===i?"current":A.print(t.date,"{yyyy}{MM}{dd}"),u=[o,n,e,r,"rtg","0.5"].filter(S.isValue).join("-")+".epak";return D(i+"/"+u,a)}function M(t){return"surface"===t.surface?"Surface":S.capitalize(t.level)}function b(t){return"surface"===t.surface?"":S.capitalize(t.level)}function w(t){return function(n){var e={};return T.each(t,function(t,r){e[r]=t[n]||t.en||t}),e}}function x(t){return t[S.siteLangCode()]||t.en}var _={},k=t("d3"),E=t("when"),T=t("underscore"),S=t("./micro"),A=t("./utc"),N=t("./clock"),j=t("./product/scalarProduct"),R=t("./product/strings"),C=t("./palette/palette"),q=new Date("2016-02-20");_.gaia=e;var P=function(t,n){return q>n?r("/data/geos/"+t):e("/data/geos/"+t)},L=function(t,n){return q>n?r("/data/weather/"+t):e("/data/gfs/"+t)},F=function(t){return e("/data/oscar/"+t)},D=function(t,n){return q>n?r("/data/ocean/"+t):e("/data/rtgsst/"+t)},O=function(t,n){return q>n?r("/data/ocean/"+t):e("/data/ww3/"+t)},z=function(t){return e("/data/argo/"+t)},I=S.isKioskMode()?"":"(<a href='about.html#aot' class='internal-link'>AOT</a>)",U={wind:{matchesPrimary:function(){return!0},matchesOverlay:T.matches({overlayType:"wind"}),create:function(n){return a({type:"wind",descriptionHTML:w({name:{en:"Wind",ja:""},qualifier:{en:" @ "+M(n),ja:" @ "+b(n)}}),paths:[c(n,"wind",n.surface,n.level)],date:function(){return i(n.date)},builder:function(n){return t("./product/gfs-wind.js")(n)},units:[{label:"km/h",conversion:function(t){return 3.6*t},precision:0},{label:"m/s",conversion:function(t){return t},precision:1},{label:"kn",conversion:function(t){return 1.943844*t},precision:0},{label:"mph",conversion:function(t){return 2.236936*t},precision:0}],scale:t("./palette/wind.js")(),particles:{velocityScale:.01,maxIntensity:15}})}},temp:{matchesOverlay:T.matches({overlayType:"temp"}),create:function(n){return a({type:"temp",descriptionHTML:w({name:{en:"Temp",ja:""},qualifier:{en:" @ "+M(n),ja:" @ "+b(n)}}),paths:[c(n,"temp",n.surface,n.level)],date:function(){return i(n.date)},builder:function(t){return j(t,/Temperature/,R.gfs,["Temperature"])},units:[{label:"C",conversion:function(t){return t-273.15},precision:1},{label:"F",conversion:function(t){return 9*t/5-459.67},precision:1},{label:"K",conversion:function(t){return t},precision:1}],scale:t("./palette/temp.js")()})}},relative_humidity:{matchesOverlay:T.matches({overlayType:"relative_humidity"}),create:function(t){return a({type:"relative_humidity",descriptionHTML:w({name:{en:"Relative Humidity",ja:""},qualifier:{en:" @ "+M(t),ja:" @ "+b(t)}}),paths:[c(t,"relative_humidity",t.surface,t.level)],date:function(){return i(t.date)},builder:function(t){return j(t,/Relative_humidity/,R.gfs)},units:[{label:"%",conversion:function(t){return t},precision:0}],scale:C.buildScaleFromSegments([0,100],[[0,[230,165,30]],[25,[120,100,95]],[60,[40,44,92]],[75,[21,13,193]],[90,[75,63,235]],[100,[25,255,255]]],1e3)})}},air_density:{matchesOverlay:T.matches({overlayType:"air_density"}),create:function(t){return a({type:"air_density",descriptionHTML:w({name:{en:"Air Density",ja:""},qualifier:{en:" @ "+M(t),ja:" @ "+b(t)}}),paths:[c(t,"air_density",t.surface,t.level)],date:function(){return i(t.date)},builder:function(t){return j(t,/air_density/,R.gfs)},units:[{label:"kg/m",conversion:function(t){return t},precision:2}],scale:C.buildScaleFromSegments([0,1.5],[[0,[0,0,0]],[1.5,[255,255,255]]],10)})}},wind_power_density:{matchesOverlay:T.matches({overlayType:"wind_power_density"}),create:function(n){var e=U.wind.create(n),r=U.air_density.create(n);return a({type:"wind_power_density",descriptionHTML:w({name:{en:"Instant Wind Power Density",ja:""},qualifier:{en:" @ "+M(n),ja:" @ "+b(n)}}),paths:[e.paths[0],r.paths[0]],date:function(){return i(n.date)},builder:function(n,e){return t("./product/gfs-wpd.js")(n,e)},units:[{label:"kW/m<sup>2</sup>",tooltip:"kW/m",conversion:function(t){return t/1e3},precision:1},{label:"W/m<sup>2</sup>",tooltip:"W/m",conversion:function(t){return t},precision:0}],scale:C.buildScaleFromSegments([0,8e4],[[0,[15,4,96]],[250,[30,8,180]],[1e3,[121,102,2]],[2e3,[118,161,66]],[4e3,[50,102,219]],[8e3,[19,131,193]],[16e3,[59,204,227]],[64e3,[241,1,45]],[8e4,[243,0,241]]],1e4)})}},misery_index:{matchesOverlay:T.matches({overlayType:"misery_index"}),create:function(t){return a({type:"misery_index",descriptionHTML:w({name:{en:"Misery (Wind Chill & Heat Index)",ja:""},qualifier:{en:" @ "+M(t),ja:" @ "+b(t)}}),paths:[c(t,"misery_index")],date:function(){return i(t.date)},builder:function(t){return j(t,/misery_index/,R.gfs)},units:function(){var t=x({en:" (feels like)",ja:""});return[{label:"C"+t,conversion:function(t){return t-273.15},precision:1},{label:"F"+t,conversion:function(t){return 9*t/5-459.67},precision:1},{label:"K"+t,conversion:function(t){return t},precision:1}]}(),scale:C.buildScaleFromSegments([236,332],[[241,[255,255,255]],[245.5,[6,82,255]],[250,[6,82,255]],[258,[46,131,255]],[266,[46,131,255]],[280,[0,0,0]],[300,[0,0,0]],[305,[247,20,35]],[309.5,[247,20,35]],[314,[245,210,5]],[320.5,[245,210,5]],[327,[255,255,255]]],1e3)})}},total_cloud_water:{matchesOverlay:T.matches({overlayType:"total_cloud_water"}),create:function(t){return a({type:"total_cloud_water",descriptionHTML:w({name:{en:"Total Cloud Water",ja:""},qualifier:""}),paths:[c(t,"total_cloud_water")],date:function(){return i(t.date)},builder:function(t){return j(t,/Cloud_water/,R.gfs,["Cloud_water"])},units:[{label:"kg/m<sup>2</sup>",tooltip:"kg/m",conversion:function(t){return t},precision:3}],scale:C.buildScaleFromSegments([0,1],[[0,[5,5,89]],[.2,[170,170,230]],[1,[255,255,255]]],1e3)})}},total_precipitable_water:{matchesOverlay:T.matches({overlayType:"total_precipitable_water"}),create:function(t){return a({type:"total_precipitable_water",descriptionHTML:w({name:{en:"Total Precipitable Water",ja:""},qualifier:""}),paths:[c(t,"total_precipitable_water")],date:function(){return i(t.date)},builder:function(t){return j(t,/Precipitable_water/,R.gfs,["Precipitable_water"])},units:[{label:"kg/m<sup>2</sup>",tooltip:"kg/m",conversion:function(t){return t},precision:3}],scale:C.buildScaleFromSegments([0,70],[[0,[230,165,30]],[10,[120,100,95]],[20,[40,44,92]],[30,[21,13,193]],[40,[75,63,235]],[60,[25,255,255]],[70,[150,255,255]]],1e3)})}},mean_sea_level_pressure:{matchesOverlay:T.matches({overlayType:"mean_sea_level_pressure"}),create:function(t){return a({type:"mean_sea_level_pressure",descriptionHTML:w({name:{en:"Mean Sea Level Pressure",ja:""},qualifier:""}),paths:[c(t,"mean_sea_level_pressure")],date:function(){return i(t.date)},builder:function(t){return j(t,/Pressure_reduced_to_MSL/,R.gfs,["Pressure_reduced_to_MSL"])},units:[{label:"hPa",conversion:function(t){return t/100},precision:0},{label:"mmHg",conversion:function(t){return t/133.322387415},precision:0},{label:"inHg",conversion:function(t){return t/3386.389},precision:1}],scale:C.buildScaleFromSegments([92e3,105e3],[[92e3,[40,0,0]],[95e3,[187,60,31]],[96500,[137,32,30]],[98e3,[16,1,43]],[100500,[36,1,93]],[101300,[241,254,18]],[103e3,[228,246,223]],[105e3,[255,255,255]]],1e3)})}},precip_3hr:{matchesOverlay:T.matches({overlayType:"precip_3hr"}),create:function(n){return a({type:"precip_3hr",descriptionHTML:w({name:{en:"Next 3-hr Precip Accumulation",ja:"3"},qualifier:""}),paths:[c(n,"precip_3hr")],date:function(){return i(n.date)},builder:function(t){return j(t,/precip_accumulation_3hr/,R.gfs)},units:[{label:"mm",tooltip:"mm",conversion:function(t){return t},precision:1},{label:"in",tooltip:"in",conversion:function(t){return t/25.4},precision:2},{label:"kg/m<sup>2</sup>",tooltip:"kg/m",conversion:function(t){return t},precision:1}],alpha:{single:160,animated:160},scale:t("./palette/precip")()})}},cape:{matchesOverlay:T.matches({overlayType:"cape"}),create:function(n){return a({type:"cape",descriptionHTML:w({name:{en:"CAPE (Surface)",ja:""},qualifier:""}),paths:[c(n,"cape")],date:function(){return i(n.date)},builder:function(t){return j(t,/Convective_available_potential_energy_surface/,R.gfs)},units:[{label:"J/kg",tooltip:"J/kg",conversion:function(t){return t},precision:0}],alpha:{single:160,animated:140},scale:t("./palette/cape")()})}},co2:{matchesOverlay:T.matches({overlayType:"co2"}),create:function(n){return a({type:"co2",descriptionHTML:w({name:{en:"Carbon Dioxide Mixing Ratio",ja:""},qualifier:""}),paths:[s(n,"co2")],date:function(){return i(n.date)},builder:function(t){return j(t,/CO2CL/,R.geos)},units:[{label:"mol/mol",conversion:function(t){return 1e6*t},precision:1}],alpha:{single:160,animated:160},scale:t("./palette/co2")()})}},cosc:{matchesOverlay:T.matches({overlayType:"cosc"}),create:function(n){return a({type:"cosc",descriptionHTML:w({name:{en:"Carbon Monoxide Conc.",ja:""},qualifier:{en:" @ Surface",ja:" @ "}}),paths:[s(n,"cosc")],date:function(){return i(n.date)},builder:function(t){return j(t,/COSC/,R.geos)},units:[{label:"ppbv",conversion:function(t){return t},precision:0},{label:"ppmv",conversion:function(t){return t/1e3},precision:2}],alpha:{single:160,animated:140},scale:t("./palette/cosc")()})}},so2smass:{matchesOverlay:T.matches({overlayType:"so2smass"}),create:function(n){return a({type:"so2smass",descriptionHTML:w({name:{en:"Sulfur Dioxide Mass",ja:""},qualifier:{en:" @ Surface",ja:" @ "}}),paths:[s(n,"so2smass")],date:function(){return i(n.date)},builder:function(t){return j(t,/SO2SMASS/,R.geos)},units:[{label:"g/m<sup>3</sup>",tooltip:"g/m",conversion:function(t){return 1e3*t*1e6},precision:2}],alpha:{single:160,animated:140},scale:t("./palette/so2smass")()})}},duexttau:{matchesOverlay:T.matches({overlayType:"duexttau"}),create:function(n){return a({type:"duexttau",descriptionHTML:w({name:{en:"Dust Extinction "+I,ja:" "+I},qualifier:""}),paths:[s(n,"duexttau")],date:function(){return i(n.date)},builder:function(t){return j(t,/DUEXTTAU/,R.geos)},units:[{label:"",conversion:function(t){return t},precision:4}],alpha:{single:160,animated:140},scale:t("./palette/duexttau")()})}},suexttau:{matchesOverlay:T.matches({overlayType:"suexttau"}),create:function(n){return a({type:"suexttau",descriptionHTML:w({name:{en:"Sulfate Extinction "+I,ja:" "+I},qualifier:""}),paths:[s(n,"suexttau")],date:function(){return i(n.date)},builder:function(t){return j(t,/SUEXTTAU/,R.geos)},units:[{label:"",conversion:function(t){return t},precision:3}],alpha:{single:160,animated:140},scale:t("./palette/suexttau")()})}},co2sc:{matchesOverlay:T.matches({overlayType:"co2sc"}),create:function(n){var e=32;return a({type:"co2sc",descriptionHTML:w({name:{en:"Carbon Dioxide Concentration",ja:""},qualifier:{en:" @ Surface",ja:" @ "}}),paths:[s(n,"co2sc",{minute:90})],date:function(){return i(n.date,{minute:90})},navigate:function(t){return o(this.date(),t)},navigateTo:function(t){return i(t,{minute:90})},builder:function(t){return j(t,/CO2SC/,R.geosCO2,null,function(t){for(var n=0;n<t.length;n++)t[n]+=e})},units:[{label:"ppmv",conversion:function(t){return t},precision:0}],alpha:{single:200,animated:150},scale:t("./palette/co2sc")(e)})}},currents:{matchesPrimary:T.matches({surface:"surface",level:"currents"}),matchesOverlay:T.matches({overlayType:"currents"}),create:function(n){return E(g()).then(function(e){return a({type:"currents",descriptionHTML:w({name:{en:"Ocean Currents",ja:""},qualifier:{en:" @ Surface",ja:" @ "}}),paths:[p(e,n)],date:function(){return h(e,n.date)},navigate:function(t){return d(e,this.date(),t)},navigateTo:function(t){return d(e,t,0)},builder:function(n){return t("./product/oscar.js")(n)},units:[{label:"m/s",conversion:function(t){return t},precision:2},{label:"km/h",conversion:function(t){return 3.6*t},precision:1},{label:"kn",conversion:function(t){return 1.943844*t},precision:1},{label:"mph",conversion:function(t){return 2.236936*t},precision:1}],scale:C.buildScaleFromSegments([0,1.5],[[0,[10,25,68]],[.15,[10,25,250]],[.4,[24,255,93]],[.65,[255,233,102]],[1,[255,233,15]],[1.5,[255,15,15]]],1e3),particles:{velocityScale:1/7,maxIntensity:.7}})})}},primary_waves:{matchesPrimary:T.matches({param:"ocean",surface:"primary",level:"waves"}),matchesOverlay:T.matches({overlayType:"primary_waves"}),create:function(n){return a({type:"primary_waves",descriptionHTML:w({name:{en:"Peak Wave Period",ja:""},qualifier:""}),paths:[l(n,"primary")],date:function(){return i(n.date)},builder:function(n){return t("./product/ww3-primary")(n)},units:[{label:"sec",conversion:function(t){return t},precision:1}],scale:C.buildScaleFromSegments([0,25],[[0,[0,0,0]],[25,[21,255,255]]],1e3),particles:{velocityScale:1/612,maxIntensity:12,waves:!0}})}},sea_surface_temp:{matchesOverlay:T.matches({overlayType:"sea_surface_temp"}),create:function(t){return a({type:"sea_surface_temp",descriptionHTML:w({name:{en:"Sea Surface Temp",ja:""},qualifier:""}),paths:[y(t,"sea_surface_temp")],date:function(){return v(t.date)},navigate:function(t){return m(this.date(),t)},navigateTo:function(t){return m(t,0)},builder:function(t){return j(t,/Temperature_surface_sparse/,R.rtgsst)},units:[{label:"C",conversion:function(t){return t-273.15},precision:1},{label:"F",conversion:function(t){return 9*t/5-459.67},precision:1},{label:"K",conversion:function(t){return t},precision:1}],scale:C.buildScaleFromSegments([270,304.65],[[270,[255,255,255]],[271.25,[255,255,255]],[271.3,[15,4,168]],[273.15,[15,54,208]],[273.25,[15,54,188]],[275.65,[15,4,168]],[281.65,[24,132,14]],[291.15,[247,251,59]],[295,[235,167,0]],[299.65,[245,0,39]],[303,[87,17,0]],[304.65,[238,0,242]]],1e3)})}},sea_surface_temp_anomaly:{matchesOverlay:T.matches({overlayType:"sea_surface_temp_anomaly"}),create:function(t){return a({type:"sea_surface_temp_anomaly",descriptionHTML:w({name:{en:"SST Anomaly",ja:""},qualifier:""}),paths:[y(t,"sea_surface_temp_anomaly")],date:function(){return v(t.date)},navigate:function(t){return m(this.date(),t)},navigateTo:function(t){return m(t,0)},builder:function(t){return j(t,/Temperature_surface_anomaly_sparse/,R.rtgsst)},units:[{label:"C",conversion:function(t){return t},precision:1},{label:"F",conversion:function(t){return 9*t/5},precision:1},{label:"K",conversion:function(t){return t},precision:1}],scale:C.buildScaleFromSegments([-6,6],[[-6,[255,255,255]],[-3,[7,252,254]],[-1.5,[66,42,253]],[-.75,[34,55,134]],[0,[0,0,6]],[.75,[134,55,34]],[1.5,[253,14,16]],[3,[254,252,0]],[6,[255,255,255]]],1e3)})}},significant_wave_height:{matchesOverlay:T.matches({overlayType:"significant_wave_height"}),create:function(t){return a({type:"significant_wave_height",descriptionHTML:w({name:{en:"Significant Wave Height",ja:""},qualifier:""}),paths:[l(t,"sig_height")],date:function(){return i(t.date)},builder:function(t){return j(t,/Significant_height/,R.ww3)},units:[{label:"m",conversion:function(t){return t},precision:2},{label:"ft",conversion:function(t){return 100*t/2.54/12},precision:1}],scale:C.buildScaleFromSegments([0,15],[[0,[8,29,88]],[1,[37,52,148]],[2,[34,94,168]],[3,[29,145,192]],[4,[65,182,196]],[5,[127,205,187]],[6,[199,233,180]],[7,[237,248,177]],[8,[254,204,92]],[10,[253,141,60]],[12,[240,59,32]],[14,[189,0,38]]],1e3)})}},off:{matchesOverlay:T.matches({overlayType:"off"}),create:function(){return null}}};return _.productsFor=function(t){var n=T.clone(t),e=null,r=null;T.values(U).forEach(function(t){T.isFunction(t.matchesPrimary)&&t.matchesPrimary(n)&&(e=t),T.isFunction(t.matchesOverlay)&&t.matchesOverlay(n)&&t!==e&&(r=t)});var a=[];return e&&a.push(e.create(n)),r&&a.push(r.create(n)),a.filter(S.isTruthy)},_.overlayTypes=function(){return k.set(T.keys(U))},_.argoUrl=z,_}},{"./clock":26,"./micro":43,"./palette/cape":44,"./palette/co2":45,"./palette/co2sc":46,"./palette/cosc":47,"./palette/duexttau":48,"./palette/palette":50,"./palette/precip":51,"./palette/so2smass":52,"./palette/suexttau":53,"./palette/temp.js":54,"./palette/wind.js":55,"./product/gfs-wind.js":56,"./product/gfs-wpd.js":57,"./product/oscar.js":58,"./product/scalarProduct":59,"./product/strings":60,"./product/ww3-primary":62,"./utc":65,d3:3,underscore:5,when:23}],64:[function(t,n,e){"use strict";function r(t,n,e,r,i){function o(e){var a=e[0],o=e[1];if(a!==a||o!==o)return[NaN,NaN];var u=a*c,s=o*c,l=u-n,f=Math.sin(l),d=Math.cos(l),g=Math.sin(s),m=Math.cos(s),y=t*m,M=y*f,b=y*d*p-v*g,w=M*h+r,x=b*h+i;return[w,x]}function s(t){var e=t[0],a=t[1],o=(e-r)*h,c=(i-a)*h,s=o*o+c*c,l=1-s/d;if(l>=0){var f=Math.sqrt(l),g=n+Math.atan2(o,f*v-c*p),y=Math.asin(f*p+c*m);return[g*u,y*u]}return[NaN,NaN]}function l(t){return{shaderSource:function(){return"\nuniform vec2 u_translate;   // screen coords translation (x0, y0)\nuniform float u_R2;         // scale R, squared\nuniform float u_lon0;       // origin longitude\nuniform float u_sinlat0;    // sin(lat0)\nuniform float u_Rcoslat0;   // R * cos(lat0)\nuniform float u_coslat0dR;  // cos(lat0) / R\nuniform float u_flip;       // 1.0 if lat0 in range [-90deg, +90deg], otherwise -1.0\n\n// Handbook of Mathematical Functions, M. Abramowitz and I.A. Stegun, Ed. For input on range [-1, +1]\n// http://http.developer.nvidia.com/Cg/asin.html\nfloat arcsin(in float v) {\n    float x = abs(v);\n    float ret = -0.0187293;\n    ret *= x;\n    ret += 0.0742610;\n    ret *= x;\n    ret -= 0.2121144;\n    ret *= x;\n    ret += 1.5707288;\n    ret = PI / 2.0 - sqrt(1.0 - x) * ret;\n    return sign(v) * ret;\n}\n\n/** @returns [lon, lat] in radians for the specified point [x, y], or [7e37, 7e37] if the point is unprojectable. */\nvec2 invert(in vec2 point) {\n    vec2 pt = (point - u_translate) * u_flip;\n    float d = 1.0 - dot(pt, pt) / u_R2;\n    if (d >= 0.0) {  // CONSIDER: step() to remove branch... worth it?\n        float cosc = sqrt(d);\n        float lon = u_lon0 + atan(pt.x, cosc * u_Rcoslat0 - pt.y * u_sinlat0);  // u_lon0 + [-pi/2, pi/2]\n        float lat = arcsin(cosc * u_sinlat0 + pt.y * u_coslat0dR);              // [-/2, /2] [-90, +90]\n        return vec2(lon, lat);\n    }\n    return vec2(7e37);  // outside of projection\n}\n"},textures:function(){return{}},uniforms:function(){return{u_translate:y,u_R2:d,u_lon0:n,u_sinlat0:p,u_Rcoslat0:v,u_coslat0dR:m,u_flip:h}}}}var f=a.floorMod(e+90,360),h=f>180?-1:1;0>h?(e=270-f,n+=180):e=f-90,e*=c,n=(a.floorMod(n+180,360)-180)*c;var d=t*t,p=Math.sin(e),g=Math.cos(e),v=t*g,m=g/t,y=[r,i];return o.invert=s,o.webgl=l,o}var a=t("./../micro"),i=Math.PI,o=2*i,u=360/o,c=o/360;r.fromD3=function(t){var n=t.translate(),e=t.rotate();if(0!==e[2])throw new Error(" rotation not supported");return r(t.scale(),-e[0],-e[1],n[0],n[1])},n.exports=r},{"./../micro":43}],65:[function(t,n,e){"use strict";!function(){function e(t,n){return void 0!==t&&null!==t?t:n}function r(t,n,e){var r=t.toString(),a=Math.max(n-r.length,0);return new Array(a+1).join(e||"0")+r}function a(t){return t=e(t,""),(u.isString(t)||u.isNumber(t))&&(t=new Date(t)),t}function i(t){return{year:t.year||0,month:t.month||0,day:t.day||0,hour:t.hour||0,minute:t.minute||0,second:t.second||0,milli:t.milli||0}}var o=n.exports={},u=t("underscore"),c=["year","month","day","hour","minute","second","milli"];
o.parts=function(t){return t=a(t),{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),milli:t.getUTCMilliseconds()}},o.localParts=function(t){return t=a(t),{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),milli:t.getMilliseconds()}},o.date=function(t){return new Date(Date.UTC(e(t.year,1900),e(t.month,1)-1,e(t.day,1),e(t.hour,0),e(t.minute,0),e(t.second,0),e(t.milli,0)))},o.normalize=function(t){return o.parts(o.date(t))},o.add=function(t,n){var r=u.clone(t);return u.intersection(u.keys(n),c).forEach(function(t){r[t]=+e(r[t],0)+ +n[t]}),r},o.compare=function(t,n){var e=o.date(t).getTime();isNaN(e)&&(e=-(1/0));var r=o.date(n).getTime();return isNaN(r)&&(r=-(1/0)),r>e?-1:e>r?1:0},o.print=function(t,n){for(var e=[],a=0;a<n.length;a++){var i=n[a];if("{"===i){var o="";for(a++;a<n.length;a++){i=n[a];{if("}"===i){var u=NaN;switch(o[0]){case"y":u=+t.year;break;case"M":u=+t.month;break;case"d":u=+t.day;break;case"h":u=+t.hour;break;case"m":u=+t.minute;break;case"s":u=+t.second;break;case"S":u=+t.milli}u===u?e.push(r(u,o.length)):e.push("{",o,"}");break}o+=i}}}else e.push(i)}return e.join("")},o.parse=function(t,n,e){function r(t,n){n===n&&(a[t]=n)}var a={};e=e||{year:1,month:2,day:3,hour:4,minute:5,second:6,milli:7};var i=n.exec(t);return i&&(r("year",+i[e.year]),r("month",+i[e.month]),r("day",+i[e.day]),r("hour",+i[e.hour]),r("minute",+i[e.minute]),r("second",+i[e.second]),r("milli",+i[e.milli])),a},o.printISO=function(t){return o.date(t).toISOString()},o.largest=function(t){for(var n=0;n<c.length;n++)if(c[n]in t)return c[n];return void 0},o.smallest=function(t){for(var n=c.length-1;n>=0;n--)if(c[n]in t)return c[n];return void 0},o.chop=function(t,n){for(var e={},r=0;r<c.length;r++){var a=c[r];if(a in n&&(e[a]=n[a]),a===t)break}return e},o.carry=function(t){var n={};void 0!==t.year&&(n.year=t.year),void 0!==t.month&&(n.month=t.month);var r=o.largest(t),a=t.day,i=t.hour,u=t.minute,c=t.second,s=t.milli;return"milli"!==r&&(s>=1e3&&(c=e(c,0)+Math.floor(s/1e3),s%=1e3),"second"!==r&&(c>=60&&(u=e(u,0)+Math.floor(c/60),c%=60),"minute"!==r&&(u>=60&&(i=e(i,0)+Math.floor(u/60),u%=60),"hour"!==r&&i>=24&&(a=e(a,0)+Math.floor(i/24),i%=24)))),void 0!==a&&(n.day=a),void 0!==i&&(n.hour=i),void 0!==u&&(n.minute=u),void 0!==c&&(n.second=c),void 0!==s&&(n.milli=s),n},o.accumulate=function(t,n){var e=o.carry(i(n)),r=e.day;if("day"===t)return{day:r};if(r=24*r+e.hour,"hour"===t)return{hour:r};if(r=60*r+e.minute,"minute"===t)return{minute:r};if(r=60*r+e.second,"second"===t)return{second:r};if(r=1e3*r+e.milli,"milli"===t)return{milli:r};var a={};return a[t]=void 0,a},o.range=function(t,n,e){for(var r=[],a=t;o.compare(a,n)<=0;a=o.add(a,e))r.push(o.carry(a));return r},o.dayOfYear=function(t){var n=o.date(t),e=o.date({year:n.getUTCFullYear()});return Math.floor((n-e)/864e5)+1}}()},{underscore:5}],66:[function(t,n,e){function r(t){return s===setTimeout?setTimeout(t,0):s.call(null,t,0)}function a(t){l===clearTimeout?clearTimeout(t):l.call(null,t)}function i(){p&&h&&(p=!1,h.length?d=h.concat(d):g=-1,d.length&&o())}function o(){if(!p){var t=r(i);p=!0;for(var n=d.length;n;){for(h=d,d=[];++g<n;)h&&h[g].run();g=-1,n=d.length}h=null,p=!1,a(t)}}function u(t,n){this.fun=t,this.array=n}function c(){}var s,l,f=n.exports={};!function(){try{s=setTimeout}catch(t){s=function(){throw new Error("setTimeout is not defined")}}try{l=clearTimeout}catch(t){l=function(){throw new Error("clearTimeout is not defined")}}}();var h,d=[],p=!1,g=-1;f.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];d.push(new u(t,n)),1!==d.length||p||r(o)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}]},{},[42]);
//# sourceMappingURL=bundle.min.js.map
